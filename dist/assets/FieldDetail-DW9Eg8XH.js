import{d as I,l as d,o as R,f as N,P as p,R as S,a as q,S as t,w as a,Q as s,F as M,Z as P,a7 as U}from"./index-CeUaYvVA.js";import{E as z}from"./el-dialog-CMJ3crnE.js";/* empty css                   *//* empty css                     *//* empty css                 */import{E as A,a as Q}from"./el-table-column-CNVENKfm.js";import"./el-checkbox-P28d__VQ.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-B3r7vdR_.js";import"./el-tag-Bffi55J-.js";import"./el-button-CG_o-Lai.js";import{a as f}from"./index-B_U7nE6Z.js";/* empty css                   *//* empty css                       */import{E as m}from"./request-BYjuyoE7.js";import{E as Z}from"./index-Yhf9aIxX.js";import{E as j}from"./index-Bd0HIxHa.js";import{E as G}from"./index-nNlqqqFz.js";import{E as H,a as J}from"./index-CQnDbio0.js";import"./index-CT8zzouX.js";import"./index-iYWA_S4l.js";import"./scroll-DsbyhrQW.js";import"./vnode-Dc4cRWui.js";import"./refs-Caa8iCgk.js";import"./event-BB_Ol6Sd.js";import"./_initCloneObject-1jg3Pr7d.js";import"./isArrayLikeObject-CV9pJG-9.js";import"./typescript-CTRgrCvb.js";import"./isEqual-DTRV5mK6.js";import"./aria-BUADUvnR.js";import"./rules-BWEfMqzk.js";import"./aria-KgdLjl5h.js";import"./validator-D8qVTIjr.js";import"./castArray-ta2Sfc5g.js";import"./_baseClone-C9EZC_0P.js";const K={class:""},L={class:"s-top_bar",style:{"margin-bottom":"10px"}},O={style:{"margin-right":"20px"}},W={class:"s-table-operations"},X={class:"dialog-footer"},Se=I({__name:"FieldDetail",setup(Y){P();const _=U(),k=_.query.title,v=_.query.id,E=d([]),b=d(null),n=d(!1),C=d("输入名称"),c=d(!1),o=d({id:"",name:"",fieldId:v,pid:""}),g=e=>{c.value=!1,n.value=!0,o.value.id=e.id,o.value.name="",o.value.pid=e.id},w=e=>{c.value=!0,n.value=!0,o.value.id=e.id,o.value.name=e.name},x=()=>{c.value?f.editChild({name:o.value.name,id:o.value.id}).then(e=>{e.code===0?(m.success("编辑成功"),n.value=!1,u()):m.error(e.msg)}):f.addChild({fieldId:o.value.fieldId,name:o.value.name,pid:o.value.id}).then(e=>{e.code===0?(m.success("添加成功"),n.value=!1,u()):m.error(e.msg)})},V=e=>{Z.confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{f.del({id:e.id}).then(l=>{l.code===0?(m.success("删除成功"),u()):m.error(l.msg)})}).catch(()=>{})},u=async()=>{f.getChild({fieldId:v}).then(e=>{e.code===0&&(E.value=e.data)})};return u(),(e,l)=>{const r=j,h=A,B=Q,F=G,T=H,$=J,D=z;return R(),N(M,null,[p("div",K,[p("div",L,[p("span",O,S(q(k)),1),t(r,{type:"",onClick:l[0]||(l[0]=i=>e.$router.go(-1))},{default:a(()=>[s("返回")]),_:1})]),p("div",W,[t(r,{size:"small",icon:"Plus",onClick:l[1]||(l[1]=i=>g({}))},{default:a(()=>[s("新增")]),_:1})]),t(B,{data:E.value,"row-key":"id",border:"","tree-props":{children:"child"},"default-expand-all":"","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:a(()=>[t(h,{prop:"name",label:"名称"}),t(h,{label:"操作",width:"180px"},{default:a(i=>[t(r,{link:"",type:"primary",onClick:y=>g(i.row)},{default:a(()=>[s("新增")]),_:2},1032,["onClick"]),t(r,{link:"",type:"primary",onClick:y=>w(i.row)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),t(r,{link:"",type:"danger",onClick:y=>V(i.row)},{default:a(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(D,{title:C.value,modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=i=>n.value=i),style:{width:"400px"}},{footer:a(()=>[p("div",X,[t(r,{onClick:l[3]||(l[3]=i=>n.value=!1)},{default:a(()=>[s("取 消")]),_:1}),t(r,{type:"primary",onClick:x},{default:a(()=>[s("确 定")]),_:1})])]),default:a(()=>[t($,{ref_key:"addformRef",ref:b,model:o.value,"label-width":"atuo"},{default:a(()=>[t(T,{label:"",prop:"name"},{default:a(()=>[t(F,{modelValue:o.value.name,"onUpdate:modelValue":l[2]||(l[2]=i=>o.value.name=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],64)}}});export{Se as default};
