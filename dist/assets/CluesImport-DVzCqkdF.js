import{j,a8 as A,d as N,a as H,t as q,v as Z,o as d,b as I,r as R,n as p,e,D as K,l as E,k as ee,x as te,y as se,c as _,s as le,a3 as B,O as l,f as X,h as V,i,a9 as oe,R as n,ah as ae,a4 as ne,Q as U,P as g,w as re,g as ie,W as ue,N as pe,X as ce,Y as de}from"./index-BgyAZvUt.js";import{E as me}from"./el-row-Ckz9fHOv.js";import{E as ve}from"./el-progress-Cf38t9K3.js";/* empty css                       */import{E as fe,a as _e}from"./el-radio-BUbTR3Ls.js";/* empty css                  */import{E as he}from"./el-col-CslkyERu.js";import{c as ye}from"./index-jmhcWF7T.js";/* empty css                   */import{_ as L,i as Se,b as z,c as P}from"./request-D6fvGTDh.js";import{C as Q}from"./event-BB_Ol6Sd.js";import{u as ge}from"./index-D4vyIFM5.js";import{E as Ee}from"./index-Z1v5JTS_.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-Dm97kLAn.js";import"./cloneDeep-_hS19oGl.js";import"./_baseClone-DBDXGBzA.js";import"./_initCloneObject-D27w6Cg6.js";import"./isEqual-Bds9XCaA.js";import"./vnode-ptL780bU.js";const Ce=j({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),be={[Q]:(m,w)=>[m,w].every(A)},ke=N({name:"ElSteps"}),Ie=N({...ke,props:Ce,emits:be,setup(m,{emit:w}){const t=m,u=H("steps"),{children:v,addChild:y,removeChild:o}=ge(K(),"ElStep");return q(v,()=>{v.value.forEach((r,a)=>{r.setIndex(a)})}),Z("ElSteps",{props:t,steps:v,addStep:y,removeStep:o}),q(()=>t.active,(r,a)=>{w(Q,r,a)}),(r,a)=>(d(),I("div",{class:p([e(u).b(),e(u).m(r.simple?"simple":r.direction)])},[R(r.$slots,"default")],2))}});var $e=L(Ie,[["__file","steps.vue"]]);const Ne=j({title:{type:String,default:""},icon:{type:Se},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),xe=N({name:"ElStep"}),Be=N({...xe,props:Ne,setup(m){const w=m,t=H("step"),u=E(-1),v=E({}),y=E(""),o=ee("ElSteps"),r=K();te(()=>{q([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([s])=>{J(s)},{immediate:!0})}),se(()=>{o.removeStep(G.uid)});const a=_(()=>w.status||y.value),C=_(()=>{const s=o.steps.value[u.value-1];return s?s.currentStatus:"wait"}),S=_(()=>o.props.alignCenter),c=_(()=>o.props.direction==="vertical"),f=_(()=>o.props.simple),b=_(()=>o.steps.value.length),x=_(()=>{var s;return((s=o.steps.value[b.value-1])==null?void 0:s.uid)===(r==null?void 0:r.uid)}),k=_(()=>f.value?"":o.props.space),D=_(()=>[t.b(),t.is(f.value?"simple":o.props.direction),t.is("flex",x.value&&!k.value&&!S.value),t.is("center",S.value&&!c.value&&!f.value)]),W=_(()=>{const s={flexBasis:A(k.value)?`${k.value}px`:k.value?k.value:`${100/(b.value-(S.value?0:1))}%`};return c.value||x.value&&(s.maxWidth=`${100/b.value}%`),s}),F=s=>{u.value=s},M=s=>{const $=s==="wait",T={transitionDelay:`${$?"-":""}${150*u.value}ms`},O=s===o.props.processStatus||$?0:100;T.borderWidth=O&&!f.value?"1px":0,T[o.props.direction==="vertical"?"height":"width"]=`${O}%`,v.value=T},J=s=>{s>u.value?y.value=o.props.finishStatus:s===u.value&&C.value!=="error"?y.value=o.props.processStatus:y.value="wait";const $=o.steps.value[u.value-1];$&&$.calcProgress(y.value)},G=le({uid:r.uid,currentStatus:a,setIndex:F,calcProgress:M});return o.addStep(G),(s,$)=>(d(),I("div",{style:X(e(W)),class:p(e(D))},[B(" icon & line "),l("div",{class:p([e(t).e("head"),e(t).is(e(a))])},[e(f)?B("v-if",!0):(d(),I("div",{key:0,class:p(e(t).e("line"))},[l("i",{class:p(e(t).e("line-inner")),style:X(v.value)},null,6)],2)),l("div",{class:p([e(t).e("icon"),e(t).is(s.icon||s.$slots.icon?"icon":"text")])},[R(s.$slots,"icon",{},()=>[s.icon?(d(),V(e(z),{key:0,class:p(e(t).e("icon-inner"))},{default:i(()=>[(d(),V(oe(s.icon)))]),_:1},8,["class"])):e(a)==="success"?(d(),V(e(z),{key:1,class:p([e(t).e("icon-inner"),e(t).is("status")])},{default:i(()=>[n(e(ae))]),_:1},8,["class"])):e(a)==="error"?(d(),V(e(z),{key:2,class:p([e(t).e("icon-inner"),e(t).is("status")])},{default:i(()=>[n(e(ne))]),_:1},8,["class"])):e(f)?B("v-if",!0):(d(),I("div",{key:3,class:p(e(t).e("icon-inner"))},U(u.value+1),3))])],2)],2),B(" title & description "),l("div",{class:p(e(t).e("main"))},[l("div",{class:p([e(t).e("title"),e(t).is(e(a))])},[R(s.$slots,"title",{},()=>[g(U(s.title),1)])],2),e(f)?(d(),I("div",{key:0,class:p(e(t).e("arrow"))},null,2)):(d(),I("div",{key:1,class:p([e(t).e("description"),e(t).is(e(a))])},[R(s.$slots,"description",{},()=>[g(U(s.description),1)])],2))],2)],6))}});var Y=L(Be,[["__file","item.vue"]]);const Ve=re($e,{Step:Y}),Pe=ie(Y),h=m=>(ce("data-v-edfe43bf"),m=m(),de(),m),Re=h(()=>l("div",null,null,-1)),ze=h(()=>l("dt",null,"一、请按最新的数据模版格式导入最新的数据",-1)),De=h(()=>l("dt",null,"二、请选择数据重复时的处理方式",-1)),We=h(()=>l("dt",null,"三、上传需要导入的Xls 文件",-1)),Fe=h(()=>l("p",null,"1.模板中的表头名称不可更改，表头不能删除。",-1)),Me=h(()=>l("p",null,"2.数据必填字段必须录入",-1)),Te=h(()=>l("p",null,"3.相应数据必须填写所有人",-1)),Ue=h(()=>l("p",null,"4.每次导入最大条数100000，导入文件大小最大20Mb",-1)),qe=h(()=>l("p",null,"5.客户查重规则：【客户姓名】重复 客户：客户名称 or 客户：邮箱 or 客户：手 机",-1)),Ge=h(()=>l("div",{style:{"text-align":"center"}},null,-1)),Oe=N({__name:"CluesImport",setup(m){const w=ue();E(0),E([]);const t=E(1),u=E(!1),v=E(null),y=r=>r.size/1024/1024>20?(P.error("文件大小不能超过 20MB!"),!1):!0,o=r=>{u.value=!0;let a=new FormData;return a.append("file",r.file),a.append("type",t.value),new Promise((C,S)=>{ye(a).then(c=>{c.code===0?(P.success("上传成功"),C(c.data),w.back()):(S(c),P.error("上传失败"),v.value.clearFiles()),u.value=!1}).catch(c=>{S(c),P.error("上传失败"),v.value.clearFiles(),u.value=!1})})};return(r,a)=>{const C=Pe,S=Ve,c=he,f=Ee,b=fe,x=_e,k=ve,D=pe("WarningFilled"),W=z,F=me;return d(),I("div",null,[Re,l("div",null,[n(c,{md:{span:12,offset:6},style:{"margin-bottom":"20px"}},{default:i(()=>[n(S,{style:{width:"100%"},active:2,"align-center":""},{default:i(()=>[n(C,{title:"上传文件"}),n(C,{title:"导入数据"}),n(C,{title:"导入结果"})]),_:1})]),_:1}),n(F,null,{default:i(()=>[n(c,{span:12,class:"l"},{default:i(()=>[l("dl",null,[ze,l("dd",null,[n(f,{type:"primary",onClick:a[0]||(a[0]=()=>{r.window.open("https://crm-test-1256699835.cos.ap-shanghai.myqcloud.com/importTemplate/clue.xlsx","_self")})},{default:i(()=>[g("下载数据模板")]),_:1})])]),l("dl",null,[De,l("dd",null,[n(x,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=M=>t.value=M)},{default:i(()=>[n(b,{label:"忽略",value:1,style:{width:"100%"}},{default:i(()=>[g("导入新数据，跳过重复数据")]),_:1}),n(b,{label:"覆盖",value:2,style:{width:"100%"}},{default:i(()=>[g("去重")]),_:1}),n(b,{label:"新增",value:3,style:{width:"100%"}},{default:i(()=>[g("覆盖数据库已存在的数据")]),_:1})]),_:1},8,["modelValue"])])]),l("dl",null,[We,l("dd",null,[n(k,{ref_key:"uploadRef",ref:v,"before-upload":y,"http-request":o,type:"drag",accept:".xls,.xlsx"},{default:i(()=>[n(f,{size:"small",type:"primary"},{default:i(()=>[g("上传文件")]),_:1})]),_:1},512)])])]),_:1}),n(c,{span:12,class:"r"},{default:i(()=>[l("p",null,[n(W,null,{default:i(()=>[n(D)]),_:1}),g("注意事项")]),Fe,Me,Te,Ue,qe]),_:1})]),_:1}),Ge])])}}}),pt=we(Oe,[["__scopeId","data-v-edfe43bf"]]);export{pt as default};
