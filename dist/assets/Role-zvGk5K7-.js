import{d as U,t as o,cw as B,z as D,b as i,X as c,J as b,a1 as g,$ as n,i as u,cu as _,a7 as V,o as d,n as L,Z as k,h as R}from"./index-BIVLNmWM.js";/* empty css                       */import{a as z,E as M}from"./table-column-NNaNJM76.js";import{a as N,E as T}from"./checkbox-DfxsBUwg.js";/* empty css                */import"./popper-DkX2c3KR.js";import"./scrollbar-su-oUh5G.js";import"./tag-D90rsxW8.js";/* empty css                */import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-DosVSSW-.js";import"./_initCloneObject-Bxri3k5D.js";import"./event-BB_Ol6Sd.js";import"./isEqual-C-onn2sv.js";import"./focus-trap-D1MtqGvJ.js";const A={class:"role-main",style:{height:"100%"}},F={class:"l"},G=["onClick"],J={class:"r"},S=U({__name:"Role",setup(X){const p=o([]),v=o([]),w=o(null),t=o(""),s=o([]),x=async()=>{_.getList().then(e=>{e.code===0&&(p.value=e.data,t.value=e.data[0].id)})},m=async()=>{_.getData({roleId:t.value}).then(e=>{e.code===0&&(s.value=e.data)})};B().then(e=>{e.code===0&&(v.value=e.data)});const C=()=>{_.add({roleId:t.value,menuId:s.value}).then(e=>{e.code===0?V.success("成功"):(V.error(e.msg),m())}).catch(()=>{m()})};return D(t,()=>{m()}),x(),(e,r)=>{const h=T,f=z,E=M,y=N;return d(),i("div",A,[c("div",F,[(d(!0),i(b,null,g(p.value,a=>(d(),i("div",{class:L(["item",{active:a.id==t.value}]),onClick:l=>t.value=a.id},[c("div",null,k(a.name),1),c("p",null,k(a.desc),1)],10,G))),256))]),c("div",J,[n(y,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=a=>s.value=a),onChange:r[1]||(r[1]=()=>{C()})},{default:u(()=>[n(E,{ref_key:"tableRef",ref:w,data:v.value,border:"","table-layout":"fixed",height:"100%","header-row-class-name":"s-table-header"},{default:u(()=>[n(f,{prop:"",label:"一级模块","min-width":"150"},{default:u(a=>[n(h,{label:a.row.meta.title,value:a.row.id,modelValue:a.row.id,"onUpdate:modelValue":l=>a.row.id=l},null,8,["label","value","modelValue","onUpdate:modelValue"])]),_:1}),n(f,{label:"二级模块","min-width":"400"},{default:u(a=>[(d(!0),i(b,null,g(a.row.child,l=>(d(),R(h,{key:l.id,label:l.meta.title,value:l.id,modelValue:l.id,"onUpdate:modelValue":I=>l.id=I},null,8,["label","value","modelValue","onUpdate:modelValue"]))),128))]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])])])}}}),ne=$(S,[["__scopeId","data-v-f75bee45"]]);export{ne as default};
