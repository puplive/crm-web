import{d as P,s as z,l as n,b as B,O as c,R as e,i as o,F as R,o as y,P as r,Q as s,h as N,a3 as $}from"./index-CPd53YJm.js";import{E as D}from"./el-pagination-BVBni0kF.js";/* empty css                 */import"./el-tag-4XVZG8u1.js";import"./el-select-CsT7yhcJ.js";import"./el-scrollbar-1c1V32d6.js";import"./el-popper-Z8FMDo4n.js";import{E as F,a as V}from"./el-table-column-neR8MDNf.js";import"./el-checkbox-DV8ZyRUK.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{E as U}from"./el-image-viewer-QGvEqMA1.js";import{T as L}from"./index-Htz41kLY.js";import{_ as M,a as A,b as O}from"./Invoicing.vue_vue_type_script_setup_true_lang-BQB-svLO.js";import{a as g}from"./index-DpdTHjpP.js";/* empty css                   *//* empty css                       *//* empty css                   */import{E as Q}from"./index-DHc0nL9j.js";import{c as x}from"./request-CZERRv83.js";import{E as j}from"./index-zsfKiaoN.js";import"./isEqual-DSJ1SFRG.js";import"./_initCloneObject-DESEKFUl.js";import"./use-form-item-DK99g8e-.js";import"./index-DqIbAHRQ.js";import"./event-BB_Ol6Sd.js";import"./scroll-BaeB2meK.js";import"./castArray-CmVl9lkf.js";import"./el-form-item-CQWIk3V_.js";import"./_baseClone-zQaojIJP.js";import"./tool-BQQRKqby.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./el-progress-Ccg9MOyd.js";import"./cloneDeep-DE1XEM52.js";import"./index-Ce77vkKA.js";import"./el-dialog-DHcnm50E.js";import"./index-B7T3DOQ_.js";import"./vnode-BgdbEVc8.js";import"./refs-D-OoDOeF.js";/* empty css                       */import"./el-radio-DCiSKInc.js";import"./aria-KgdLjl5h.js";import"./validator-Btbr0wBy.js";const q={class:"s-flex-col",style:{height:"100%"}},G=c("div",null,null,-1),H={class:"s-flex-auto",style:{"min-height":"0"}},J={class:"s-table-pagination"},Me=P({__name:"Invoices",setup(K){const m=z({page:1,perPage:10}),h=n(0),f=n({}),w=n([]),k=n(null),_=n([]),C=a=>{f.value=a,m.page=1,l()},l=async()=>{g.invoice.getList({...f.value,...m}).then(a=>{a.code===0&&(w.value=a.data.data,h.value=a.data.total)})},T=a=>{Q.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{g.invoice.del({id:a}).then(p=>{p.code===0?(x.success("删除成功"),l()):x.error(p.msg)})}).catch(()=>{})};g.invoice.getSearchField().then(a=>{a.code===0&&(_.value=a.data)});const v=n(null),b=n(null);return l(),(a,p)=>{const i=V,d=U,u=j,E=F,I=D;return y(),B(R,null,[c("div",q,[G,e(L,{data:_.value,onSearch:C,type:"invoice"},null,8,["data"]),c("div",H,[e(E,{ref_key:"tableRef",ref:k,data:w.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:o(()=>[e(i,{prop:"orderCode",label:"订单编号",width:"180"}),e(i,{prop:"companyName",label:"企业名称","min-width":"120"}),e(i,{prop:"hallCode",label:"展馆号"}),e(i,{prop:"positionCode",label:"展位号"}),e(i,{prop:"positionType",label:"展位类型","min-width":"120"},{default:o(t=>[r(s({1:"标准",2:"特装"}[t.row.positionType]),1)]),_:1}),e(i,{prop:"positionArea",label:"面积"}),e(i,{prop:"positionUnitPrice",label:"展位单价","min-width":"120"}),e(i,{prop:"orderPrice",label:"订单金额","min-width":"120"}),e(i,{prop:"payType",label:"付款方式","min-width":"120"},{default:o(t=>[r(s({1:"全款",2:"分期"}[t.row.payType]),1)]),_:1}),e(i,{prop:"payStatus",label:"付款状态","min-width":"120"},{default:o(t=>[r(s({0:"未付款",1:"部分付款",2:"已付款"}[t.row.payStatus]),1)]),_:1}),e(i,{prop:"orderStatus",label:"订单状态","min-width":"120"},{default:o(t=>[r(s({0:"已撤销",1:"已完成"}[t.row.orderStatus]),1)]),_:1}),e(i,{prop:"orderType",label:"订单类型","min-width":"120"},{default:o(t=>[r(s({1:"代下单",2:"展商下单"}[t.row.orderType]),1)]),_:1}),e(i,{prop:"payCode",label:"录款编号","min-width":"120"}),e(i,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:o(t=>[r(s({1:"电子专票",2:"电子普票"}[t.row.invoiceType]),1)]),_:1}),e(i,{prop:"invoiceTitle",label:"发票抬头","min-width":"120"}),e(i,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),e(i,{prop:"contact",label:"联系人"}),e(i,{prop:"phone",label:"手机号"}),e(i,{prop:"email",label:"邮箱"}),e(i,{prop:"invoicePrice",label:"开票金额","min-width":"120"}),e(i,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:o(t=>[r(s({1:"待开票",2:"已开票"}[t.row.invoiceStatus]),1)]),_:1}),e(i,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:o(t=>[e(d,{style:{width:"30px",height:"30px","margin-right":"5px"},src:t.row.payImg,fit:"contain","preview-src-list":[t.row.payImg],"preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])]),_:1}),e(i,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:o(t=>[e(d,{style:{width:"30px",height:"30px","margin-right":"5px"},src:t.row.receiveImg,fit:"contain","preview-src-list":[t.row.receiveImg],"preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])]),_:1}),e(i,{prop:"invoiceImg",label:"发票附件","min-width":"120"},{default:o(t=>[e(d,{style:{width:"30px",height:"30px","margin-right":"5px"},src:t.row.invoiceImg,fit:"contain","preview-src-list":[t.row.invoiceImg],"preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])]),_:1}),e(i,{fixed:"right",label:"操作",width:"250"},{default:o(t=>[t.row.invoiceStatus===1?(y(),N(u,{key:0,link:"",type:"primary",onClick:()=>v.value.openInvoiceSet(t.row),style:{"margin-right":"5px"}},{default:o(()=>[r("开票")]),_:2},1032,["onClick"])):$("",!0),e(M,{id:t.row.id,onCallback:l},null,8,["id"]),e(u,{link:"",type:"primary",onClick:S=>b.value.setEdit(t.row)},{default:o(()=>[r("编辑")]),_:2},1032,["onClick"]),e(u,{link:"",type:"danger",onClick:S=>T([t.row.id])},{default:o(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),c("div",J,[e(I,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:h.value,"current-page":m.page,"onUpdate:currentPage":p[0]||(p[0]=t=>m.page=t),"page-size":m.perPage,"onUpdate:pageSize":p[1]||(p[1]=t=>m.perPage=t),onChange:l},null,8,["total","current-page","page-size"])])]),e(A,{ref_key:"editInvoiceRef",ref:b,onCallback:l},null,512),e(O,{ref_key:"invoicingRef",ref:v,onCallback:l},null,512)],64)}}});export{Me as default};
