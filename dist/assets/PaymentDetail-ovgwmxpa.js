import{d as V,t as f,b as w,X as l,$ as t,i as o,Z as d,J as b,a5 as q,am as z,o as c,Y as a,h as v,ak as h,a2 as M,a3 as F,a7 as _}from"./index-B35sW-aj.js";import{E as J,a as X}from"./table-column-mknPiwPB.js";import"./checkbox-sIbdl2aD.js";/* empty css                */import"./popper-BBb83dzG.js";import"./scrollbar-C2oBSu3r.js";import{E as Y}from"./image-viewer-CkmEEaUG.js";import"./tag-B1SDh5lN.js";import{E as Z}from"./button-DjNKuFKs.js";import{a as k}from"./index-DpXsc4n5.js";import{_ as j,a as G,b as H}from"./Invoicing.vue_vue_type_script_setup_true_lang-B0PY48yO.js";import{_ as K}from"./EditPayment.vue_vue_type_script_setup_true_lang-DQn6APOd.js";import{_ as L}from"./ApplyInvoice.vue_vue_type_script_setup_true_lang-ByeYocaR.js";/* empty css                    *//* empty css              *//* empty css                *//* empty css                */import{E as g}from"./index-CzKNpI4K.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-CR1DnBFV.js";import"./_initCloneObject-B44hSgFU.js";import"./event-BB_Ol6Sd.js";import"./isEqual-B_2UcdhL.js";import"./focus-trap-Dbp5ay4M.js";import"./index-DDqT4Lzm.js";import"./scroll-uWFJ1g_Z.js";import"./progress-CzhHM6KK.js";import"./cloneDeep-CvjT8hwH.js";import"./_baseClone-CZF_EFSh.js";import"./index-YbMG68iY.js";import"./dialog-CRgsqKr4.js";import"./index-BEXrfPKK.js";import"./vnode-dFQMTDjO.js";import"./refs-DSS_LDrZ.js";import"./form-item-BFhIrQ1a.js";import"./castArray-Dn1cwXOK.js";/* empty css                    */import"./radio-QjKCIhLE.js";import"./row-C5-hOjIJ.js";import"./col-NQRvj_js.js";import"./date-picker-CjEmr5Q3.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./arrays-6TrVLtTe.js";import"./index-DL9kizoD.js";import"./select-BlcfRgt6.js";import"./rules-F8IXRWD9.js";import"./aria-KgdLjl5h.js";import"./validator-Rz5Tf5Yh.js";const C=y=>(M("data-v-82f98a4f"),y=y(),F(),y),Q={class:"recording"},U={class:"top"},W=C(()=>l("span",{style:{"margin-right":"20px"}},"订单到款记录",-1)),ee={class:"p2"},te=C(()=>l("div",{class:"title"},"收款记录",-1)),ie={class:"table"},oe=C(()=>l("div",{class:"title"},"发票详情",-1)),ae={class:"table"},le={key:0},re=V({__name:"PaymentDetail",setup(y){const S=q(),R=z(),P=f(Number(R.query.id)),s=f({invoice:[]}),m=()=>{k.payment.getDetail({id:P.value}).then(r=>{r.code===0&&(s.value=r.data)})},D=r=>{g.confirm("确定撤销？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{k.payment.revoke({id:r}).then(n=>{n.code===0?(_.success("撤销成功"),m()):_.error(n.msg)})}).catch(()=>{})},N=r=>{g.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{k.payment.del({id:r}).then(n=>{n.code===0?(_.success("删除成功"),S.back()):_.error(n.msg)})}).catch(()=>{})},A=r=>{g.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{k.invoice.del({id:r}).then(n=>{n.code===0?(_.success("删除成功"),m()):_.error(n.msg)})}).catch(()=>{})},I=f(null),x=f(null),T=f(null),$=f(null);return m(),(r,n)=>{const p=Z,i=X,E=Y,B=J;return c(),w(b,null,[l("div",Q,[l("div",U,[W,t(p,{onClick:r.$router.back},{default:o(()=>[a("返回")]),_:1},8,["onClick"])]),l("div",ee,[t(p,{link:"",type:"primary",onClick:n[0]||(n[0]=e=>r.$router.push({name:"ContractDetail",query:{orderId:s.value.orderId}}))},{default:o(()=>[a("查看合同")]),_:1}),l("span",null,"订单编号："+d(s.value.orderCode),1),l("span",null,"展位号："+d(s.value.positionCode),1),l("span",null,"面积："+d(s.value.positionArea)+"平方米",1),l("span",null,"展位数："+d(s.value.positionNum)+"个",1),l("span",null,"订单金额："+d(s.value.orderPrice)+"元",1)]),l("div",null,[te,l("div",ie,[t(B,{data:[s.value],border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:o(()=>[t(i,{prop:"code",label:"录款编号","min-width":"120"}),t(i,{prop:"payCompany",label:"付款公司","min-width":"120"}),t(i,{prop:"payType",label:"到款类型","min-width":"120"},{default:o(e=>[a(d({1:"预定金",2:"首款",3:"二次款",4:"尾款",5:"转款"}[e.row.payType]),1)]),_:1}),t(i,{prop:"payPrice",label:"到款金额","min-width":"120"}),t(i,{prop:"payTime",label:"到款时间","min-width":"120"}),t(i,{prop:"receiveAccount",label:"收款账户","min-width":"120"}),t(i,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:o(e=>[e.row.payImg?(c(),v(E,{key:0,style:{width:"30px",height:"30px"},src:e.row.payImg,"preview-src-list":[e.row.payImg],fit:"contain","preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])):h("",!0)]),_:1}),t(i,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:o(e=>[e.row.receiveImg?(c(),v(E,{key:0,style:{width:"30px",height:"30px"},src:e.row.receiveImg,"preview-src-list":[e.row.receiveImg],fit:"contain","preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])):h("",!0)]),_:1}),t(i,{prop:"invoiceStatus",label:"发票状态","min-width":"120"},{default:o(e=>[a(d({0:"未申请",1:"待开票",2:"已开票"}[e.row.invoiceStatus]),1)]),_:1}),t(i,{prop:"remark",label:"备注"}),t(i,{fixed:"right",label:"操作",width:"200"},{default:o(e=>[e.row.status===0?(c(),w(b,{key:0},[t(p,{link:"",type:"",disabled:""},{default:o(()=>[a("已撤销")]),_:1}),t(p,{link:"",type:"danger",onClick:u=>N(e.row.id)},{default:o(()=>[a("删除")]),_:2},1032,["onClick"])],64)):(c(),w(b,{key:1},[t(p,{link:"",type:"primary",onClick:()=>{let u={...e.row,account:e.row.receiveAccount};x.value.setEdit(u)}},{default:o(()=>[a("编辑")]),_:2},1032,["onClick"]),e.row.invoiceStatus===0?(c(),v(p,{key:0,link:"",type:"primary",onClick:u=>$.value.setApply(e.row)},{default:o(()=>[a("申请发票")]),_:2},1032,["onClick"])):h("",!0),t(p,{link:"",type:"danger",onClick:u=>D(e.row.id)},{default:o(()=>[a("撤销")]),_:2},1032,["onClick"])],64))]),_:1})]),_:1},8,["data"])]),oe,l("div",ae,[t(B,{data:s.value.invoice?[s.value.invoice]:[],border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:o(()=>[t(i,{prop:"code",label:"编号"}),t(i,{prop:"invoiceTitle",label:"发票抬头","min-width":"120"}),t(i,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),t(i,{prop:"invoicePrice",label:"开票金额","min-width":"120"}),t(i,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:o(e=>[a(d({1:"电子专票",2:"电子普票"}[e.row.invoiceType]),1)]),_:1}),t(i,{prop:"contact",label:"联系人"}),t(i,{prop:"email",label:"发送邮箱","min-width":"120"}),t(i,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:o(e=>[a(d({1:"待开票",2:"已开票"}[e.row.invoiceStatus]),1)]),_:1}),t(i,{prop:"invoiceCode",label:"发票号"}),t(i,{prop:"remark",label:"备注"}),t(i,{fixed:"right",label:"操作",width:"250"},{default:o(e=>[e.row.invoiceStatus===1?(c(),v(p,{key:0,disabled:e.row.status===0,link:"",type:e.row.status===0?"":"primary",onClick:()=>T.value.openInvoiceSet(e.row)},{default:o(()=>[a("开票")]),_:2},1032,["disabled","type","onClick"])):h("",!0),t(p,{disabled:e.row.status===0,link:"",type:e.row.status===0?"":"primary"},{default:o(()=>[e.row.status===0?(c(),w("span",le,"上传发票")):(c(),v(j,{key:1,id:e.row.id,onCallback:m},null,8,["id"]))]),_:2},1032,["disabled","type"]),t(p,{disabled:e.row.status===0,link:"",type:e.row.status===0?"":"primary",onClick:u=>I.value.setEdit(e.row)},{default:o(()=>[a("编辑")]),_:2},1032,["disabled","type","onClick"]),t(p,{link:"",type:"danger",onClick:u=>A(e.row.id)},{default:o(()=>[a("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])]),t(G,{ref_key:"editInvoiceRef",ref:I,onCallback:m},null,512),t(K,{ref_key:"editPaymentRef",ref:x,onCallback:m},null,512),t(H,{ref_key:"invoicingRef",ref:T,onCallback:m},null,512),t(L,{ref_key:"applyInvoiceRef",ref:$,onCallback:m},null,512)],64)}}}),tt=O(re,[["__scopeId","data-v-82f98a4f"]]);export{tt as default};
