import{d as N,t as G,y as z,b as y,X as s,$ as e,i as l,a5 as J,am as O,W,o as v,Y as d,J as F,a1 as X,aF as C,h as j,a2 as A,a3 as H,a7 as x,G as K}from"./index-B6iLQo86.js";import{E as Q,a as Z}from"./form-item-C2ENUIsg.js";import{E as ee}from"./row-4NcIboZP.js";import{E as le}from"./col-BeAkWYT4.js";import{E as oe}from"./progress-D3O32-FO.js";import{E as ae}from"./image-viewer-I6UEkrPO.js";import{E as te}from"./date-picker-CZeacn2L.js";/* empty css              */import"./scrollbar-CxomNflS.js";import"./popper-gYmmCBAL.js";import{E as de}from"./button-5AEbNLUW.js";import"./tag-CrxgzzqE.js";import{E as ne,a as se}from"./select-CiM7jlhw.js";/* empty css                    */import{E as ue,a as re}from"./radio-D8XVkGfS.js";import{p as ie}from"./index-jkrVVJAI.js";import{u as pe}from"./index-Co9xmp72.js";/* empty css                */import{E as ce}from"./index-Cl7FP3t8.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-CfnmRR4I.js";import"./castArray-Dr2SrWm_.js";import"./_baseClone-BrWLt5Gy.js";import"./_initCloneObject-qAExOYFR.js";import"./cloneDeep-L0YKcdce.js";import"./isEqual-Hfk1WuHp.js";import"./scroll-93LZPfoz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./arrays-6TrVLtTe.js";import"./index-C_fEy9gr.js";import"./focus-trap-CbOJCEa5.js";import"./event-BB_Ol6Sd.js";const R=V=>(A("data-v-9eaa9306"),V=V(),H(),V),_e={class:"recording"},fe={class:"top"},ve=R(()=>s("span",{style:{"margin-right":"20px"}},"录入到款信息",-1)),Ve=R(()=>s("div",{class:"s-flex-auto"},null,-1)),ye={style:{"margin-bottom":"10px"}},ge={style:{"text-align":"center"}},be={class:"image-slot"},he={style:{"text-align":"center"}},Ue={class:"image-slot"},Ee={style:{"text-align":"center"}},ke={class:"image-slot"},Ie={style:{"text-align":"center","margin-top":"30px"}},we=N({__name:"Recording",setup(V){const B=J(),P=O(),g=G(Number(P.query.id)),c=z([{orderId:g,orderType:1,payImg:"",receiveImg:"",invoice:{img:"",type:1,status:1}}]),$=()=>{c.push({orderId:g,orderType:1,payImg:"",receiveImg:"",invoice:{img:"",type:1,status:1}})},b=r=>r.size/1024/1024>3?(x.error("文件大小不能超过 3MB!"),!1):!0,h=r=>{let i=new FormData;return i.append("upload",r.file),new Promise((n,p)=>{pe(i).then(m=>{m.code===0?n(m.data):p(m)})})},q=r=>{ie.add(c[r]).then(i=>{i.code===0?(x.success("保存成功"),c[r].isSub=!0,c.some(n=>n.isSub!==!0)||setTimeout(()=>{B.back()},2e3)):x.error(i.msg)})};return(r,i)=>{const n=de,p=ue,m=re,t=Z,u=ce,f=ne,Y=se,L=te,U=W("Picture"),E=K,k=ae,I=oe,_=le,T=ee,M=Q;return v(),y("div",_e,[s("div",fe,[ve,e(n,{onClick:r.$router.back},{default:l(()=>[d("返回")]),_:1},8,["onClick"]),Ve,e(n,{type:"primary",onClick:$},{default:l(()=>[d("添加明细")]),_:1})]),s("div",ye,[e(n,{link:"",type:"primary",onClick:i[0]||(i[0]=o=>r.$router.push({name:"ContractDetail",query:{orderId:g.value}}))},{default:l(()=>[d("查看合同")]),_:1})]),s("div",null,[e(M,{data:c,"label-width":"auto","label-position":"left"},{default:l(()=>[(v(!0),y(F,null,X(c,(o,w)=>(v(),y("div",{key:w,class:"item"},[e(T,{gutter:20},{default:l(()=>[e(_,{md:12},{default:l(()=>[e(t,{label:"订单类型"},{default:l(()=>[e(m,{modelValue:o.orderType,"onUpdate:modelValue":a=>o.orderType=a},{default:l(()=>[e(p,{value:1},{default:l(()=>[d("展位")]),_:1}),e(p,{value:2},{default:l(()=>[d("物料")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"付款公司"},{default:l(()=>[e(u,{modelValue:o.payCompany,"onUpdate:modelValue":a=>o.payCompany=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"到款类型"},{default:l(()=>[e(Y,{modelValue:o.payType,"onUpdate:modelValue":a=>o.payType=a},{default:l(()=>[e(f,{label:"预定金",value:1}),e(f,{label:"首款",value:2}),e(f,{label:"二次款",value:3}),e(f,{label:"尾款",value:4}),e(f,{label:"转款",value:5})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"到款金额"},{default:l(()=>[e(u,{modelValue:o.payPrice,"onUpdate:modelValue":a=>o.payPrice=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"到款时间"},{default:l(()=>[e(L,{modelValue:o.payTime,"onUpdate:modelValue":a=>o.payTime=a,type:"date","value-format":"YYYY-MM-DD",placeholder:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"收款账户"},{default:l(()=>[e(u,{modelValue:o.account,"onUpdate:modelValue":a=>o.account=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(T,null,{default:l(()=>[e(_,{span:12},{default:l(()=>[e(t,{label:"付款凭证"},{default:l(()=>[s("div",ge,[e(k,{src:o.payImg,"preview-src-list":[o.payImg],fit:"contain",style:{width:"100px",height:"100px"}},C({_:2},[o.payImg===""?{name:"error",fn:l(()=>[s("div",be,[e(E,null,{default:l(()=>[e(U)]),_:1})])]),key:"0"}:void 0]),1032,["src","preview-src-list"]),e(I,{class:"","show-file-list":!1,"on-success":(a,D,S)=>{o.payImg=a.url},"before-upload":b,"http-request":h,accept:"image/*"},{default:l(()=>[e(n,{type:"primary"},{default:l(()=>[d("上传文件")]),_:1})]),_:2},1032,["on-success"])])]),_:2},1024)]),_:2},1024),e(_,{span:12},{default:l(()=>[e(t,{label:"到款凭证"},{default:l(()=>[s("div",he,[e(k,{src:o.receiveImg,"preview-src-list":[o.receiveImg],fit:"contain",style:{width:"100px",height:"100px"}},C({_:2},[o.receiveImg===""?{name:"error",fn:l(()=>[s("div",Ue,[e(E,null,{default:l(()=>[e(U)]),_:1})])]),key:"0"}:void 0]),1032,["src","preview-src-list"]),e(I,{class:"","show-file-list":!1,"on-success":(a,D,S)=>{o.receiveImg=a.url},"before-upload":b,"http-request":h,accept:"image/*"},{default:l(()=>[e(n,{type:"primary"},{default:l(()=>[d("上传文件")]),_:1})]),_:2},1032,["on-success"])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(_,{md:12},{default:l(()=>[e(t,{label:"发票抬头"},{default:l(()=>[e(u,{modelValue:o.invoice.title,"onUpdate:modelValue":a=>o.invoice.title=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"社会信用代码"},{default:l(()=>[e(u,{modelValue:o.invoice.socialCode,"onUpdate:modelValue":a=>o.invoice.socialCode=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"联系人"},{default:l(()=>[e(u,{modelValue:o.invoice.contact,"onUpdate:modelValue":a=>o.invoice.contact=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"手机号"},{default:l(()=>[e(u,{modelValue:o.invoice.phone,"onUpdate:modelValue":a=>o.invoice.phone=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"发送邮箱"},{default:l(()=>[e(u,{modelValue:o.invoice.email,"onUpdate:modelValue":a=>o.invoice.email=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"发票类型"},{default:l(()=>[e(m,{modelValue:o.invoice.type,"onUpdate:modelValue":a=>o.invoice.type=a},{default:l(()=>[e(p,{value:1},{default:l(()=>[d("电子专票")]),_:1}),e(p,{value:2},{default:l(()=>[d("电子普票")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"开票状态"},{default:l(()=>[e(m,{modelValue:o.invoice.status,"onUpdate:modelValue":a=>o.invoice.status=a},{default:l(()=>[e(p,{value:1},{default:l(()=>[d("待开票")]),_:1}),e(p,{value:2},{default:l(()=>[d("已开票")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"发票号"},{default:l(()=>[e(u,{modelValue:o.invoice.invoiceCode,"onUpdate:modelValue":a=>o.invoice.invoiceCode=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"发票附件"},{default:l(()=>[s("div",Ee,[e(k,{src:o.invoice.img,"preview-src-list":[o.invoice.img],fit:"contain",style:{width:"100px",height:"100px"}},C({_:2},[o.invoice.img===""?{name:"error",fn:l(()=>[s("div",ke,[e(E,null,{default:l(()=>[e(U)]),_:1})])]),key:"0"}:void 0]),1032,["src","preview-src-list"]),e(I,{class:"","show-file-list":!1,"on-success":(a,D,S)=>{o.invoice.img=a.url},"before-upload":b,"http-request":h},{default:l(()=>[e(n,{type:"primary"},{default:l(()=>[d("上传文件")]),_:1})]),_:2},1032,["on-success"])])]),_:2},1024)]),_:2},1024),e(_,{span:24},{default:l(()=>[e(t,{label:"备注"},{default:l(()=>[e(u,{type:"textarea",modelValue:o.remark,"onUpdate:modelValue":a=>o.remark=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(_,{span:24},{default:l(()=>[s("div",Ie,[o.isSub?(v(),j(n,{key:0,type:"primary",disabled:""},{default:l(()=>[d("已提交")]),_:1})):(v(),y(F,{key:1},[e(n,{type:"primary",onClick:a=>q(w)},{default:l(()=>[d("保存")]),_:2},1032,["onClick"]),e(n,{onClick:a=>c.splice(w,1)},{default:l(()=>[d("取消")]),_:2},1032,["onClick"])],64))])]),_:2},1024)]),_:2},1024)]))),128))]),_:1},8,["data"])])])}}}),dl=me(we,[["__scopeId","data-v-9eaa9306"]]);export{dl as default};
