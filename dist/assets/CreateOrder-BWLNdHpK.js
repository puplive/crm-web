import{d as U,l as B,e as k,o as f,f as h,P as t,R as d,a as J,F as T,V as w,S as e,w as r,Q as u,Z as I,a8 as R,_ as F,$ as q}from"./index-BcUC0sDV.js";import{E as j}from"./el-button-VGFtfg9t.js";import{E as D,a as G}from"./el-radio-CAJOd0xn.js";import{E as L}from"./el-input-CcUaxfjM.js";import{E as M,a as Q}from"./el-table-o6ZnMJ6q.js";import"./el-checkbox-C88Dzrkj.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-CPGzXslm.js";/* empty css                        */import"./el-tag-C8ilQtop.js";import{b as Z}from"./index-DHg2I1DM.js";import{E}from"./request-LfwzVzzV.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-tw6LFjf8.js";import"./index-31U4gXR_.js";import"./typescript-BxLz-5vR.js";import"./_initCloneObject-D14UNdyY.js";import"./isArrayLikeObject-7jkHxvsY.js";import"./isEqual-DmOeXhXa.js";const i=_=>(F("data-v-a252b3fa"),_=_(),q(),_),z={class:"create-order"},A={class:"p1"},H=i(()=>t("div",{class:"p2"},"展位清单",-1)),K={class:"p3"},W={class:"p4"},X=i(()=>t("span",null,"预定金",-1)),Y=i(()=>t("span",null,"元",-1)),ee=i(()=>t("span",{style:{margin:"0 10px 0 40px"}},"是否冲抵展位费",-1)),ae=i(()=>t("span",{style:{"margin-left":"10px"}},"%",-1)),oe={style:{"text-align":"center",padding:"20px"}},te=U({__name:"CreateOrder",setup(_){const g=I(),b=R(),c=B({});c.value=JSON.parse(b.query.data),console.log(c.value);const O={1:"%",2:"￥"},y=a=>{let s=[];return a.forEach(l=>{let p=JSON.parse(l);s.push(p.price+O[p.unit])}),s.join("，")},S=k(()=>a=>{let s=a.finalPrice;return a.isOffset===1&&(s=s-a.deposit),a.payType===2&&(s=s*a.ratio/100),Number(s.toFixed(2))}),N=()=>{let a=JSON.parse(JSON.stringify(c.value)),s=a.add.map(p=>JSON.parse(p)),l=a.discount.map(p=>JSON.parse(p));a.add=s,a.discount=l,Z.create(a).then(p=>{p.code===0?(E.success("提交成功"),g.push({name:"OrderBooth"})):E.error(p.msg)})},C=()=>{};return(a,s)=>{const l=M,p=Q,v=L,m=D,V=G,x=j;return f(),h("div",z,[t("div",A,d(J(b).query.exhibitionName),1),H,(f(!0),h(T,null,w(c.value.position,(o,P)=>(f(),h("div",{key:P,class:"item"},[e(p,{data:[o],border:""},{default:r(()=>[e(l,{prop:"name",label:"企业名称"}),e(l,{prop:"companyBrand",label:"参展品牌"}),e(l,{prop:"hallCode",label:"展馆号"}),e(l,{prop:"positionCode",label:"展位号"}),e(l,{prop:"product",label:"产品名称"}),e(l,{prop:"unitPrice",label:"单价"}),e(l,{prop:"area",label:"面积"}),e(l,{prop:"discount",label:"折扣"},{default:r(n=>[u(d(y(c.value.discount)),1)]),_:1}),e(l,{prop:"add",label:"加收"},{default:r(n=>[u(d(y(c.value.add)),1)]),_:1})]),_:2},1032,["data"]),t("div",K,[t("span",null,"订单原价："+d(o.costPrice),1),t("span",null,"最终金额："+d(o.finalPrice),1),t("span",null,"待支付金额："+d(S.value(o)),1),t("span",null,"优惠金额："+d(o.discountPrice),1),t("span",null,"加收金额："+d(o.addPrice),1)]),t("div",W,[X,e(v,{modelValue:o.deposit,"onUpdate:modelValue":n=>o.deposit=n,placeholder:"请输入金额",style:{width:"120px",margin:"0 10px 0 10px"}},null,8,["modelValue","onUpdate:modelValue"]),Y,ee,e(V,{modelValue:o.isOffset,"onUpdate:modelValue":n=>o.isOffset=n},{default:r(()=>[e(m,{value:1},{default:r(()=>[u("是")]),_:1}),e(m,{value:2},{default:r(()=>[u("否")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(V,{modelValue:o.payType,"onUpdate:modelValue":n=>o.payType=n,style:{margin:"0 10px 0 40px"}},{default:r(()=>[e(m,{value:1},{default:r(()=>[u("全款")]),_:1}),e(m,{value:2},{default:r(()=>[u("分期")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(v,{modelValue:o.ratio,"onUpdate:modelValue":n=>o.ratio=n,placeholder:"分期比例",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),ae])]))),128)),t("div",oe,[e(x,{type:"primary",onClick:N},{default:r(()=>[u("提交订单")]),_:1}),e(x,{type:"",onClick:C},{default:r(()=>[u("返回")]),_:1})])])}}}),ge=$(te,[["__scopeId","data-v-a252b3fa"]]);export{ge as default};
