import{d as O,t as S,z as P,y as X,c as Y,B as Z,b as m,$ as r,i as a,o,J as b,a1 as k,h as i,Y as f,Z as T,X as q,e as x,v as H,ak as E,cg as K,G as Q}from"./index-B6iLQo86.js";import{E as R,a as W}from"./form-item-C2ENUIsg.js";/* empty css              */import"./tag-CrxgzzqE.js";import{E as ee,a as le}from"./select-CiM7jlhw.js";import"./scrollbar-CxomNflS.js";import"./popper-gYmmCBAL.js";import{E as ae}from"./button-5AEbNLUW.js";/* empty css                      */import{E as te,a as oe,b as ne}from"./index-mORRlnij.js";import{E as se}from"./index-Cl7FP3t8.js";const v={positionType:{label:"展位类型",type:3,options:[{value:1,label:"标准"},{value:2,label:"特装"}]},orderType:{label:"下单方式",type:3,options:[{value:1,label:"代下单"},{value:2,label:"展商下单"}]},orderStatus:{label:"订单状态",type:3,options:[{value:0,label:"已撤销"},{value:1,label:"已完成"}]},payType:{label:"付款类型",type:3,options:[{value:1,label:"预定金"},{value:2,label:"首款"},{value:3,label:"二次款"},{value:4,label:"尾款"},{value:5,label:"转款"}]},payStatus:{label:"付款状态",type:3,options:[{value:0,label:"未付款"},{value:1,label:"部分付款"},{value:2,label:"已付款"}]},contractStatus:{label:"合同状态",type:3,options:[{value:0,label:"未签订"},{value:1,label:"已签订"},{value:2,label:"已回执(电子)"},{value:3,label:"已回执(纸质)"}]},invoiceType:{label:"发票类型",type:3,options:[{value:1,label:"电子专票"},{value:2,label:"电子普票"}]},invoiceStatus:{label:"发票状态",type:3,options:[{value:0,label:"未申请"},{value:1,label:"待开票"},{value:2,label:"部分开票"},{value:3,label:"已开票"}]},authUser:{label:"持有人",type:3,options:[]}},re={invoiceStatus:{label:"发票状态",type:3,options:[{value:0,label:"未申请"},{value:1,label:"待开票"},{value:2,label:"已开票"}]}},F={payType:{label:"付款方式",type:3,options:[{value:1,label:"全款"},{value:2,label:"分期"}]},invoiceStatus:{label:"发票状态",type:3,options:[{value:1,label:"待开票"},{value:2,label:"已开票"}]}},he=O({__name:"index",props:{data:{},type:{}},emits:["search"],setup(U,{emit:B}){const w=S(),p=U,u=S([]);P(()=>p.data,e=>{u.value.push(e[0]),e.some(l=>l.field==="authUser")&&K.getAccount().then(l=>{l.code===0&&(v.authUser.options=l.data.map(c=>({label:c.name,value:c.name})))})});const z=()=>{for(let e=0;e<p.data.length;e++){const l=p.data[e];if(!g(l.field)){u.value.push(l);return}}},D=(e,l)=>{u.value[e]=p.data.find(c=>c.field===l)},g=e=>u.value.some(l=>l.field===e),V=B,s=X({}),I=Y(()=>e=>{if(e==="payType"){if(p.type==="invoice")return F[e].options}else if(e==="invoiceStatus"){if(p.type==="invoice")return F[e].options;if(p.type==="payment")return re[e].options}return v[e].options}),N=e=>{e&&(e.resetFields(),V("search",s))},y=()=>{V("search",s)};return Z(()=>{}),(e,l)=>{const c=Q,d=ae,M=te,A=oe,L=ne,$=ee,j=le,G=se,C=W,J=R;return o(),m("div",null,[r(J,{ref_key:"refForm",ref:w,inline:!0,model:s,class:"table-search-form","label-width":"100px","label-position":"left"},{default:a(()=>[(o(!0),m(b,null,k(u.value,(t,_)=>(o(),i(C,{key:_,prop:t.field},{label:a(()=>[r(L,{trigger:"click"},{dropdown:a(()=>[r(A,null,{default:a(()=>[(o(!0),m(b,null,k(e.data,(n,h)=>(o(),i(M,{key:h,onClick:()=>{s[t.field]="",y(),D(_,n.field)},disabled:g(n.field)},{default:a(()=>[f(T(n.text),1)]),_:2},1032,["onClick","disabled"]))),128))]),_:2},1024)]),default:a(()=>[r(d,{plain:"",style:{"border-radius":"4px 0 0 4px",width:"100px","border-right":"none","justify-content":"space-between",padding:"8px"}},{default:a(()=>[q("span",null,T(t.text),1),f(),r(c,null,{default:a(()=>[r(x(H))]),_:1})]),_:2},1024)]),_:2},1024)]),default:a(()=>[x(v)[t.field]?(o(),m(b,{key:0},[x(v)[t.field].type===3?(o(),i(j,{key:0,modelValue:s[t.field],"onUpdate:modelValue":n=>s[t.field]=n,placeholder:"请选择",clearable:"",style:{"border-radius":"0 4px 4px 0"}},{default:a(()=>[(o(!0),m(b,null,k(I.value(t.field),(n,h)=>(o(),i($,{key:h,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):E("",!0)],64)):(o(),i(G,{key:1,modelValue:s[t.field],"onUpdate:modelValue":n=>s[t.field]=n,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"])),u.value.length>1?(o(),i(d,{key:2,type:"primary",icon:"Minus",size:"small",circle:"",onClick:()=>{s[t.field]="",u.value.splice(_,1),y()},style:{"font-size":"16px","margin-left":"5px"}},null,8,["onClick"])):E("",!0)]),_:2},1032,["prop"]))),128)),r(C,null,{default:a(()=>[r(d,{type:"primary",onClick:y,icon:"Search"},{default:a(()=>[f("搜索")]),_:1}),r(d,{type:"",onClick:l[0]||(l[0]=t=>N(w.value))},{default:a(()=>[f("重置")]),_:1}),u.value.length<p.data.length?(o(),i(d,{key:0,type:"primary",icon:"Plus",size:"small",circle:"",style:{"font-size":"16px"},onClick:z})):E("",!0)]),_:1})]),_:1},8,["model"])])}}});export{he as _};
