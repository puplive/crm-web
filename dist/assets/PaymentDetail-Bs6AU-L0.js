import{d as S,l as h,s as D,o as y,h as E,i as o,O as p,R as e,P as d,b as N,Q as u,W as T,F as P,Y as R,a6 as U,Z as F,_ as q}from"./index-BCumuH2l.js";import{E as z,a as A}from"./el-table-column-BOkQkY76.js";import"./el-checkbox-CCbI2xFo.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-popper-DuA7pbMX.js";import"./el-scrollbar-DYhKSyot.js";import{E as M}from"./el-image-viewer-CHpRcp5m.js";import"./el-tag-BkIRG4gH.js";/* empty css                  */import{i as L,a as V}from"./index-zwJVtKDU.js";import{a as _}from"./request--qZdk5mN.js";import{E as O}from"./el-dialog-Cr31W0vf.js";/* empty css                   *//* empty css                     *//* empty css                 *//* empty css                   */import{E as Q}from"./index-x58V2ps9.js";import{E as W,a as Y}from"./index-KsNwzYtN.js";import{E as $}from"./index-CGEPfdHm.js";/* empty css                       */import{E as B}from"./index-D3W99q7A.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-DPxtBdX-.js";import"./_Uint8Array-CjJrf9_z.js";import"./index-BNMC9-9K.js";import"./_initCloneObject-B8PdS-lA.js";import"./isArrayLikeObject-Y-BCkoqb.js";import"./event-BB_Ol6Sd.js";import"./isEqual-Du7s0shl.js";import"./scroll-DEYraRnD.js";import"./index-BBCR1adM.js";import"./vnode-DjHHQFRY.js";import"./refs-DC4vuWkM.js";import"./castArray--BTnThqL.js";import"./_baseClone-7GzUapHy.js";import"./aria-KgdLjl5h.js";import"./validator-C_mxy1pJ.js";const j={class:"dialog-footer"},G=S({__name:"EditInvoice",emits:["callback"],setup(v,{expose:g,emit:k}){h(!1),h(null);const l=D({show:!1,form:{id:"",title:"",socialCode:"",contact:"",phone:"",email:""}}),c=()=>{L.edit(l.form).then(s=>{s.code===0?(_.success("修改成功"),l.show=!1,C("callback")):_.error(s.msg)})},w=s=>{l.show=!0,l.form.id=s.id,l.form.title=s.invoiceTitle,l.form.socialCode=s.socialCode,l.form.contact=s.contact,l.form.phone=s.phone,l.form.email=s.email},C=k;return g({setEdit:w}),(s,i)=>{const r=Q,m=W,f=Y,t=$,b=O;return y(),E(b,{modelValue:l.show,"onUpdate:modelValue":i[6]||(i[6]=n=>l.show=n),title:"编辑发票",width:"500",draggable:""},{footer:o(()=>[p("div",j,[e(t,{onClick:i[5]||(i[5]=n=>l.show=!1)},{default:o(()=>[d("取消")]),_:1}),e(t,{type:"primary",onClick:c},{default:o(()=>[d("确定")]),_:1})])]),default:o(()=>[e(f,{ref:"willFormRef",model:l.form,"label-width":"auto"},{default:o(()=>[e(m,{label:"发票抬头"},{default:o(()=>[e(r,{modelValue:l.form.title,"onUpdate:modelValue":i[0]||(i[0]=n=>l.form.title=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(m,{label:"社会信用代码"},{default:o(()=>[e(r,{modelValue:l.form.socialCode,"onUpdate:modelValue":i[1]||(i[1]=n=>l.form.socialCode=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(m,{label:"联系人"},{default:o(()=>[e(r,{modelValue:l.form.contact,"onUpdate:modelValue":i[2]||(i[2]=n=>l.form.contact=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(m,{label:"手机号"},{default:o(()=>[e(r,{modelValue:l.form.phone,"onUpdate:modelValue":i[3]||(i[3]=n=>l.form.phone=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(m,{label:"邮箱"},{default:o(()=>[e(r,{modelValue:l.form.email,"onUpdate:modelValue":i[4]||(i[4]=n=>l.form.email=n),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),I=v=>(F("data-v-61ddd2ac"),v=v(),q(),v),H={class:"recording"},J={class:"top"},K=I(()=>p("span",{style:{"margin-right":"20px"}},"订单到款记录",-1)),X={class:"p2"},ee=I(()=>p("div",{class:"title"},"收款记录",-1)),oe={class:"table"},te=I(()=>p("div",{class:"title"},"发票详情",-1)),le={class:"table"},ae=S({__name:"PaymentDetail",setup(v){const g=R(),k=U(),l=h(Number(k.query.id)),c=h({invoice:[]}),w=()=>{V.payment.getDetail({id:l.value}).then(r=>{r.code===0&&(c.value=r.data)})},C=r=>{B.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{V.payment.del({id:r}).then(m=>{m.code===0?(_.success("删除成功"),g.back()):_.error(m.msg)})}).catch(()=>{})},s=r=>{B.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{V.invoice.del({id:r}).then(m=>{m.code===0?(_.success("删除成功"),getList()):_.error(m.msg)})}).catch(()=>{})},i=h(null);return w(),(r,m)=>{const f=$,t=z,b=M,n=A;return y(),N(P,null,[p("div",H,[p("div",J,[K,e(f,{onClick:r.$router.back},{default:o(()=>[d("返回")]),_:1},8,["onClick"])]),p("div",X,[e(f,{link:"",type:"primary",onClick:m[0]||(m[0]=a=>r.$router.push({name:"ContractDetail",query:{orderId:c.value.orderId}}))},{default:o(()=>[d("查看合同")]),_:1}),p("span",null,"订单编号："+u(c.value.orderCode),1),p("span",null,"展位号："+u(c.value.positionCode),1),p("span",null,"面积："+u(c.value.positionArea)+"平方米",1),p("span",null,"展位数："+u(c.value.positionNum)+"个",1),p("span",null,"订单金额："+u(c.value.orderPrice)+"元",1)]),p("div",null,[ee,p("div",oe,[e(n,{data:[c.value],border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:o(()=>[e(t,{prop:"code",label:"录款编号","min-width":"120"}),e(t,{prop:"payCompany",label:"付款公司","min-width":"120"}),e(t,{prop:"payType",label:"到款类型","min-width":"120"},{default:o(a=>[d(u({1:"预定金",2:"首款",3:"二次款",4:"尾款",5:"转款"}[a.row.payType]),1)]),_:1}),e(t,{prop:"payPrice",label:"到款金额","min-width":"120"}),e(t,{prop:"payType",label:"付款方式","min-width":"120"},{default:o(a=>[d(u({1:"全款",2:"分期"}[a.row.payType]),1)]),_:1}),e(t,{prop:"payTime",label:"到款时间","min-width":"120"}),e(t,{prop:"receiveAccount",label:"收款账户","min-width":"120"}),e(t,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:o(a=>[a.row.payImg?(y(),E(b,{key:0,style:{width:"30px",height:"30px"},src:a.row.payImg,"preview-src-list":[a.row.payImg],fit:"contain","preview-teleported":"true",loading:"lazy"},null,8,["src","preview-src-list"])):T("",!0)]),_:1}),e(t,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:o(a=>[a.row.receiveImg?(y(),E(b,{key:0,style:{width:"30px",height:"30px"},src:a.row.receiveImg,"preview-src-list":[a.row.receiveImg],fit:"contain","preview-teleported":"true",loading:"lazy"},null,8,["src","preview-src-list"])):T("",!0)]),_:1}),e(t,{prop:"invoiceStatus",label:"发票状态","min-width":"120"},{default:o(a=>[d(u({0:"未申请",1:"待开票",2:"部分开票",3:"已开票"}[a.row.invoiceStatus]),1)]),_:1}),e(t,{prop:"remark",label:"备注"}),e(t,{fixed:"right",label:"操作",width:"200"},{default:o(a=>[e(f,{link:"",type:"primary"},{default:o(()=>[d("编辑")]),_:1}),e(f,{link:"",type:"primary",onClick:x=>C(a.row.id)},{default:o(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),te,p("div",le,[e(n,{data:[c.value.invoice],border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:o(()=>[e(t,{prop:"code",label:"编号"}),e(t,{prop:"invoiceTitle",label:"发票抬头","min-width":"120"}),e(t,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),e(t,{prop:"invoicePrice",label:"开票金额","min-width":"120"}),e(t,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:o(a=>[d(u({1:"电子专票",2:"电子普票"}[a.row.invoiceType]),1)]),_:1}),e(t,{prop:"contact",label:"联系人"}),e(t,{prop:"email",label:"发送邮箱","min-width":"120"}),e(t,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:o(a=>[d(u({0:"未申请",1:"待开票",2:"已开票"}[a.row.invoiceStatus]),1)]),_:1}),e(t,{prop:"invoiceCode",label:"发票号"}),e(t,{prop:"remark",label:"备注"}),e(t,{fixed:"right",label:"操作",width:"200"},{default:o(a=>[e(f,{link:"",type:"primary",onClick:x=>i.value.setEdit(a.row)},{default:o(()=>[d("编辑")]),_:2},1032,["onClick"]),e(f,{link:"",type:"primary",onClick:x=>s(a.row.id)},{default:o(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])]),e(G,{ref_key:"editInvoiceRef",ref:i,onCallback:w},null,512)],64)}}}),Le=Z(ae,[["__scopeId","data-v-61ddd2ac"]]);export{Le as default};
