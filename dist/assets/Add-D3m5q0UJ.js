import{p as we,M as Pe,ac as tt,ad as De,a as ae,t as P,B as he,z as H,c as L,ae as Le,K as me,d as z,o as h,b as E,X as k,n as M,e as p,f as X,_ as oe,af as lt,F as _e,R as ye,ag as He,s as at,P as ot,J as x,a1 as q,ah as nt,y as qe,ai as rt,U as pe,A as st,h as I,i as c,H as ke,aj as Be,$ as i,ak as R,Y as K,Z as xe,m as it,G as $e,v as ut,I as Oe,al as ct,E as Ve,w as je,r as dt,a5 as pt,am as ft,W as ht,an as te,a7 as re,a2 as mt,a3 as vt}from"./index-D6lb1vAv.js";import{E as gt,a as bt}from"./form-item-CSzeSa22.js";/* empty css              */import{E as Ee}from"./button-CnviZ8cJ.js";import{E as _t}from"./progress-BDHTSMi0.js";import{g as Se,E as yt}from"./image-viewer-CxaTYho1.js";import{E as kt}from"./date-picker-CXsu67JK.js";import"./scrollbar-DU4G5b5p.js";import{u as Vt,C as Ct,E as Tt}from"./popper-PtN5-UwR.js";import{E as $t}from"./col-CaGBsgBE.js";/* empty css                    */import{E as Et,a as Mt}from"./radio-DpKKZ63o.js";import{d as wt}from"./tag-DyRGJO6y.js";import{E as Pt,a as St}from"./select-C-KkSNyU.js";import{b as It,c as Nt,d as Ft,h as Ut,f as At,i as Dt}from"./index-CNcb9o6C.js";import{u as Lt}from"./index-DqmM9QAu.js";/* empty css                */import{u as Ht,E as Xe}from"./index-DtV3tWyM.js";import{u as Bt,a as xt,b as Ot,c as Kt,d as Rt,e as Ke}from"./use-form-item-D2gyIkin.js";import{U as Me,C as Yt}from"./event-BB_Ol6Sd.js";import{_ as Wt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./castArray-CqaCZPGK.js";import"./_baseClone-B5IZTI-u.js";import"./_initCloneObject-DxFeGeIP.js";import"./cloneDeep-CQWJaEaZ.js";import"./isEqual-DtkQ-0cD.js";import"./scroll-Cee1eboZ.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./arrays-6TrVLtTe.js";import"./index-Idr8RD6s.js";import"./focus-trap-BL2pMCUV.js";const zt=we({color:{type:Pe(Object),required:!0},vertical:{type:Boolean,default:!1}});let Ce=!1;function ue(t,n){if(!tt)return;const a=function(r){var s;(s=n.drag)==null||s.call(n,r)},l=function(r){var s;document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",l),document.onselectstart=null,document.ondragstart=null,Ce=!1,(s=n.end)==null||s.call(n,r)},e=function(r){var s;Ce||(r.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",a),document.addEventListener("mouseup",l),document.addEventListener("touchmove",a),document.addEventListener("touchend",l),Ce=!0,(s=n.start)==null||s.call(n,r))};t.addEventListener("mousedown",e),t.addEventListener("touchstart",e)}const qt=t=>{const n=me(),a=De(),l=De();function e(s){s.target!==a.value&&r(s)}function r(s){if(!l.value||!a.value)return;const m=n.vnode.el.getBoundingClientRect(),{clientX:_,clientY:F}=Se(s);if(t.vertical){let C=F-m.top;C=Math.max(a.value.offsetHeight/2,C),C=Math.min(C,m.height-a.value.offsetHeight/2),t.color.set("alpha",Math.round((C-a.value.offsetHeight/2)/(m.height-a.value.offsetHeight)*100))}else{let C=_-m.left;C=Math.max(a.value.offsetWidth/2,C),C=Math.min(C,m.width-a.value.offsetWidth/2),t.color.set("alpha",Math.round((C-a.value.offsetWidth/2)/(m.width-a.value.offsetWidth)*100))}}return{thumb:a,bar:l,handleDrag:r,handleClick:e}},jt=(t,{bar:n,thumb:a,handleDrag:l})=>{const e=me(),r=ae("color-alpha-slider"),s=P(0),g=P(0),m=P();function _(){if(!a.value||t.vertical)return 0;const o=e.vnode.el,f=t.color.get("alpha");return o?Math.round(f*(o.offsetWidth-a.value.offsetWidth/2)/100):0}function F(){if(!a.value)return 0;const o=e.vnode.el;if(!t.vertical)return 0;const f=t.color.get("alpha");return o?Math.round(f*(o.offsetHeight-a.value.offsetHeight/2)/100):0}function C(){if(t.color&&t.color.value){const{r:o,g:f,b}=t.color.toRgb();return`linear-gradient(to right, rgba(${o}, ${f}, ${b}, 0) 0%, rgba(${o}, ${f}, ${b}, 1) 100%)`}return""}function U(){s.value=_(),g.value=F(),m.value=C()}he(()=>{if(!n.value||!a.value)return;const o={drag:f=>{l(f)},end:f=>{l(f)}};ue(n.value,o),ue(a.value,o),U()}),H(()=>t.color.get("alpha"),()=>U()),H(()=>t.color.value,()=>U());const w=L(()=>[r.b(),r.is("vertical",t.vertical)]),$=L(()=>r.e("bar")),S=L(()=>r.e("thumb")),j=L(()=>({background:m.value})),d=L(()=>({left:Le(s.value),top:Le(g.value)}));return{rootKls:w,barKls:$,barStyle:j,thumbKls:S,thumbStyle:d,update:U}},Xt="ElColorAlphaSlider",Gt=z({name:Xt}),Zt=z({...Gt,props:zt,setup(t,{expose:n}){const a=t,{bar:l,thumb:e,handleDrag:r,handleClick:s}=qt(a),{rootKls:g,barKls:m,barStyle:_,thumbKls:F,thumbStyle:C,update:U}=jt(a,{bar:l,thumb:e,handleDrag:r});return n({update:U,bar:l,thumb:e}),(w,$)=>(h(),E("div",{class:M(p(g))},[k("div",{ref_key:"bar",ref:l,class:M(p(m)),style:X(p(_)),onClick:$[0]||($[0]=(...S)=>p(s)&&p(s)(...S))},null,6),k("div",{ref_key:"thumb",ref:e,class:M(p(F)),style:X(p(C))},null,6)],2))}});var Jt=oe(Zt,[["__file","alpha-slider.vue"]]);const Qt=z({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const n=ae("color-hue-slider"),a=me(),l=P(),e=P(),r=P(0),s=P(0),g=L(()=>t.color.get("hue"));H(()=>g.value,()=>{U()});function m(w){w.target!==l.value&&_(w)}function _(w){if(!e.value||!l.value)return;const S=a.vnode.el.getBoundingClientRect(),{clientX:j,clientY:d}=Se(w);let o;if(t.vertical){let f=d-S.top;f=Math.min(f,S.height-l.value.offsetHeight/2),f=Math.max(l.value.offsetHeight/2,f),o=Math.round((f-l.value.offsetHeight/2)/(S.height-l.value.offsetHeight)*360)}else{let f=j-S.left;f=Math.min(f,S.width-l.value.offsetWidth/2),f=Math.max(l.value.offsetWidth/2,f),o=Math.round((f-l.value.offsetWidth/2)/(S.width-l.value.offsetWidth)*360)}t.color.set("hue",o)}function F(){if(!l.value)return 0;const w=a.vnode.el;if(t.vertical)return 0;const $=t.color.get("hue");return w?Math.round($*(w.offsetWidth-l.value.offsetWidth/2)/360):0}function C(){if(!l.value)return 0;const w=a.vnode.el;if(!t.vertical)return 0;const $=t.color.get("hue");return w?Math.round($*(w.offsetHeight-l.value.offsetHeight/2)/360):0}function U(){r.value=F(),s.value=C()}return he(()=>{if(!e.value||!l.value)return;const w={drag:$=>{_($)},end:$=>{_($)}};ue(e.value,w),ue(l.value,w),U()}),{bar:e,thumb:l,thumbLeft:r,thumbTop:s,hueValue:g,handleClick:m,update:U,ns:n}}});function el(t,n,a,l,e,r){return h(),E("div",{class:M([t.ns.b(),t.ns.is("vertical",t.vertical)])},[k("div",{ref:"bar",class:M(t.ns.e("bar")),onClick:n[0]||(n[0]=(...s)=>t.handleClick&&t.handleClick(...s))},null,2),k("div",{ref:"thumb",class:M(t.ns.e("thumb")),style:X({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var tl=oe(Qt,[["render",el],["__file","hue-slider.vue"]]);const ll=we({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:lt,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:Vt.teleported,predefine:{type:Pe(Array)},validateEvent:{type:Boolean,default:!0},...Bt(["ariaLabel"])}),al={[Me]:t=>_e(t)||ye(t),[Yt]:t=>_e(t)||ye(t),activeChange:t=>_e(t)||ye(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},Ge=Symbol("colorPickerContextKey"),Re=function(t,n,a){return[t,n*a/((t=(2-n)*a)<1?t:2-t)||0,t/2]},ol=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},nl=function(t){return typeof t=="string"&&t.includes("%")},le=function(t,n){ol(t)&&(t="100%");const a=nl(t);return t=Math.min(n,Math.max(0,Number.parseFloat(`${t}`))),a&&(t=Number.parseInt(`${t*n}`,10)/100),Math.abs(t-n)<1e-6?1:t%n/Number.parseFloat(n)},Ye={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},fe=t=>{t=Math.min(Math.round(t),255);const n=Math.floor(t/16),a=t%16;return`${Ye[n]||n}${Ye[a]||a}`},We=function({r:t,g:n,b:a}){return Number.isNaN(+t)||Number.isNaN(+n)||Number.isNaN(+a)?"":`#${fe(t)}${fe(n)}${fe(a)}`},Te={A:10,B:11,C:12,D:13,E:14,F:15},Q=function(t){return t.length===2?(Te[t[0].toUpperCase()]||+t[0])*16+(Te[t[1].toUpperCase()]||+t[1]):Te[t[1].toUpperCase()]||+t[1]},rl=function(t,n,a){n=n/100,a=a/100;let l=n;const e=Math.max(a,.01);a*=2,n*=a<=1?a:2-a,l*=e<=1?e:2-e;const r=(a+n)/2,s=a===0?2*l/(e+l):2*n/(a+n);return{h:t,s:s*100,v:r*100}},ze=(t,n,a)=>{t=le(t,255),n=le(n,255),a=le(a,255);const l=Math.max(t,n,a),e=Math.min(t,n,a);let r;const s=l,g=l-e,m=l===0?0:g/l;if(l===e)r=0;else{switch(l){case t:{r=(n-a)/g+(n<a?6:0);break}case n:{r=(a-t)/g+2;break}case a:{r=(t-n)/g+4;break}}r/=6}return{h:r*360,s:m*100,v:s*100}},se=function(t,n,a){t=le(t,360)*6,n=le(n,100),a=le(a,100);const l=Math.floor(t),e=t-l,r=a*(1-n),s=a*(1-e*n),g=a*(1-(1-e)*n),m=l%6,_=[a,s,r,r,g,a][m],F=[g,a,a,s,r,r][m],C=[r,r,g,a,a,s][m];return{r:Math.round(_*255),g:Math.round(F*255),b:Math.round(C*255)}};class ie{constructor(n={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const a in n)He(n,a)&&(this[a]=n[a]);n.value?this.fromString(n.value):this.doOnChange()}set(n,a){if(arguments.length===1&&typeof n=="object"){for(const l in n)He(n,l)&&this.set(l,n[l]);return}this[`_${n}`]=a,this.doOnChange()}get(n){return n==="alpha"?Math.floor(this[`_${n}`]):this[`_${n}`]}toRgb(){return se(this._hue,this._saturation,this._value)}fromString(n){if(!n){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const a=(l,e,r)=>{this._hue=Math.max(0,Math.min(360,l)),this._saturation=Math.max(0,Math.min(100,e)),this._value=Math.max(0,Math.min(100,r)),this.doOnChange()};if(n.includes("hsl")){const l=n.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(e=>e!=="").map((e,r)=>r>2?Number.parseFloat(e):Number.parseInt(e,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:e,s:r,v:s}=rl(l[0],l[1],l[2]);a(e,r,s)}}else if(n.includes("hsv")){const l=n.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(e=>e!=="").map((e,r)=>r>2?Number.parseFloat(e):Number.parseInt(e,10));l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3&&a(l[0],l[1],l[2])}else if(n.includes("rgb")){const l=n.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(e=>e!=="").map((e,r)=>r>2?Number.parseFloat(e):Number.parseInt(e,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:e,s:r,v:s}=ze(l[0],l[1],l[2]);a(e,r,s)}}else if(n.includes("#")){const l=n.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(l))return;let e,r,s;l.length===3?(e=Q(l[0]+l[0]),r=Q(l[1]+l[1]),s=Q(l[2]+l[2])):(l.length===6||l.length===8)&&(e=Q(l.slice(0,2)),r=Q(l.slice(2,4)),s=Q(l.slice(4,6))),l.length===8?this._alpha=Q(l.slice(6))/255*100:(l.length===3||l.length===6)&&(this._alpha=100);const{h:g,s:m,v:_}=ze(e,r,s);a(g,m,_)}}compare(n){return Math.abs(n._hue-this._hue)<2&&Math.abs(n._saturation-this._saturation)<1&&Math.abs(n._value-this._value)<1&&Math.abs(n._alpha-this._alpha)<1}doOnChange(){const{_hue:n,_saturation:a,_value:l,_alpha:e,format:r}=this;if(this.enableAlpha)switch(r){case"hsl":{const s=Re(n,a/100,l/100);this.value=`hsla(${n}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${n}, ${Math.round(a)}%, ${Math.round(l)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${We(se(n,a,l))}${fe(e*255/100)}`;break}default:{const{r:s,g,b:m}=se(n,a,l);this.value=`rgba(${s}, ${g}, ${m}, ${this.get("alpha")/100})`}}else switch(r){case"hsl":{const s=Re(n,a/100,l/100);this.value=`hsl(${n}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${n}, ${Math.round(a)}%, ${Math.round(l)}%)`;break}case"rgb":{const{r:s,g,b:m}=se(n,a,l);this.value=`rgb(${s}, ${g}, ${m})`;break}default:this.value=We(se(n,a,l))}}}const sl=z({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(t){const n=ae("color-predefine"),{currentColor:a}=at(Ge),l=P(r(t.colors,t.color));H(()=>a.value,s=>{const g=new ie;g.fromString(s),l.value.forEach(m=>{m.selected=g.compare(m)})}),ot(()=>{l.value=r(t.colors,t.color)});function e(s){t.color.fromString(t.colors[s])}function r(s,g){return s.map(m=>{const _=new ie;return _.enableAlpha=t.enableAlpha,_.format="rgba",_.fromString(m),_.selected=_.value===g.value,_})}return{rgbaColors:l,handleSelect:e,ns:n}}}),il=["onClick"];function ul(t,n,a,l,e,r){return h(),E("div",{class:M(t.ns.b())},[k("div",{class:M(t.ns.e("colors"))},[(h(!0),E(x,null,q(t.rgbaColors,(s,g)=>(h(),E("div",{key:t.colors[g],class:M([t.ns.e("color-selector"),t.ns.is("alpha",s._alpha<100),{selected:s.selected}]),onClick:m=>t.handleSelect(g)},[k("div",{style:X({backgroundColor:s.value})},null,4)],10,il))),128))],2)],2)}var cl=oe(sl,[["render",ul],["__file","predefine.vue"]]);const dl=z({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const n=ae("color-svpanel"),a=me(),l=P(0),e=P(0),r=P("hsl(0, 100%, 50%)"),s=L(()=>{const _=t.color.get("hue"),F=t.color.get("value");return{hue:_,value:F}});function g(){const _=t.color.get("saturation"),F=t.color.get("value"),C=a.vnode.el,{clientWidth:U,clientHeight:w}=C;e.value=_*U/100,l.value=(100-F)*w/100,r.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function m(_){const C=a.vnode.el.getBoundingClientRect(),{clientX:U,clientY:w}=Se(_);let $=U-C.left,S=w-C.top;$=Math.max(0,$),$=Math.min($,C.width),S=Math.max(0,S),S=Math.min(S,C.height),e.value=$,l.value=S,t.color.set({saturation:$/C.width*100,value:100-S/C.height*100})}return H(()=>s.value,()=>{g()}),he(()=>{ue(a.vnode.el,{drag:_=>{m(_)},end:_=>{m(_)}}),g()}),{cursorTop:l,cursorLeft:e,background:r,colorValue:s,handleDrag:m,update:g,ns:n}}}),pl=k("div",null,null,-1),fl=[pl];function hl(t,n,a,l,e,r){return h(),E("div",{class:M(t.ns.b()),style:X({backgroundColor:t.background})},[k("div",{class:M(t.ns.e("white"))},null,2),k("div",{class:M(t.ns.e("black"))},null,2),k("div",{class:M(t.ns.e("cursor")),style:X({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},fl,6)],6)}var ml=oe(dl,[["render",hl],["__file","sv-panel.vue"]]);const vl=["onKeydown"],gl=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],bl=z({name:"ElColorPicker"}),_l=z({...bl,props:ll,emits:al,setup(t,{expose:n,emit:a}){const l=t,{t:e}=nt(),r=ae("color"),{formItem:s}=xt(),g=Ot(),m=Kt(),{inputId:_,isLabeledByFormItem:F}=Rt(l,{formItemContext:s}),C=P(),U=P(),w=P(),$=P(),S=P(),j=P(),{isFocused:d,handleFocus:o,handleBlur:f}=Ht(S,{beforeBlur(v){var A;return(A=$.value)==null?void 0:A.isFocusInsideContent(v)},afterBlur(){J(!1),V()}}),b=v=>{if(m.value)return Fe();o(v)};let y=!0;const N=qe(new ie({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue})),Y=P(!1),O=P(!1),Z=P(""),D=L(()=>!l.modelValue&&!O.value?"transparent":ge(N,l.showAlpha)),B=L(()=>!l.modelValue&&!O.value?"":N.value),ne=L(()=>F.value?void 0:l.label||l.ariaLabel||e("el.colorpicker.defaultLabel"));rt({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},L(()=>!!l.label));const ce=L(()=>F.value?s==null?void 0:s.labelId:void 0),ve=L(()=>[r.b("picker"),r.is("disabled",m.value),r.bm("picker",g.value),r.is("focused",d.value)]);function ge(v,A){if(!(v instanceof ie))throw new TypeError("color should be instance of _color Class");const{r:W,g:Ue,b:Ae}=v.toRgb();return A?`rgba(${W}, ${Ue}, ${Ae}, ${v.get("alpha")/100})`:`rgb(${W}, ${Ue}, ${Ae})`}function J(v){Y.value=v}const ee=wt(J,100,{leading:!0});function de(){m.value||J(!0)}function u(){ee(!1),V()}function V(){pe(()=>{l.modelValue?N.fromString(l.modelValue):(N.value="",pe(()=>{O.value=!1}))})}function T(){m.value||ee(!Y.value)}function be(){N.fromString(Z.value)}function Ie(){const v=N.value;a(Me,v),a("change",v),l.validateEvent&&(s==null||s.validate("change").catch(A=>Ke())),ee(!1),pe(()=>{const A=new ie({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue});N.compare(A)||V()})}function Ze(){ee(!1),a(Me,null),a("change",null),l.modelValue!==null&&l.validateEvent&&(s==null||s.validate("change").catch(v=>Ke())),V()}function Je(v){if(Y.value&&(u(),d.value)){const A=new FocusEvent("focus",v);f(A)}}function Ne(v){v.preventDefault(),v.stopPropagation(),J(!1),V()}function Qe(v){switch(v.code){case Ve.enter:case Ve.space:v.preventDefault(),v.stopPropagation(),de(),j.value.focus();break;case Ve.esc:Ne(v);break}}function et(){S.value.focus()}function Fe(){S.value.blur()}return he(()=>{l.modelValue&&(Z.value=B.value)}),H(()=>l.modelValue,v=>{v?v&&v!==N.value&&(y=!1,N.fromString(v)):O.value=!1}),H(()=>B.value,v=>{Z.value=v,y&&a("activeChange",v),y=!0}),H(()=>N.value,()=>{!l.modelValue&&!O.value&&(O.value=!0)}),H(()=>Y.value,()=>{pe(()=>{var v,A,W;(v=C.value)==null||v.update(),(A=U.value)==null||A.update(),(W=w.value)==null||W.update()})}),st(Ge,{currentColor:B}),n({color:N,show:de,hide:u,focus:et,blur:Fe}),(v,A)=>(h(),I(p(Tt),{ref_key:"popper",ref:$,visible:Y.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[p(r).be("picker","panel"),p(r).b("dropdown"),v.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:v.teleported,transition:`${p(r).namespace.value}-zoom-in-top`,persistent:"",onHide:A[2]||(A[2]=W=>J(!1))},{content:c(()=>[ke((h(),E("div",{onKeydown:Be(Ne,["esc"])},[k("div",{class:M(p(r).be("dropdown","main-wrapper"))},[i(tl,{ref_key:"hue",ref:C,class:"hue-slider",color:p(N),vertical:""},null,8,["color"]),i(ml,{ref_key:"sv",ref:U,color:p(N)},null,8,["color"])],2),v.showAlpha?(h(),I(Jt,{key:0,ref_key:"alpha",ref:w,color:p(N)},null,8,["color"])):R("v-if",!0),v.predefine?(h(),I(cl,{key:1,ref:"predefine","enable-alpha":v.showAlpha,color:p(N),colors:v.predefine},null,8,["enable-alpha","color","colors"])):R("v-if",!0),k("div",{class:M(p(r).be("dropdown","btns"))},[k("span",{class:M(p(r).be("dropdown","value"))},[i(p(Xe),{ref_key:"inputRef",ref:j,modelValue:Z.value,"onUpdate:modelValue":A[0]||(A[0]=W=>Z.value=W),"validate-event":!1,size:"small",onKeyup:Be(be,["enter"]),onBlur:be},null,8,["modelValue","onKeyup"])],2),i(p(Ee),{class:M(p(r).be("dropdown","link-btn")),text:"",size:"small",onClick:Ze},{default:c(()=>[K(xe(p(e)("el.colorpicker.clear")),1)]),_:1},8,["class"]),i(p(Ee),{plain:"",size:"small",class:M(p(r).be("dropdown","btn")),onClick:Ie},{default:c(()=>[K(xe(p(e)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,vl)),[[p(Ct),Je]])]),default:c(()=>[k("div",it({id:p(_),ref_key:"triggerRef",ref:S},v.$attrs,{class:p(ve),role:"button","aria-label":p(ne),"aria-labelledby":p(ce),"aria-description":p(e)("el.colorpicker.description",{color:v.modelValue||""}),"aria-disabled":p(m),tabindex:p(m)?-1:v.tabindex,onKeydown:Qe,onFocus:b,onBlur:A[1]||(A[1]=(...W)=>p(f)&&p(f)(...W))}),[p(m)?(h(),E("div",{key:0,class:M(p(r).be("picker","mask"))},null,2)):R("v-if",!0),k("div",{class:M(p(r).be("picker","trigger")),onClick:T},[k("span",{class:M([p(r).be("picker","color"),p(r).is("alpha",v.showAlpha)])},[k("span",{class:M(p(r).be("picker","color-inner")),style:X({backgroundColor:p(D)})},[ke(i(p($e),{class:M([p(r).be("picker","icon"),p(r).is("icon-arrow-down")])},{default:c(()=>[i(p(ut))]),_:1},8,["class"]),[[Oe,v.modelValue||O.value]]),ke(i(p($e),{class:M([p(r).be("picker","empty"),p(r).is("icon-close")])},{default:c(()=>[i(p(ct))]),_:1},8,["class"]),[[Oe,!v.modelValue&&!O.value]])],6)],2)],2)],16,gl)]),_:1},8,["visible","popper-class","teleported","transition"]))}});var yl=oe(_l,[["__file","color-picker.vue"]]);const kl=je(yl),Vl=we({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Pe(String),default:"solid"}}),Cl=z({name:"ElDivider"}),Tl=z({...Cl,props:Vl,setup(t){const n=t,a=ae("divider"),l=L(()=>a.cssVar({"border-style":n.borderStyle}));return(e,r)=>(h(),E("div",{class:M([p(a).b(),p(a).m(e.direction)]),style:X(p(l)),role:"separator"},[e.$slots.default&&e.direction!=="vertical"?(h(),E("div",{key:0,class:M([p(a).e("text"),p(a).is(e.contentPosition)])},[dt(e.$slots,"default")],2)):R("v-if",!0)],6))}});var $l=oe(Tl,[["__file","divider.vue"]]);const El=je($l),G=t=>(mt("data-v-63f3e787"),t=t(),vt(),t),Ml=G(()=>k("span",{class:"title"},"基本信息",-1)),wl=G(()=>k("span",{class:"title"},"时间信息",-1)),Pl=G(()=>k("span",{class:"title"},"图片素材",-1)),Sl={class:"image-slot"},Il=G(()=>k("span",{class:"title"},"展区分类",-1)),Nl=G(()=>k("span",{class:"title"},"单价设置",-1)),Fl={class:"list"},Ul={key:0,for:""},Al={key:0,for:""},Dl={key:0,for:""},Ll=G(()=>k("span",{class:"title"},"加收设置",-1)),Hl={class:"list"},Bl=G(()=>k("span",{class:"title"},"折扣设置",-1)),xl={class:"list"},Ol=G(()=>k("span",{class:"title"},"付款期限",-1)),Kl={class:"s-flex-center"},Rl=z({__name:"Add",setup(t){const n=pt();let l=ft().query.id;const e=qe({exhibitionName:"",cityId:"",cityName:"",hallId:"",hallName:"",positionImgType:1,host:[""],arrangeStartTime:"",arrangeEndTime:"",startTime:"",endTime:"",saleEndTime:"",payFirst:"",payFinal:"",position:[{code:"",img:""}],cate:[{name:"",rgb:""}],unitPrice:[{text:"",price:0,num:0}],attachPrice:[{text:"",price:"",priceType:1,changeType:1},{text:"",price:"",priceType:1,changeType:-1}]}),r=P(""),s=P(["",""]),g=P(["",""]),m=P([]),_=P([]);H(s,async(d,o)=>{d&&d[0]&&d[1]?(e.arrangeStartTime=d[0],e.arrangeEndTime=d[1]):(e.arrangeStartTime="",e.arrangeEndTime="")}),H(g,async(d,o)=>{d&&d[0]&&d[1]?(e.startTime=d[0],e.endTime=d[1]):(e.startTime="",e.endTime="")}),l&&It({id:l}).then(d=>{if(d.code===0&&d.data){let o=d.data;e.exhibitionName=o.exhibitionName,e.cityId=o.cityId+"",e.cityName=o.cityName,e.hallId=o.hallId,e.hallName=o.hallName,e.positionImgType=o.positionImgType||1,e.host=o.host,e.arrangeStartTime=o.arrangeStartTime,e.arrangeEndTime=o.arrangeEndTime,s.value=[o.arrangeStartTime,o.arrangeEndTime],g.value=[o.startTime,o.endTime],e.startTime=o.startTime,e.endTime=o.endTime,e.saleEndTime=o.saleEndTime,e.payFirst=o.payFirst,e.payFinal=o.payFinal,e.position=o.position,e.cate=o.cate.length?o.cate:[{name:"",rgb:""}],e.unitPrice=o.unitPrice.length?o.unitPrice:[{text:"",price:0,num:0}];let f=0,b=0;e.attachPrice=o.add.map(y=>(y.change_type==1?f++:b++,{text:y.text,price:y.price,priceType:y.price_type,changeType:y.change_type})),o.discount.forEach(y=>{y.change_type==1?f++:b++,e.attachPrice.push({text:y.text,price:y.price,priceType:y.price_type,changeType:y.change_type})}),f===0&&e.attachPrice.push({text:"",price:"",priceType:1,changeType:1}),b===0&&e.attachPrice.push({text:"",price:"",priceType:1,changeType:-1})}}),Nt().then(d=>{d.code===0&&d.data.length>0&&(m.value=d.data)});const F=d=>{e.cityName=m.value.filter(o=>o.id==d)[0].cityName,_.value=[],e.hallId="",e.hallName=""};H(()=>e.cityId,async(d,o)=>{w()}),H(()=>e.hallId,async(d,o)=>{U()});const C=d=>{e.hallName=_.value.filter(o=>o.id==d)[0].hallName},U=()=>{e.hallId&&Ft({hallId:e.hallId}).then(d=>{d.code===0&&d.data.length>0&&(r.value=d.data)})},w=()=>{e.cityId&&Ut({id:e.cityId}).then(d=>{d.code===0&&d.data.length>0&&(_.value=d.data)})},$=d=>d.size/1024/1024>3?(re.error("文件大小不能超过 3MB!"),!1):!0,S=d=>{let o=new FormData;return o.append("upload",d.file),new Promise((f,b)=>{Lt(o).then(y=>{y.code===0?f(y.data):b(y)})})},j=()=>{console.log(e);let d={};for(let o in e)if(e[o]!==void 0)if(o==="position"){let f=e[o].filter(b=>b.img);d[o]=f}else if(o==="cate"){let f=e[o].filter(b=>b.name&&b.rgb);d[o]=f}else if(o==="unitPrice"){let f=e[o].filter(b=>b.text&&b.price&&b.num);d[o]=f}else if(o==="attachPrice"){let f=e[o].filter(b=>b.text&&b.price);d[o]=f}else if(o==="host"){let f=e[o].filter(b=>b);d[o]=f}else d[o]=e[o];l?(d.id=l,At(d).then(o=>{o.code===0?(re.success("保存成功"),n.back()):re.error(o.msg)})):Dt(d).then(o=>{o.code===0?(re.success("保存成功"),n.back()):re.error(o.msg)})};return(d,o)=>{const f=El,b=Xe,y=bt,N=Pt,Y=St,O=Et,Z=Mt,D=Ee,B=$t,ne=kt,ce=yt,ve=_t,ge=ht("Picture"),J=$e,ee=kl,de=gt;return h(),I(de,{model:e,"label-width":"auto",style:{width:"800px",margin:"0 auto"}},{default:c(()=>[i(f,{"content-position":"left"},{default:c(()=>[Ml]),_:1}),i(B,{span:20,offset:2},{default:c(()=>[i(y,{label:"展会名称"},{default:c(()=>[i(b,{modelValue:e.exhibitionName,"onUpdate:modelValue":o[0]||(o[0]=u=>e.exhibitionName=u)},null,8,["modelValue"])]),_:1}),i(y,{label:"所在城市"},{default:c(()=>[i(Y,{modelValue:e.cityId,"onUpdate:modelValue":o[1]||(o[1]=u=>e.cityId=u),filterable:"",placeholder:"",onChange:F},{default:c(()=>[(h(!0),E(x,null,q(m.value,u=>(h(),I(N,{key:u.id,label:u.cityName,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(y,{label:"所在展馆"},{default:c(()=>[i(Y,{modelValue:e.hallId,"onUpdate:modelValue":o[2]||(o[2]=u=>e.hallId=u),placeholder:"",onChange:C},{default:c(()=>[(h(!0),E(x,null,q(_.value,u=>(h(),I(N,{key:u.id,label:u.hallName,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(y,{label:"展位图类型"},{default:c(()=>[i(Z,{modelValue:e.positionImgType,"onUpdate:modelValue":o[3]||(o[3]=u=>e.positionImgType=u)},{default:c(()=>[i(O,{value:1},{default:c(()=>[K("已有展位图上传")]),_:1}),i(O,{value:2},{default:c(()=>[K("在线自定义展位")]),_:1})]),_:1},8,["modelValue"])]),_:1}),(h(!0),E(x,null,q(e.host,(u,V)=>(h(),I(y,{key:V,label:V>0?" ":"主办单位",prop:"form.host."+V},{default:c(()=>[i(b,{modelValue:e.host[V],"onUpdate:modelValue":T=>e.host[V]=T},{append:c(()=>[V===0?(h(),I(D,{key:0,icon:"Plus",onClick:o[4]||(o[4]=()=>{e.host.push("")})})):(h(),I(D,{key:1,icon:"Minus",onClick:te(()=>{e.host.splice(V,1)},["prevent"])},null,8,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"]))),128))]),_:1}),i(f,{"content-position":"left"},{default:c(()=>[wl]),_:1}),i(B,{span:20,offset:2},{default:c(()=>[i(y,{label:"布展日期"},{default:c(()=>[i(ne,{modelValue:s.value,"onUpdate:modelValue":o[5]||(o[5]=u=>s.value=u),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"至","start-placeholder":"","end-placeholder":""},null,8,["modelValue"])]),_:1}),i(y,{label:"开展日期"},{default:c(()=>[i(ne,{modelValue:g.value,"onUpdate:modelValue":o[6]||(o[6]=u=>g.value=u),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"至","start-placeholder":"","end-placeholder":""},null,8,["modelValue"])]),_:1}),i(y,{label:"销售截止日期"},{default:c(()=>[i(ne,{modelValue:e.saleEndTime,"onUpdate:modelValue":o[7]||(o[7]=u=>e.saleEndTime=u),"value-format":"YYYY-MM-DD",type:"date",placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),i(f,{"content-position":"left"},{default:c(()=>[Pl]),_:1}),i(B,{span:20,offset:2},{default:c(()=>[i(y,{label:"招展平面图"},{default:c(()=>[i(ce,{src:r.value,"preview-src-list":[r.value],fit:"cover",style:{width:"100px",height:"100px"}},null,8,["src","preview-src-list"])]),_:1}),i(y,{label:"展位图"},{default:c(()=>[(h(!0),E(x,null,q(e.position,(u,V)=>(h(),E("div",{key:V,style:{display:"flex","align-items":"center","margin-bottom":"10px"}},[i(b,{modelValue:u.code,"onUpdate:modelValue":T=>u.code=T,placeholder:"展馆号",style:{"max-width":"220px"}},{append:c(()=>[V===0?(h(),I(D,{key:0,icon:"Plus",onClick:o[8]||(o[8]=()=>{e.position.push({code:"",img:""})})})):(h(),I(D,{key:1,icon:"Minus",onClick:te(()=>{e.position.splice(V,1)},["prevent"])},null,8,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"]),i(ve,{style:{"margin-left":"10px",display:"inline-flex","align-items":"center","justify-content":"center"},class:"","show-file-list":!1,"on-success":(T,be,Ie)=>{e.position[V].img=T.url},"before-upload":$,"http-request":S,accept:"image/*"},{default:c(()=>[i(D,{link:"",type:"primary"},{default:c(()=>[K("上传图片")]),_:1})]),_:2},1032,["on-success"]),u.img?(h(),I(ce,{key:0,src:u.img,"preview-src-list":[u.img],fit:"cover",style:{width:"32px",height:"32px","margin-left":"10px"}},{error:c(()=>[k("div",Sl,[i(J,null,{default:c(()=>[i(ge)]),_:1})])]),_:2},1032,["src","preview-src-list"])):R("",!0)]))),128))]),_:1})]),_:1}),e.positionImgType==2?(h(),E(x,{key:0},[i(f,{"content-position":"left"},{default:c(()=>[Il]),_:1}),i(B,{span:20,offset:2},{default:c(()=>[(h(!0),E(x,null,q(e.cate,(u,V)=>(h(),I(y,{label:" "},{default:c(()=>[i(b,{modelValue:u.name,"onUpdate:modelValue":T=>u.name=T,placeholder:"请输入展区分类",style:{"max-width":"220px"}},{append:c(()=>[V===0?(h(),I(D,{key:0,icon:"Plus",onClick:o[9]||(o[9]=()=>{e.cate.push({name:"",rgb:""})})})):(h(),I(D,{key:1,icon:"Minus",onClick:te(()=>{e.cate.splice(V,1)},["prevent"])},null,8,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"]),i(ee,{style:{"margin-left":"10px"},modelValue:u.rgb,"onUpdate:modelValue":T=>u.rgb=T},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})],64)):R("",!0),i(f,{"content-position":"left"},{default:c(()=>[Nl]),_:1}),i(B,{span:20,offset:2},{default:c(()=>[i(y,{label:" "},{default:c(()=>[(h(!0),E(x,null,q(e.unitPrice,(u,V)=>(h(),E("div",Fl,[k("div",null,[V===0?(h(),E("label",Ul,"标题")):R("",!0),i(b,{modelValue:u.text,"onUpdate:modelValue":T=>u.text=T,placeholder:"请输入标题"},null,8,["modelValue","onUpdate:modelValue"])]),k("div",null,[V===0?(h(),E("label",Al,"单价")):R("",!0),i(b,{modelValue:u.price,"onUpdate:modelValue":T=>u.price=T,placeholder:"请输入单价",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),k("div",null,[V===0?(h(),E("label",Dl,"计价基数")):R("",!0),i(b,{modelValue:u.num,"onUpdate:modelValue":T=>u.num=T,placeholder:"请输入计价基数",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),V===0?(h(),I(D,{key:0,type:"info",plain:"",icon:"Plus",onClick:o[10]||(o[10]=()=>{e.unitPrice.push({text:"",price:0,num:0})})})):(h(),I(D,{key:1,type:"info",plain:"",icon:"Minus",onClick:te(()=>{e.unitPrice.splice(V,1)},["prevent"])},null,8,["onClick"]))]))),256))]),_:1})]),_:1}),i(f,{"content-position":"left"},{default:c(()=>[Ll]),_:1}),i(B,{span:20,offset:2},{default:c(()=>[(h(!0),E(x,null,q(e.attachPrice,(u,V)=>(h(),E(x,{key:V},[u.changeType===1?(h(),I(y,{key:0,label:"加收"},{default:c(()=>[k("div",Hl,[k("div",null,[i(b,{modelValue:u.text,"onUpdate:modelValue":T=>u.text=T,placeholder:"例如：双开口"},null,8,["modelValue","onUpdate:modelValue"])]),k("div",null,[i(b,{type:"number",modelValue:u.price,"onUpdate:modelValue":T=>u.price=T,placeholder:u.priceType==1?"设置比例":"设置金额"},{append:c(()=>[i(Y,{modelValue:u.priceType,"onUpdate:modelValue":T=>u.priceType=T,placeholder:"",style:{width:"60px"}},{default:c(()=>[i(N,{label:"%",value:1}),i(N,{label:"￥",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),V===e.attachPrice.findIndex(T=>T.changeType===1)?(h(),I(D,{key:0,type:"info",plain:"",icon:"Plus",onClick:o[11]||(o[11]=()=>{e.attachPrice.push({text:"",price:"",priceType:1,changeType:1})})})):(h(),I(D,{key:1,type:"info",plain:"",icon:"Minus",onClick:te(()=>{e.attachPrice.splice(V,1)},["prevent"])},null,8,["onClick"]))])]),_:2},1024)):R("",!0)],64))),128))]),_:1}),i(f,{"content-position":"left"},{default:c(()=>[Bl]),_:1}),i(B,{span:20,offset:2},{default:c(()=>[(h(!0),E(x,null,q(e.attachPrice,(u,V)=>(h(),E(x,{key:V},[u.changeType===-1?(h(),I(y,{key:0,label:"折扣"},{default:c(()=>[k("div",xl,[k("div",null,[i(b,{modelValue:u.text,"onUpdate:modelValue":T=>u.text=T,placeholder:"例如：提前预定"},null,8,["modelValue","onUpdate:modelValue"])]),k("div",null,[i(b,{type:"number",modelValue:u.price,"onUpdate:modelValue":T=>u.price=T,placeholder:u.priceType==1?"设置比例":"设置金额"},{append:c(()=>[i(Y,{modelValue:u.priceType,"onUpdate:modelValue":T=>u.priceType=T,placeholder:"",style:{width:"60px"}},{default:c(()=>[i(N,{label:"%",value:1}),i(N,{label:"￥",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),V===e.attachPrice.findIndex(T=>T.changeType===-1)?(h(),I(D,{key:0,type:"info",plain:"",icon:"Plus",onClick:o[12]||(o[12]=()=>{e.attachPrice.push({text:"",price:"",priceType:1,changeType:-1})})})):(h(),I(D,{key:1,type:"info",plain:"",icon:"Minus",onClick:te(()=>{e.attachPrice.splice(V,1)},["prevent"])},null,8,["onClick"]))])]),_:2},1024)):R("",!0)],64))),128))]),_:1}),i(f,{"content-position":"left"},{default:c(()=>[Ol]),_:1}),i(B,{span:20,offset:2},{default:c(()=>[i(y,{label:"一期款"},{default:c(()=>[i(b,{type:"number",modelValue:e.payFirst,"onUpdate:modelValue":o[13]||(o[13]=u=>e.payFirst=u)},{prepend:c(()=>[K("合同签订后")]),append:c(()=>[K("个自然日")]),_:1},8,["modelValue"])]),_:1}),i(y,{label:"尾款及全款"},{default:c(()=>[i(b,{type:"number",modelValue:e.payFinal,"onUpdate:modelValue":o[14]||(o[14]=u=>e.payFinal=u)},{prepend:c(()=>[K("合同签订后")]),append:c(()=>[K("个自然日")]),_:1},8,["modelValue"])]),_:1})]),_:1}),k("div",Kl,[i(D,{type:"primary",onClick:j},{default:c(()=>[K("保存")]),_:1}),i(D,{onClick:o[15]||(o[15]=u=>d.$router.go(-1))},{default:c(()=>[K("取消")]),_:1})])]),_:1},8,["model"])}}}),ka=Wt(Rl,[["__scopeId","data-v-63f3e787"]]);export{ka as default};
