import{d as F,t as _,b,X as n,Z as r,$ as e,i as a,J as C,am as M,a7 as u,o as s,Y as o,h as f,ak as h,a2 as U,a3 as X}from"./index-CsSJFrlK.js";import{E as j}from"./image-viewer-CvjPvmmc.js";import{E as q,a as J}from"./table-column-Kv_Pind5.js";import"./checkbox-DcxHBF5s.js";/* empty css                */import"./popper-B2Vb2gTZ.js";import"./scrollbar-CZuRCcqh.js";import{E as O}from"./button-BUZlkGEX.js";import"./tag-DY-B5aln.js";import{b as $}from"./index-CMA0sFEQ.js";import{o as Y,i as Z,p as R}from"./index-C6oKubHO.js";import{_ as G,a as H,b as K}from"./Invoicing.vue_vue_type_script_setup_true_lang-Lerl7jlt.js";import{_ as L}from"./ApplyInvoice.vue_vue_type_script_setup_true_lang-C_WDd5TS.js";import{_ as Q}from"./EditPayment.vue_vue_type_script_setup_true_lang-BBVW_F_z.js";/* empty css                *//* empty css                    *//* empty css              *//* empty css                */import{E as y}from"./index-DzoSwmyB.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DpwNVV4c.js";import"./use-form-item-DnM4c4f2.js";import"./event-BB_Ol6Sd.js";import"./scroll-0bU1GjN2.js";import"./_initCloneObject-CsDQaSOx.js";import"./isEqual-CvxtaMY2.js";import"./focus-trap-eCW7AxRS.js";import"./progress-CCX5thEY.js";import"./cloneDeep-DWDabbLA.js";import"./_baseClone-BroCRn3i.js";import"./index-C8AcPPwL.js";import"./dialog-C9HnpYCV.js";import"./index-CphHqUT0.js";import"./vnode-BI2wCGRQ.js";import"./refs-BDtf1moo.js";import"./form-item-BYlSGAvh.js";import"./castArray-P7DQA2s2.js";/* empty css                    */import"./radio-CHHmYjEW.js";import"./rules-F8IXRWD9.js";import"./row-XPGADbjC.js";import"./col-DBwSDq1E.js";import"./date-picker-VYP7e2zA.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./arrays-6TrVLtTe.js";import"./index-CYfKiZgk.js";import"./select-3kccdXdW.js";import"./aria-KgdLjl5h.js";import"./validator-qxK2KuRl.js";const k=v=>(U("data-v-f085a1ee"),v=v(),X(),v),ee=k(()=>n("div",null,"详情",-1)),te=k(()=>n("div",{class:"title"},"展位订单",-1)),ie={class:"info"},ae={class:"table"},oe=k(()=>n("div",{class:"title"},"到款详情",-1)),le={class:"table"},re=k(()=>n("div",{class:"title"},"发票详情",-1)),ne={class:"table"},pe={key:0},de=F({__name:"BoothDetail",setup(v){const x=M(),S=_(x.query.id),D=_(x.name),T=_(null),I=_(null),B=_(null),E=_(null),l=_({brand:[],payment:[],invoice:[]}),m=()=>{D.value==="FinancesOrderDetail"?Y.getDetail({id:S.value}).then(p=>{p.code===0?l.value=p.data:u.error(p.msg)}):$.getDetail({id:S.value}).then(p=>{p.code===0?l.value=p.data:u.error(p.msg)})},N=p=>{y.confirm("是否确认要撤销订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{$.revoke({id:p}).then(d=>{d.code===0?(u.success("撤销成功"),m()):u.error(d.msg)})}).catch(()=>{})},V=p=>{y.confirm("是否确认要删除发票?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Z.del({id:p}).then(d=>{d.code===0?(u.success("删除成功"),m()):u.error(d.msg)})}).catch(()=>{})},A=p=>{y.confirm("确定撤销？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{R.revoke({id:p}).then(d=>{d.code===0?(u.success("撤销成功"),m()):u.error(d.msg)})}).catch(()=>{})},z=p=>{y.confirm("是否确认要删除付款记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{R.del({id:p}).then(d=>{d.code===0?(u.success("删除成功"),m()):u.error(d.msg)})}).catch(()=>{})};return m(),(p,d)=>{const i=J,c=O,g=q,P=j;return s(),b(C,null,[n("div",null,[ee,n("div",null,[te,n("div",ie,[n("span",null,"订单编号："+r(l.value.orderCode),1),n("span",null,"企业名称："+r(l.value.exhibitorName),1),n("span",null,"参展品牌："+r(l.value.brand.join("，")),1),n("span",null,"订单状态："+r({0:"已撤销",1:"已完成"}[l.value.orderStatus]),1),n("span",null,"订单生成时间："+r(l.value.orderTime),1),n("span",null,"下单人："+r(l.value.authUser),1),n("span",null,"对应销售："+r(l.value.clueUser),1)]),n("div",ae,[e(g,{data:[l.value],border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:a(()=>[e(i,{prop:"exhibitionName",label:"项目名称","min-width":"120"}),e(i,{prop:"hallCode",label:"展馆号"}),e(i,{prop:"positionCode",label:"展位号"}),e(i,{prop:"area",label:"面积"}),e(i,{prop:"length",label:"展位尺寸","min-width":"120"},{default:a(t=>[o(r(t.row.length)+" X "+r(t.row.width),1)]),_:1}),e(i,{prop:"num",label:"展位数量","min-width":"120"}),e(i,{prop:"product",label:"产品名称","min-width":"120"}),e(i,{prop:"unitPrice",label:"单价"}),e(i,{prop:"orderPrice",label:"最终金额","min-width":"120"}),e(i,{prop:"costPrice",label:"订单原价","min-width":"120"}),e(i,{prop:"discountPrice",label:"优惠(折扣)金额","min-width":"120"}),e(i,{prop:"addPrice",label:"加收金额","min-width":"120"}),e(i,{prop:"payType",label:"付款方式","min-width":"120"},{default:a(t=>[o(r({1:"全款",2:"分期"}[t.row.payType]),1)]),_:1}),e(i,{prop:"contractStatus",label:"合同状态","min-width":"120"},{default:a(t=>[o(r(["未签约","已签约","已回执(电子)","已回执(纸质)"][t.row.contractStatus]),1)]),_:1}),e(i,{prop:"payStatus",label:"付款状态","min-width":"120"},{default:a(t=>[o(r(["未付款","部分付款","已付款"][t.row.payStatus]),1)]),_:1}),e(i,{prop:"receivedPrice",label:"到款金额","min-width":"120"}),e(i,{prop:"notReceivedPrice",label:"未到款金额","min-width":"120"}),e(i,{prop:"invoiceStatus",label:"发票状态","min-width":"120"},{default:a(t=>[o(r(["未申请","待开票","部分开票","已开票"][t.row.invoiceStatus]),1)]),_:1}),e(i,{prop:"remark",label:"备注"}),e(i,{fixed:"right",label:"操作",width:"200"},{default:a(t=>[l.value.orderStatus===1?(s(),f(c,{key:0,link:"",type:"danger",onClick:d[0]||(d[0]=w=>N(l.value.id))},{default:a(()=>[o("撤销")]),_:1})):l.value.orderStatus===0?(s(),f(c,{key:1,link:"",type:"",disabled:""},{default:a(()=>[o("已撤销")]),_:1})):h("",!0)]),_:1})]),_:1},8,["data"])]),oe,n("div",le,[e(g,{data:l.value.payment,border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:a(()=>[e(i,{prop:"code",label:"录款编号","min-width":"120"}),e(i,{prop:"payCompany",label:"付款公司","min-width":"120"}),e(i,{prop:"payType",label:"到款类型","min-width":"120"},{default:a(t=>[o(r({1:"预定金",2:"首款",3:"二次款",4:"尾款",5:"转款"}[t.row.payType]),1)]),_:1}),e(i,{prop:"payPrice",label:"到款金额","min-width":"120"}),e(i,{prop:"payTime",label:"到款时间","min-width":"120"}),e(i,{prop:"receiveAccount",label:"收款账户","min-width":"120"}),e(i,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:a(t=>[t.row.payImg?(s(),f(P,{key:0,style:{width:"30px",height:"30px"},src:t.row.payImg,"preview-src-list":[t.row.payImg],fit:"contain","preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])):h("",!0)]),_:1}),e(i,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:a(t=>[t.row.receiveImg?(s(),f(P,{key:0,style:{width:"30px",height:"30px"},src:t.row.receiveImg,"preview-src-list":[t.row.receiveImg],fit:"contain","preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])):h("",!0)]),_:1}),e(i,{prop:"invoiceStatus",label:"发票状态","min-width":"120"},{default:a(t=>[o(r({0:"未申请",1:"待开票",2:"已开票"}[t.row.invoiceStatus]),1)]),_:1}),e(i,{prop:"remark",label:"备注"}),l.value.orderStatus===1?(s(),f(i,{key:0,fixed:"right",label:"操作",width:"200"},{default:a(t=>[t.row.status===0?(s(),b(C,{key:0},[e(c,{link:"",type:"",disabled:""},{default:a(()=>[o("已撤销")]),_:1}),e(c,{link:"",type:"danger",onClick:w=>z(t.row.id)},{default:a(()=>[o("删除")]),_:2},1032,["onClick"])],64)):(s(),b(C,{key:1},[e(c,{link:"",type:"primary",onClick:()=>{let w={...t.row,account:t.row.receiveAccount};B.value.setEdit(w)}},{default:a(()=>[o("编辑")]),_:2},1032,["onClick"]),t.row.invoiceStatus===0?(s(),f(c,{key:0,link:"",type:"primary",onClick:w=>T.value.setApply(t.row)},{default:a(()=>[o("申请发票")]),_:2},1032,["onClick"])):h("",!0),e(c,{link:"",type:"danger",onClick:w=>A(t.row.id)},{default:a(()=>[o("撤销")]),_:2},1032,["onClick"])],64))]),_:1})):h("",!0)]),_:1},8,["data"])]),re,n("div",ne,[e(g,{data:l.value.invoice,border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:a(()=>[e(i,{prop:"code",label:"编号"}),e(i,{prop:"title",label:"发票抬头","min-width":"120"}),e(i,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),e(i,{prop:"price",label:"开票金额","min-width":"120"}),e(i,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:a(t=>[o(r({1:"电子专票",2:"电子普票"}[t.row.invoiceType]),1)]),_:1}),e(i,{prop:"contact",label:"联系人"}),e(i,{prop:"email",label:"发送邮箱","min-width":"120"}),e(i,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:a(t=>[o(r({1:"待开票",2:"已开票"}[t.row.invoiceStatus]),1)]),_:1}),e(i,{prop:"invoiceCode",label:"发票号"}),e(i,{prop:"remark",label:"备注"}),l.value.orderStatus===1?(s(),f(i,{key:0,fixed:"right",label:"操作",width:"250"},{default:a(t=>[t.row.invoiceStatus===1?(s(),f(c,{key:0,disabled:t.row.status===0,link:"",type:t.row.status===0?"":"primary",onClick:()=>E.value.openInvoiceSet(t.row)},{default:a(()=>[o("开票")]),_:2},1032,["disabled","type","onClick"])):h("",!0),e(c,{disabled:t.row.status===0,link:"",type:t.row.status===0?"":"primary"},{default:a(()=>[t.row.status===0?(s(),b("span",pe,"上传发票")):(s(),f(G,{key:1,id:t.row.id,onCallback:m},null,8,["id"]))]),_:2},1032,["disabled","type"]),e(c,{disabled:t.row.status===0,link:"",type:t.row.status===0?"":"primary",onClick:()=>{let w={...t.row,invoiceTitle:t.row.title};I.value.setEdit(w)}},{default:a(()=>[o("编辑")]),_:2},1032,["disabled","type","onClick"]),e(c,{link:"",type:"danger",onClick:w=>V(t.row.id)},{default:a(()=>[o("删除")]),_:2},1032,["onClick"])]),_:1})):h("",!0)]),_:1},8,["data"])])])]),e(L,{ref_key:"applyInvoiceRef",ref:T,onCallback:m},null,512),e(H,{ref_key:"editInvoiceRef",ref:I,onCallback:m},null,512),e(Q,{ref_key:"editPaymentRef",ref:B,onCallback:m},null,512),e(K,{ref_key:"invoicingRef",ref:E,onCallback:m},null,512)],64)}}}),lt=W(de,[["__scopeId","data-v-f085a1ee"]]);export{lt as default};
