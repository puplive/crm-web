import{d as B,l as J,e as T,o as h,f as b,P as t,R as d,a as E,F as w,W as I,S as e,w as s,Q as u,Z as R,a7 as F,_ as q,$ as W}from"./index-BOSzKbVT.js";import"./el-button-BWxuPc72.js";/* empty css                 *//* empty css                 */import{E as j,a as D}from"./el-table-column-DRDs2I9X.js";import"./el-checkbox-HwFdVWYU.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-BV42RjRI.js";import"./el-tag-CR3igpSZ.js";import{b as G}from"./index-C8wL3sc_.js";import{a as N}from"./request-BCFdPhKL.js";import{E as L}from"./index-99D_Q421.js";import{E as M}from"./index-CBfn4hJm.js";import{E as Q,a as Z}from"./index-Bv6ghFfN.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_initCloneObject-DZxmjp6G.js";import"./index-DvdfzQbF.js";import"./isArrayLikeObject-B94pMk4s.js";import"./event-BB_Ol6Sd.js";import"./isEqual-Cnxg9xpu.js";const i=_=>(q("data-v-b3f5bc2e"),_=_(),W(),_),z={class:"create-order"},A={class:"p1"},H=i(()=>t("div",{class:"p2"},"展位清单",-1)),K={class:"p3"},X={class:"p4"},Y=i(()=>t("span",null,"预定金",-1)),ee=i(()=>t("span",null,"元",-1)),ae=i(()=>t("span",{style:{margin:"0 10px 0 40px"}},"是否冲抵展位费",-1)),oe=i(()=>t("span",{style:{"margin-left":"10px"}},"%",-1)),te={style:{"text-align":"center",padding:"20px"}},le=B({__name:"CreateOrder",setup(_){const y=R(),f=F(),S=f.query.companyName,c=J({});c.value=JSON.parse(f.query.data);const O={1:"%",2:"￥"},v=a=>{let p=[];return a.forEach(l=>{let n=JSON.parse(l);p.push(n.price+O[n.unit])}),p.join("，")},C=T(()=>a=>{let p=a.finalPrice;return a.isOffset===1&&(p=p-a.deposit),a.payType===2&&(p=p*a.ratio/100),Number(p.toFixed(2))}),P=()=>{let a=JSON.parse(JSON.stringify(c.value)),p=a.add.map(n=>JSON.parse(n)),l=a.discount.map(n=>JSON.parse(n));a.add=p,a.discount=l,G.create(a).then(n=>{n.code===0?(N.success("提交成功"),y.push({name:"Will"})):N.error(n.msg)})},U=()=>{y.go(-1)};return(a,p)=>{const l=j,n=D,V=M,m=Q,x=Z,g=L;return h(),b("div",z,[t("div",A,d(E(f).query.exhibitionName),1),H,(h(!0),b(w,null,I(c.value.position,(o,k)=>(h(),b("div",{key:k,class:"item"},[e(n,{data:[o],border:""},{default:s(()=>[e(l,{prop:"name",label:"企业名称"},{default:s(r=>[u(d(E(S)),1)]),_:1}),e(l,{prop:"companyBrand",label:"参展品牌"}),e(l,{prop:"hallCode",label:"展馆号"}),e(l,{prop:"positionCode",label:"展位号"}),e(l,{prop:"product",label:"产品名称"}),e(l,{prop:"unitPrice",label:"单价"}),e(l,{prop:"area",label:"面积"}),e(l,{prop:"discount",label:"折扣"},{default:s(r=>[u(d(v(c.value.discount)),1)]),_:1}),e(l,{prop:"add",label:"加收"},{default:s(r=>[u(d(v(c.value.add)),1)]),_:1})]),_:2},1032,["data"]),t("div",K,[t("span",null,"订单原价："+d(o.costPrice),1),t("span",null,"最终金额："+d(o.finalPrice),1),t("span",null,"待支付金额："+d(C.value(o)),1),t("span",null,"优惠金额："+d(o.discountPrice),1),t("span",null,"加收金额："+d(o.addPrice),1)]),t("div",X,[Y,e(V,{modelValue:o.deposit,"onUpdate:modelValue":r=>o.deposit=r,placeholder:"请输入金额",style:{width:"120px",margin:"0 10px 0 10px"}},null,8,["modelValue","onUpdate:modelValue"]),ee,ae,e(x,{modelValue:o.isOffset,"onUpdate:modelValue":r=>o.isOffset=r},{default:s(()=>[e(m,{value:1},{default:s(()=>[u("是")]),_:1}),e(m,{value:2},{default:s(()=>[u("否")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(x,{modelValue:o.payType,"onUpdate:modelValue":r=>o.payType=r,style:{margin:"0 10px 0 40px"}},{default:s(()=>[e(m,{value:1},{default:s(()=>[u("全款")]),_:1}),e(m,{value:2},{default:s(()=>[u("分期")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(V,{modelValue:o.ratio,"onUpdate:modelValue":r=>o.ratio=r,placeholder:"分期比例",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),oe])]))),128)),t("div",te,[e(g,{type:"primary",onClick:P},{default:s(()=>[u("提交订单")]),_:1}),e(g,{type:"",onClick:U},{default:s(()=>[u("返回")]),_:1})])])}}}),Se=$(le,[["__scopeId","data-v-b3f5bc2e"]]);export{Se as default};
