import{d as T,s as k,l as p,o as z,f as S,S as e,P as u,w as n,Q as g}from"./index-CeUaYvVA.js";import{E as B}from"./el-pagination-D2v53lHM.js";/* empty css                 */import"./el-tag-Bffi55J-.js";/* empty css                  */import"./el-scrollbar-B3r7vdR_.js";import{E as P,a as N}from"./el-table-column-CNVENKfm.js";import"./el-checkbox-P28d__VQ.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-button-CG_o-Lai.js";import{T as R}from"./index-jtmw3YBc.js";import{a as m}from"./index-DMP8uAsi.js";/* empty css                   *//* empty css                       *//* empty css                   */import{E as r}from"./request-BYjuyoE7.js";import{E as D}from"./index-Yhf9aIxX.js";import{E as U}from"./index-Bd0HIxHa.js";import"./index-iYWA_S4l.js";import"./index-BKFa2Ewl.js";import"./index-nNlqqqFz.js";import"./typescript-CTRgrCvb.js";import"./event-BB_Ol6Sd.js";import"./isEqual-DTRV5mK6.js";import"./_initCloneObject-1jg3Pr7d.js";import"./aria-BUADUvnR.js";import"./scroll-DsbyhrQW.js";import"./castArray-ta2Sfc5g.js";import"./isArrayLikeObject-CV9pJG-9.js";/* empty css                     *//* empty css                                                              *//* empty css                       *//* empty css                 *//* empty css                          */import"./index-CQnDbio0.js";import"./_baseClone-C9EZC_0P.js";import"./index-Bc-gljCP.js";import"./index-DrL6iWLx.js";import"./arrays-6TrVLtTe.js";import"./index-C_90W4f6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CT8zzouX.js";import"./vnode-Dc4cRWui.js";import"./aria-KgdLjl5h.js";import"./validator-D8qVTIjr.js";const V={class:"s-flex-col",style:{height:"100%"}},F={class:"s-table-operations"},G={class:"s-flex-auto",style:{"min-height":"0"}},L={class:"s-table-pagination"},Rt=T({__name:"Shared",setup(M){const i=k({page:1,perPage:10}),h=p(0),f=p({}),_=p([]),c=p(null),b=p([]),w=t=>{f.value=t,i.page=1,l()},l=async()=>{m.getList({status:3,...i,...f.value}).then(t=>{t.code===0&&(_.value=t.data.data,h.value=t.data.total)})},v=t=>{m.getClues({id:t}).then(o=>{o.code===0?(r.success("领取成功"),l()):r.error(o.msg)})},x=()=>{let t=c.value.getSelectionRows().map(o=>o.id);if(t.length===0){r.warning("请选择需要领取的线索");return}v(t)},C=()=>{let t=c.value.getSelectionRows().map(o=>o.id);if(t.length===0){r.warning("请选择需要删除的线索");return}D.confirm("确定删除所选线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.del({id:t}).then(o=>{o.code===0?(r.success("删除成功"),l()):r.error(o.msg)})}).catch(()=>{})};return m.getSearchField().then(t=>{t.code===0&&(b.value=t.data)}),l(),(t,o)=>{const d=U,a=P,E=N,y=B;return z(),S("div",V,[e(R,{data:b.value,onSearch:w},null,8,["data"]),u("div",F,[e(d,{size:"small",onClick:x},{default:n(()=>[g("领取")]),_:1}),e(d,{size:"small",onClick:C},{default:n(()=>[g("删除")]),_:1})]),u("div",G,[e(E,{ref_key:"tableRef",ref:c,data:_.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:n(()=>[e(a,{type:"selection",width:"42"}),e(a,{prop:"companyName",label:"公司名称",width:"180"}),e(a,{prop:"exhibitionContact",label:"联系方式",width:"180"}),e(a,{prop:"duties",label:"职务"}),e(a,{prop:"phone",label:"电话"}),e(a,{prop:"recordTime",label:"记录时间",width:"180"}),e(a,{prop:"recordText",label:"记录内容"}),e(a,{prop:"authUser",label:"授权人"}),e(a,{fixed:"right",label:"操作",width:"120"},{default:n(s=>[e(d,{link:"",type:"primary",size:"small",onClick:Q=>v([s.row.id])},{default:n(()=>[g(" 领取 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",L,[e(y,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:h.value,"current-page":i.page,"onUpdate:currentPage":o[0]||(o[0]=s=>i.page=s),"page-size":i.perPage,"onUpdate:pageSize":o[1]||(o[1]=s=>i.perPage=s),onChange:l},null,8,["total","current-page","page-size"])])])}}});export{Rt as default};
