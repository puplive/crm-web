import{d as N,S as P,l as r,t as S,s as F,b as z,O as s,R as e,i as p,F as D,o as w,P as m,Q as k,h as O,a3 as R}from"./index-DZWdkJn6.js";import{E as $}from"./el-pagination-CPdwcc_K.js";/* empty css                 */import"./el-tag-B6GwHj2O.js";import"./el-select-BvOJfMdO.js";import"./el-scrollbar-DoVHh4kR.js";import"./el-popper-CPVlhyEu.js";import{E as V,a as U}from"./el-table-column-NMUgumh4.js";import"./el-checkbox-CemrzlU3.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{T as A}from"./index-x_pRII9n.js";import{_ as H}from"./ApplyInvoice.vue_vue_type_script_setup_true_lang-X_SCX2lx.js";import{a as d}from"./index-ppofkTYR.js";import{E as L}from"./ExhibitionChange-BQUYMRdi.js";/* empty css                   *//* empty css                       *//* empty css                   */import{E as M}from"./index-vEJzbOfH.js";import{c as x}from"./request-B4kjudb7.js";import{E as X}from"./index-3_76E9h5.js";import"./isEqual-DzextNFQ.js";import"./_initCloneObject-DsxSAM83.js";import"./use-form-item-BDRMOJtr.js";import"./index-B2QvJY75.js";import"./event-BB_Ol6Sd.js";import"./scroll-DsC-n4kp.js";import"./castArray-_0Lt-6bE.js";import"./el-form-item-D4S5lILt.js";import"./_baseClone-BiS3rLAT.js";/* empty css                         */import"./index-Bx6gLOHX.js";import"./refs-hISga4bm.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./el-dialog-CRtMlJYE.js";import"./index-Uy-9oN5y.js";import"./vnode-BpO-r4rD.js";import"./el-progress-Bzmm_Rm5.js";import"./cloneDeep-Ch7AI-KP.js";/* empty css                       */import"./el-radio-BTbaRYbH.js";import"./index-B2Wxlt4E.js";import"./rules-F8IXRWD9.js";import"./index-DE5quFS9.js";import"./aria-KgdLjl5h.js";import"./validator-C_1MBHBY.js";const q={class:"s-flex-col",style:{height:"100%"}},Q={class:"",style:{"margin-bottom":"10px"}},j={class:"s-flex-auto",style:{"min-height":"0"}},G={class:"s-table-pagination"},Me=N({__name:"Payment",setup(J){const u=P(),h=r(u.EXHIBITION_INFO);S(()=>u.EXHIBITION_INFO,(t,i)=>{t.id!==i.id&&(h.value=t,l())},{deep:!0});const n=F({page:1,perPage:10}),f=r(0),_=r({}),y=r([]),C=r(null),g=r([]),b=r(null),E=t=>{_.value=t,n.page=1,l()},l=async()=>{d.payment.getList({exhibitionId:h.value.id,..._.value,...n}).then(t=>{t.code===0&&(y.value=t.data.data,f.value=t.data.total)})},I=t=>{M.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{d.payment.del({id:t}).then(i=>{i.code===0?(x.success("删除成功"),l()):x.error(i.msg)})}).catch(()=>{})};return d.payment.getSearchField().then(t=>{t.code===0&&(g.value=t.data)}),l(),(t,i)=>{const o=U,c=X,T=V,B=$;return w(),z(D,null,[s("div",q,[s("div",Q,[e(L)]),e(A,{data:g.value,onSearch:E,type:"payment"},null,8,["data"]),s("div",j,[e(T,{ref_key:"tableRef",ref:C,data:y.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:p(()=>[e(o,{type:"selection",width:"42"}),e(o,{prop:"code",label:"编号",width:"180"}),e(o,{prop:"companyName",label:"企业名称","min-width":"120"}),e(o,{prop:"exhibitionName",label:"展会名称","min-width":"120"}),e(o,{prop:"positionCode",label:"展位号"}),e(o,{prop:"payCompany",label:"付款公司","min-width":"120"}),e(o,{prop:"payPrice",label:"付款金额","min-width":"120"}),e(o,{prop:"orderPrice",label:"订单金额","min-width":"120"}),e(o,{prop:"payType",label:"付款类型","min-width":"120"},{default:p(a=>[m(k({1:"预定金",2:"首款",3:"二次款",4:"尾款",5:"转款"}[a.row.payType]),1)]),_:1}),e(o,{prop:"receiveAccount",label:"收款账户","min-width":"120"}),e(o,{prop:"payTime",label:"到款时间","min-width":"120"}),e(o,{prop:"invoiceStatus",label:"发票"},{default:p(a=>[m(k({0:"未申请",1:"待开票",2:"已开票"}[a.row.invoiceStatus]),1)]),_:1}),e(o,{prop:"clueUser",label:"持有人"}),e(o,{fixed:"right",label:"操作",width:"220"},{default:p(a=>[e(c,{link:"",type:"primary",onClick:v=>t.$router.push({name:"FinancesPaymentDetail",query:{id:a.row.id}})},{default:p(()=>[m("详情")]),_:2},1032,["onClick"]),a.row.invoiceStatus===0?(w(),O(c,{key:0,link:"",type:"primary",onClick:v=>b.value.setApply(a.row)},{default:p(()=>[m("申请发票")]),_:2},1032,["onClick"])):R("",!0),e(c,{link:"",type:"danger",onClick:v=>I(a.row.id)},{default:p(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),s("div",G,[e(B,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:f.value,"current-page":n.page,"onUpdate:currentPage":i[0]||(i[0]=a=>n.page=a),"page-size":n.perPage,"onUpdate:pageSize":i[1]||(i[1]=a=>n.perPage=a),onChange:l},null,8,["total","current-page","page-size"])])]),e(H,{ref_key:"applyInvoiceRef",ref:b,onCallback:l},null,512)],64)}}});export{Me as default};
