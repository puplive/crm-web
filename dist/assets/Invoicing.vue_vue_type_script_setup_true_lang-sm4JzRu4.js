import{d as w,t as _,o as h,h as k,i as t,Y as p,a7 as r,y as U,X as y,$ as l}from"./index-UrH41wnE.js";import{E as D}from"./progress-DSnbHOYW.js";import{i as I}from"./index-C-ALpnsq.js";import{u as N}from"./index-Bx9ssuNN.js";/* empty css                */import{E as C}from"./dialog-CxNRJ6wC.js";/* empty css                */import{E as x}from"./button-BfuIu6BZ.js";import{a as F,E as $}from"./form-item-DmcBtvHK.js";/* empty css              */import{E as B}from"./index-D-t0MESe.js";/* empty css                    */import{E as S,a as M}from"./radio-D6SzgHN2.js";const Z=w({__name:"UpInvoice",props:["id","disabled"],emits:["callback"],setup(E,{emit:V}){const b=E,e=_(!1),u=_(null),v=m=>m.size/1024/1024>3?(r.error("文件大小不能超过 3MB!"),!1):!0,g=m=>{e.value=!0;let s=new FormData;return s.append("upload",m.file),new Promise((f,i)=>{N(s).then(d=>{d.code===0?f(d.data):(i(d),r.error(d.msg),u.value.clearFiles()),e.value=!1}).catch(d=>{i(d),r.error("上传失败"),u.value.clearFiles(),e.value=!1})})},a=m=>{I.uploadInvoice({id:b.id,url:m}).then(s=>{s.code===0?(r.success("上传成功"),o("callback")):r.error(s.msg)})},o=V;return(m,s)=>{const f=D;return h(),k(f,{ref_key:"uploadRef",ref:u,style:{},"show-file-list":!1,"on-success":(i,d,n)=>{a(i.url)},"before-upload":v,"http-request":g},{default:t(()=>[p(" 上传发票 ")]),_:1},8,["on-success"])}}}),T={class:"dialog-footer"},j=w({__name:"EditInvoice",emits:["callback"],setup(E,{expose:V,emit:b}){_(!1),_(null);const e=U({show:!1,form:{id:"",title:"",socialCode:"",contact:"",phone:"",email:""}}),u=()=>{I.edit(e.form).then(a=>{a.code===0?(r.success("修改成功"),e.show=!1,g("callback")):r.error(a.msg)})},v=a=>{e.show=!0,e.form.id=a.id,e.form.title=a.invoiceTitle,e.form.socialCode=a.socialCode,e.form.contact=a.contact,e.form.phone=a.phone,e.form.email=a.email},g=b;return V({setEdit:v}),(a,o)=>{const m=B,s=F,f=$,i=x,d=C;return h(),k(d,{modelValue:e.show,"onUpdate:modelValue":o[6]||(o[6]=n=>e.show=n),title:"编辑发票",width:"500",draggable:""},{footer:t(()=>[y("div",T,[l(i,{onClick:o[5]||(o[5]=n=>e.show=!1)},{default:t(()=>[p("取消")]),_:1}),l(i,{type:"primary",onClick:u},{default:t(()=>[p("确定")]),_:1})])]),default:t(()=>[l(f,{ref:"willFormRef",model:e.form,"label-width":"auto","label-position":"left"},{default:t(()=>[l(s,{label:"发票抬头"},{default:t(()=>[l(m,{modelValue:e.form.title,"onUpdate:modelValue":o[0]||(o[0]=n=>e.form.title=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(s,{label:"社会信用代码"},{default:t(()=>[l(m,{modelValue:e.form.socialCode,"onUpdate:modelValue":o[1]||(o[1]=n=>e.form.socialCode=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(s,{label:"联系人"},{default:t(()=>[l(m,{modelValue:e.form.contact,"onUpdate:modelValue":o[2]||(o[2]=n=>e.form.contact=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(s,{label:"手机号"},{default:t(()=>[l(m,{modelValue:e.form.phone,"onUpdate:modelValue":o[3]||(o[3]=n=>e.form.phone=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(s,{label:"邮箱"},{default:t(()=>[l(m,{modelValue:e.form.email,"onUpdate:modelValue":o[4]||(o[4]=n=>e.form.email=n),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),q={class:"dialog-footer"},ee=w({__name:"Invoicing",emits:["callback"],setup(E,{expose:V,emit:b}){_(!1),_(null);const e=U({show:!1,form:{id:"",code:"",type:1}}),u=()=>{I.openInvoice(e.form).then(a=>{a.code===0?(r.success("成功"),e.show=!1,g("callback")):r.error(a.msg)})},v=a=>{e.show=!0,e.form.id=a.id,e.form.code="",e.form.type=1},g=b;return V({openInvoiceSet:v}),(a,o)=>{const m=S,s=M,f=F,i=B,d=$,n=x,R=C;return h(),k(R,{modelValue:e.show,"onUpdate:modelValue":o[3]||(o[3]=c=>e.show=c),title:"开票",width:"500",draggable:""},{footer:t(()=>[y("div",q,[l(n,{onClick:o[2]||(o[2]=c=>e.show=!1)},{default:t(()=>[p("取消")]),_:1}),l(n,{type:"primary",onClick:u},{default:t(()=>[p("确定")]),_:1})])]),default:t(()=>[l(d,{ref:"",model:e.form,"label-width":"auto","label-position":"left"},{default:t(()=>[l(f,{label:"发票类型"},{default:t(()=>[l(s,{modelValue:e.form.type,"onUpdate:modelValue":o[0]||(o[0]=c=>e.form.type=c)},{default:t(()=>[l(m,{value:1},{default:t(()=>[p("电子专票")]),_:1}),l(m,{value:2},{default:t(()=>[p("电子普票")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"发票号"},{default:t(()=>[l(i,{modelValue:e.form.code,"onUpdate:modelValue":o[1]||(o[1]=c=>e.form.code=c),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{Z as _,j as a,ee as b};
