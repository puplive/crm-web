import{d as q,s as E,l as d,o as N,f as O,P as b,S as e,w as a,Q as i,a as j,aE as G,F as Q,Z,a8 as A}from"./index-BcUC0sDV.js";import{E as H}from"./el-dialog-CutjZf8L.js";import"./el-overlay-9cAl29CD.js";import{E as J}from"./el-progress-Dsr1hyJV.js";import{E as K,a as W}from"./el-radio-CAJOd0xn.js";import{E as X}from"./el-pagination-BA623ZTz.js";import"./el-input-CcUaxfjM.js";import"./el-tag-C8ilQtop.js";import"./el-select-CaF897-I.js";import"./el-scrollbar-CPGzXslm.js";import{E as Y,a as ee}from"./el-table-o6ZnMJ6q.js";import"./el-checkbox-C88Dzrkj.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                        */import{E as te}from"./el-button-VGFtfg9t.js";import{T as oe}from"./index-CGtHBQM3.js";import{b as h,g as ae}from"./index-DHg2I1DM.js";import{u as le}from"./index-DSOh7pn-.js";import{E as re}from"./el-message-box-g36UM99r.js";/* empty css                   */import{E as u}from"./request-LfwzVzzV.js";import"./index-tw6LFjf8.js";import"./index-31U4gXR_.js";import"./scroll-BDce9M3E.js";import"./vnode-kX9WXZTf.js";import"./typescript-BxLz-5vR.js";import"./cloneDeep-D7u7y-4j.js";import"./el-form-item-CQBJaBhb.js";import"./_initCloneObject-D14UNdyY.js";import"./isEqual-DmOeXhXa.js";import"./isArrayLikeObject-7jkHxvsY.js";import"./el-date-picker-DW29CK0j.js";import"./arrays-6TrVLtTe.js";/* empty css                          */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./aria-KgdLjl5h.js";import"./validator-vdBA22Mw.js";const ie={class:"s-table-operations"},ne={class:"s-table-pagination"},Ze=q({__name:"Booth",setup(se){Z();const x=A(),m=E({page:1,perPage:10}),v=d(0),y=d({}),k=x.query.id,_=d([]),z=d(null),g=d([]),n=E({show:!1,file:"",type:1,orderId:0}),B=t=>{y.value=t,m.page=1,c()},c=()=>{h.getList({...m,...y.value}).then(t=>{t.code===0?(_.value=t.data.data,v.value=t.data.total):_.value=[{}]})},R=t=>{re.confirm("是否确认要撤销订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.revoke({id:t}).then(o=>{o.code===0?(u.success("撤销成功"),c()):u.error(o.msg)})}).catch(()=>{})},w=()=>{},T=d(null);let p=d([]);const V=t=>{let o=t[0];p.value=[{name:o.name,size:o.size,uid:o.uid,status:"ready",percentage:0,raw:o}]},P=t=>{const o=t.size/1024/1024<3;return o||u.error("文件大小不能超过 3MB!"),o},U=t=>{n.show=!0,n.type=1,n.orderId=t,n.file="",p.value=[]},D=()=>{if(p.value.length===0){u.warning("请选择合同文件");return}let t=new FormData;t.append("upload",p.value[0].raw),le(t).then(o=>{o.code===0?n.show=!1:u.error(o.msg)})},$=t=>{};return h.getSearchField().then(t=>{t.code===0&&(g.value=t.data)}),ae({clueId:k,exhibitionId:k}).then(t=>{t.code===0&&(g.value=t.data)}),c(),(t,o)=>{const s=te,r=Y,F=ee,I=X,C=K,L=W,S=J,M=H;return N(),O(Q,null,[b("div",null,[e(oe,{data:g.value,onSearch:B},null,8,["data"]),b("div",ie,[e(s,{size:"small",onClick:w},{default:a(()=>[i("批量下载合同")]),_:1}),e(s,{size:"small",onClick:w},{default:a(()=>[i("导出")]),_:1})]),e(F,{ref_key:"tableRef",ref:z,data:_.value,border:"","table-layout":"fixed","max-height":"300","header-row-class-name":"s-table-header"},{default:a(()=>[e(r,{type:"selection",width:"50"}),e(r,{prop:"id",label:"ID",width:"50"}),e(r,{prop:"hallCode",label:"展馆号"}),e(r,{prop:"positionCode",label:"展位号"}),e(r,{prop:"standardPrice",label:"标摊/元"}),e(r,{prop:"specialPrice",label:"特装/元"}),e(r,{prop:"specialUnit",label:"特装/㎡/个"}),e(r,{prop:"length",label:"长"}),e(r,{prop:"width",label:"宽"}),e(r,{prop:"remark",label:"备注"}),e(r,{prop:"exhibitor",label:"参展商"}),e(r,{prop:"createTime",label:"创建时间"}),e(r,{fixed:"right",label:"操作",width:"300"},{default:a(l=>[e(s,{link:"",type:"primary",size:"small",onClick:f=>t.$router.push({name:"OrderBoothDetail",query:{id:l.row.id}})},{default:a(()=>[i("详情")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:f=>t.$router.push({name:"ContractTemplates",query:{id:l.row.id}})},{default:a(()=>[i("签订合同")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:f=>U(l.row.id)},{default:a(()=>[i("上传合同")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:f=>$(l.row.id)},{default:a(()=>[i("录入到款")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:f=>R(l.row.id)},{default:a(()=>[i("撤销")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),b("div",ne,[e(I,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:v.value,"current-page":m.page,"onUpdate:currentPage":o[0]||(o[0]=l=>m.page=l),"page-size":m.perPage,"onUpdate:pageSize":o[1]||(o[1]=l=>m.perPage=l),onChange:c},null,8,["total","current-page","page-size"])])]),e(M,{modelValue:n.show,"onUpdate:modelValue":o[5]||(o[5]=l=>n.show=l),title:"上传合同",width:"400"},{footer:a(()=>[e(s,{type:"primary",onClick:D},{default:a(()=>[i("确定")]),_:1}),e(s,{onClick:o[4]||(o[4]=l=>n.show=!1)},{default:a(()=>[i("取消")]),_:1})]),default:a(()=>[e(L,{modelValue:n.type,"onUpdate:modelValue":o[2]||(o[2]=l=>n.type=l)},{default:a(()=>[e(C,{value:1},{default:a(()=>[i("电子合同")]),_:1}),e(C,{value:2},{default:a(()=>[i("纸质合同")]),_:1})]),_:1},8,["modelValue"]),e(S,{ref_key:"uploadRef",ref:T,"auto-upload":!1,limit:1,"before-upload":P,"on-exceed":V,"file-list":j(p),"onUpdate:fileList":o[3]||(o[3]=l=>G(p)?p.value=l:p=l),style:{"margin-top":"10px"}},{default:a(()=>[e(s,{size:"small",type:"primary"},{default:a(()=>[i("点击上传")]),_:1})]),_:1},8,["file-list"])]),_:1},8,["modelValue"])],64)}}});export{Ze as default};
