import{d as T,l as r,o as B,f as N,P as u,R as S,a as q,S as t,w as a,Q as i,F as P,Z as U,a8 as z}from"./index-B51ZjI-P.js";import{E as A}from"./el-dialog-DkbGBuCA.js";import"./el-overlay-BojN6VgD.js";import{b as M,E as Q,a as Z,c as j}from"./el-input-CF6DOVry.js";import{E as G,a as H}from"./el-table-column-C6vxUn7b.js";import"./el-checkbox-BpX9YOjS.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-BCNPLyH0.js";import"./el-tag-DzL8Udk6.js";import{a as f}from"./index-8tlgTKd_.js";/* empty css                   */import{E as m}from"./index-BaJ0dyKc.js";import"./index-zV6_ul5o.js";import"./vnode-Cb601ozU.js";import"./isArrayLikeObject-CsjL7c09.js";import"./isEqual-BAmX46RD.js";import"./request-yC8UVKn-.js";const J={class:""},K={class:"s-top_bar",style:{"margin-bottom":"10px"}},L={style:{"margin-right":"20px"}},O={class:"s-table-operations"},W={class:"dialog-footer"},ve=T({__name:"FieldDetail",setup(X){U();const _=z(),C=_.query.title,v=_.query.id,k=r([]),E=r(null),s=r(!1),h=r("输入名称"),c=r(!1),l=r({id:"",name:"",fieldId:v,pid:""}),y=e=>{c.value=!1,s.value=!0,l.value.id=e.id,l.value.name="",l.value.pid=e.id},w=e=>{c.value=!0,s.value=!0,l.value.id=e.id,l.value.name=e.name},V=()=>{c.value?f.editChild({name:l.value.name,id:l.value.id}).then(e=>{e.code===0?(m.success("编辑成功"),s.value=!1,p()):m.error(e.msg)}):f.addChild({fieldId:l.value.fieldId,name:l.value.name,pid:l.value.id}).then(e=>{e.code===0?(m.success("添加成功"),s.value=!1,p()):m.error(e.msg)})},x=e=>{f.del({id:e.id}).then(o=>{o.code===0?(m.success("删除成功"),p()):m.error(o.msg)})},p=async()=>{f.getChild({fieldId:v}).then(e=>{e.code===0&&(k.value=e.data)})};return p(),(e,o)=>{const d=M,b=G,F=H,$=Q,D=Z,I=j,R=A;return B(),N(P,null,[u("div",J,[u("div",K,[u("span",L,S(q(C)),1),t(d,{type:"",onClick:o[0]||(o[0]=n=>e.$router.go(-1))},{default:a(()=>[i("返回")]),_:1})]),u("div",O,[t(d,{size:"small",icon:"Plus",onClick:o[1]||(o[1]=n=>y({}))},{default:a(()=>[i("新增")]),_:1})]),t(F,{data:k.value,"row-key":"id",border:"","tree-props":{children:"child"},"default-expand-all":""},{default:a(()=>[t(b,{prop:"name",label:"名称"}),t(b,{label:"操作",width:"180px"},{default:a(n=>[t(d,{link:"",type:"primary",onClick:g=>y(n.row)},{default:a(()=>[i("新增")]),_:2},1032,["onClick"]),t(d,{link:"",type:"primary",onClick:g=>w(n.row)},{default:a(()=>[i("编辑")]),_:2},1032,["onClick"]),t(d,{link:"",type:"danger",onClick:g=>x(n.row)},{default:a(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(R,{title:h.value,modelValue:s.value,"onUpdate:modelValue":o[4]||(o[4]=n=>s.value=n),style:{width:"400px"}},{footer:a(()=>[u("div",W,[t(d,{onClick:o[3]||(o[3]=n=>s.value=!1)},{default:a(()=>[i("取 消")]),_:1}),t(d,{type:"primary",onClick:V},{default:a(()=>[i("确 定")]),_:1})])]),default:a(()=>[t(I,{ref_key:"addformRef",ref:E,model:l.value,"label-width":"atuo"},{default:a(()=>[t(D,{label:"",prop:"name"},{default:a(()=>[t($,{modelValue:l.value.name,"onUpdate:modelValue":o[2]||(o[2]=n=>l.value.name=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],64)}}});export{ve as default};
