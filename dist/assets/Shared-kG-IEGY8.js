import{d as T,s as k,l as n,o as z,f as S,S as t,P as u,w as p,Q as g}from"./index-DSfyh7qj.js";import{E as B}from"./el-pagination-4x7X5RfY.js";import"./el-input-DQxUpFKv.js";import"./el-tag-B8NoJhAA.js";import"./el-select-CmSQ-fEx.js";import"./el-scrollbar-3Xjb0YVF.js";import{E as P,a as N}from"./el-table-column-DQ7sI2Z5.js";import"./el-checkbox-Ay2RniBl.js";import"./el-tooltip-l0sNRNKZ.js";import{E as R}from"./el-button-DtFXXT9_.js";import{T as D}from"./index-BC7wXjJr.js";import{a as c}from"./index-BmKV15GZ.js";/* empty css                   */import{E as U}from"./el-message-box-CLaqu9_a.js";import"./el-overlay-BLyRwpHF.js";import{E as i}from"./request-B1oD2Ia0.js";import"./index-CEAPH9FP.js";import"./typescript-Qg-Y0DRo.js";import"./isEqual-vPRyluBr.js";import"./index-DibT7Pck.js";import"./scroll-zA0h5opS.js";import"./el-form-item-BWN2Y97Q.js";import"./isArrayLikeObject-Drj7X30p.js";import"./el-date-picker-DeEKRfu_.js";import"./arrays-6TrVLtTe.js";import"./index-Cv6R63m-.js";import"./el-radio-BxUzKFIH.js";/* empty css                          */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./aria-KgdLjl5h.js";import"./validator-BvzPSx-J.js";import"./vnode-CWEG3rL2.js";const V={class:"s-flex-col",style:{height:"100%"}},F={class:"s-table-operations"},G={class:"s-flex-auto",style:{"min-height":"0"}},L={class:"s-table-pagination"},ve=T({__name:"Shared",setup(M){const l=k({page:1,perPage:10}),h=n(0),f=n({}),_=n([]),m=n(null),b=n([]),w=e=>{f.value=e,l.page=1,r()},r=async()=>{c.getList({status:3,...l,...f.value}).then(e=>{e.code!==200&&(_.value=e.data.data,h.value=e.data.total)})},v=e=>{c.getClues({id:e}).then(a=>{a.code===0?(i.success("领取成功"),r()):i.error(a.msg)})},x=()=>{let e=m.value.getSelectionRows().map(a=>a.id);if(e.length===0){i.warning("请选择需要领取的线索");return}v(e)},C=()=>{let e=m.value.getSelectionRows().map(a=>a.id);if(e.length===0){i.warning("请选择需要删除的线索");return}U.confirm("确定删除所选线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{c.del({id:e}).then(a=>{a.code===0?(i.success("删除成功"),r()):i.error(a.msg)})}).catch(()=>{})};return c.getSearchField().then(e=>{e.code===0&&(b.value=e.data)}),r(),(e,a)=>{const d=R,o=P,E=N,y=B;return z(),S("div",V,[t(D,{data:b.value,onSearch:w},null,8,["data"]),u("div",F,[t(d,{size:"small",onClick:x},{default:p(()=>[g("领取")]),_:1}),t(d,{size:"small",onClick:C},{default:p(()=>[g("删除")]),_:1})]),u("div",G,[t(E,{ref_key:"tableRef",ref:m,data:_.value,border:"","table-layout":"fixed",height:"100%","header-row-class-name":"s-table-header"},{default:p(()=>[t(o,{type:"selection",width:"50"}),t(o,{prop:"companyName",label:"公司名称",width:"180"}),t(o,{prop:"exhibitionContact",label:"联系方式",width:"180"}),t(o,{prop:"duties",label:"职务"}),t(o,{prop:"phone",label:"电话"}),t(o,{prop:"recordTime",label:"记录时间",width:"180"}),t(o,{prop:"recordText",label:"记录内容"}),t(o,{prop:"authUser",label:"授权人"}),t(o,{fixed:"right",label:"操作",width:"120"},{default:p(s=>[t(d,{link:"",type:"primary",size:"small",onClick:Q=>v([s.row.id])},{default:p(()=>[g(" 领取 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",L,[t(y,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:h.value,"current-page":l.page,"onUpdate:currentPage":a[0]||(a[0]=s=>l.page=s),"page-size":l.perPage,"onUpdate:pageSize":a[1]||(a[1]=s=>l.perPage=s),onChange:r},null,8,["total","current-page","page-size"])])])}}});export{ve as default};
