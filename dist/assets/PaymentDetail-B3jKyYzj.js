import{d as D,l as d,b as N,O as a,R as e,i,Q as p,F as A,W as V,a5 as q,o as _,P as l,h as v,a3 as y,X as z,Y as F}from"./index-B6O2tsXf.js";import{E as M,a as L}from"./el-table-column-Cr8YYE1s.js";import"./el-checkbox-D-VpUawN.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-popper--xdu7MzG.js";import"./el-scrollbar-BjDLUJ2G.js";import{E as O}from"./el-image-viewer-Bq4PnxQt.js";import"./el-tag-4jQtKt29.js";/* empty css                  */import{a as h}from"./index-aMew3xar.js";import{_ as Q,a as W,b as X}from"./Invoicing.vue_vue_type_script_setup_true_lang-BVUI8ZS3.js";import{_ as Y}from"./EditPayment.vue_vue_type_script_setup_true_lang-IhnbYX_1.js";import{_ as j}from"./ApplyInvoice.vue_vue_type_script_setup_true_lang-JhPY9oGN.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                   */import{E as G}from"./index-6lLcEqko.js";import{E as T}from"./index-O6DE3HmZ.js";import{c as w}from"./request-DQ4l-rV0.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-Dbxm_mXt.js";import"./_initCloneObject-EovVTHjR.js";import"./event-BB_Ol6Sd.js";import"./isEqual-J98i8Dj4.js";import"./index-Dk0doE_g.js";import"./scroll-BwfILaZy.js";import"./tool-BQQRKqby.js";import"./el-progress-CjQ1CI2c.js";import"./cloneDeep-CSX9aiZH.js";import"./_baseClone-C4jUf7Lq.js";import"./index-C4IaGsWB.js";import"./el-dialog-CLfLfG_a.js";import"./index-rccNJfGP.js";import"./vnode-ZfDlr55f.js";import"./refs-nKbpYYy1.js";import"./el-form-item-BhGAFkoA.js";import"./castArray-C3iL6Gum.js";/* empty css                       */import"./el-radio-BRADLnIh.js";import"./el-row-C4yEG7Qk.js";import"./el-col-DdISui4J.js";import"./el-date-picker-B6q6b3d0.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./arrays-6TrVLtTe.js";import"./index-BTfWx-kt.js";import"./el-select-CwpSPgQj.js";import"./rules-D3dZf7lU.js";import"./aria-KgdLjl5h.js";import"./validator-CZ6wKPzm.js";const b=f=>(z("data-v-892829b2"),f=f(),F(),f),J={class:"recording"},K={class:"top"},U=b(()=>a("span",{style:{"margin-right":"20px"}},"订单到款记录",-1)),Z={class:"p2"},ee=b(()=>a("div",{class:"title"},"收款记录",-1)),te={class:"table"},oe=b(()=>a("div",{class:"title"},"发票详情",-1)),ie={class:"table"},ae=D({__name:"PaymentDetail",setup(f){const $=V(),R=q(),S=d(Number(R.query.id)),r=d({invoice:[]}),m=()=>{h.payment.getDetail({id:S.value}).then(n=>{n.code===0&&(r.value=n.data)})},B=n=>{T.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.payment.del({id:n}).then(c=>{c.code===0?(w.success("删除成功"),$.back()):w.error(c.msg)})}).catch(()=>{})},P=n=>{T.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.invoice.del({id:n}).then(c=>{c.code===0?(w.success("删除成功"),getList()):w.error(c.msg)})}).catch(()=>{})},k=d(null),g=d(null),C=d(null),I=d(null);return m(),(n,c)=>{const s=G,o=L,x=O,E=M;return _(),N(A,null,[a("div",J,[a("div",K,[U,e(s,{onClick:n.$router.back},{default:i(()=>[l("返回")]),_:1},8,["onClick"])]),a("div",Z,[e(s,{link:"",type:"primary",onClick:c[0]||(c[0]=t=>n.$router.push({name:"ContractDetail",query:{orderId:r.value.orderId}}))},{default:i(()=>[l("查看合同")]),_:1}),a("span",null,"订单编号："+p(r.value.orderCode),1),a("span",null,"展位号："+p(r.value.positionCode),1),a("span",null,"面积："+p(r.value.positionArea)+"平方米",1),a("span",null,"展位数："+p(r.value.positionNum)+"个",1),a("span",null,"订单金额："+p(r.value.orderPrice)+"元",1)]),a("div",null,[ee,a("div",te,[e(E,{data:[r.value],border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:i(()=>[e(o,{prop:"code",label:"录款编号","min-width":"120"}),e(o,{prop:"payCompany",label:"付款公司","min-width":"120"}),e(o,{prop:"payType",label:"到款类型","min-width":"120"},{default:i(t=>[l(p({1:"预定金",2:"首款",3:"二次款",4:"尾款",5:"转款"}[t.row.payType]),1)]),_:1}),e(o,{prop:"payPrice",label:"到款金额","min-width":"120"}),e(o,{prop:"payTime",label:"到款时间","min-width":"120"}),e(o,{prop:"receiveAccount",label:"收款账户","min-width":"120"}),e(o,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:i(t=>[t.row.payImg?(_(),v(x,{key:0,style:{width:"30px",height:"30px"},src:t.row.payImg,"preview-src-list":[t.row.payImg],fit:"contain","preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])):y("",!0)]),_:1}),e(o,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:i(t=>[t.row.receiveImg?(_(),v(x,{key:0,style:{width:"30px",height:"30px"},src:t.row.receiveImg,"preview-src-list":[t.row.receiveImg],fit:"contain","preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])):y("",!0)]),_:1}),e(o,{prop:"invoiceStatus",label:"发票状态","min-width":"120"},{default:i(t=>[l(p({0:"未申请",1:"待开票",2:"已开票"}[t.row.invoiceStatus]),1)]),_:1}),e(o,{prop:"remark",label:"备注"}),e(o,{fixed:"right",label:"操作",width:"200"},{default:i(t=>[e(s,{link:"",type:"primary",onClick:()=>{let u={...t.row,account:t.row.receiveAccount};g.value.setEdit(u)}},{default:i(()=>[l("编辑")]),_:2},1032,["onClick"]),t.row.invoiceStatus===0?(_(),v(s,{key:0,link:"",type:"primary",onClick:u=>I.value.setApply(t.row)},{default:i(()=>[l("申请发票")]),_:2},1032,["onClick"])):y("",!0),e(s,{link:"",type:"danger",onClick:u=>B(t.row.id)},{default:i(()=>[l("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),oe,a("div",ie,[e(E,{data:r.value.invoice?[r.value.invoice]:[],border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:i(()=>[e(o,{prop:"code",label:"编号"}),e(o,{prop:"invoiceTitle",label:"发票抬头","min-width":"120"}),e(o,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),e(o,{prop:"invoicePrice",label:"开票金额","min-width":"120"}),e(o,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:i(t=>[l(p({1:"电子专票",2:"电子普票"}[t.row.invoiceType]),1)]),_:1}),e(o,{prop:"contact",label:"联系人"}),e(o,{prop:"email",label:"发送邮箱","min-width":"120"}),e(o,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:i(t=>[l(p({1:"待开票",2:"已开票"}[t.row.invoiceStatus]),1)]),_:1}),e(o,{prop:"invoiceCode",label:"发票号"}),e(o,{prop:"remark",label:"备注"}),e(o,{fixed:"right",label:"操作",width:"200"},{default:i(t=>[t.row.invoiceStatus===1?(_(),v(s,{key:0,link:"",type:"primary",onClick:()=>C.value.openInvoiceSet(t.row),style:{"margin-right":"5px"}},{default:i(()=>[l("开票")]),_:2},1032,["onClick"])):y("",!0),e(Q,{id:t.row.id,onCallback:m},null,8,["id"]),e(s,{link:"",type:"primary",onClick:u=>k.value.setEdit(t.row)},{default:i(()=>[l("编辑")]),_:2},1032,["onClick"]),e(s,{link:"",type:"danger",onClick:u=>P(t.row.id)},{default:i(()=>[l("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])]),e(W,{ref_key:"editInvoiceRef",ref:k,onCallback:m},null,512),e(Y,{ref_key:"editPaymentRef",ref:g,onCallback:m},null,512),e(X,{ref_key:"invoicingRef",ref:C,onCallback:m},null,512),e(j,{ref_key:"applyInvoiceRef",ref:I,onCallback:m},null,512)],64)}}}),tt=H(ae,[["__scopeId","data-v-892829b2"]]);export{tt as default};
