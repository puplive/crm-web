import{d as q,l as s,o as b,b as M,O as u,Q as P,e as S,R as l,i as a,P as m,h as U,W as z,F as A,Y as O,a6 as Q}from"./index-CtnNdf6I.js";import{E as W}from"./el-dialog-DEJ9dVvg.js";/* empty css                   *//* empty css                     *//* empty css                 */import{E as Y,a as j}from"./el-table-column-DHpIfOkA.js";import"./el-checkbox-C2MQbk-S.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-popper-SAL9BUsy.js";import"./el-scrollbar-Dw8Ar6kz.js";import"./el-tag-KEahQFCf.js";/* empty css                  */import{a as c}from"./index-DCjjpf25.js";/* empty css                   *//* empty css                       */import{a as d}from"./request-DHQWaQl0.js";import{E as G}from"./index-Dvqc6v-z.js";import{E as H}from"./index-PIZdvO1Z.js";import{E as J}from"./index-CjOWhDaN.js";import{E as K,a as L}from"./index-qc8ItvZn.js";import"./index-Bv0E6nsW.js";import"./index-Byn9vuEU.js";import"./use-form-item-BN_RNhUa.js";import"./scroll-BvKGa0_I.js";import"./vnode-gJ_8xiR2.js";import"./refs-ciGNFZLD.js";import"./event-BB_Ol6Sd.js";import"./_Uint8Array-BOmxGtCQ.js";import"./_initCloneObject-cQg_1Bx8.js";import"./isArrayLikeObject-BxEywAV2.js";import"./isEqual-DgFD6c0N.js";import"./rules-BWEfMqzk.js";import"./aria-KgdLjl5h.js";import"./validator-DCjROIz4.js";import"./castArray-BV9SS4mm.js";import"./_baseClone-CuiIdAb9.js";const X={class:""},Z={class:"s-top_bar",style:{"margin-bottom":"10px"}},ee={style:{"margin-right":"20px"}},te={class:"s-table-operations"},oe={class:"dialog-footer"},ze=q({__name:"FieldDetail",setup(le){O();const f=Q(),C=f.query.title,v=f.query.id,y=s(f.query.type),w=e=>e===0?!0:y.value==6||y.value==7,h=s([]),x=s(null),r=s(!1),V=s("输入名称"),_=s(!1),t=s({id:"",name:"",fieldId:v,pid:""}),k=e=>{_.value=!1,r.value=!0,t.value.id=e.id,t.value.name="",t.value.pid=e.id},B=e=>{_.value=!0,r.value=!0,t.value.id=e.id,t.value.name=e.name},F=()=>{_.value?c.editChild({name:t.value.name,id:t.value.id}).then(e=>{e.code===0?(d.success("编辑成功"),r.value=!1,p()):d.error(e.msg)}):c.addChild({fieldId:t.value.fieldId,name:t.value.name,pid:t.value.id}).then(e=>{e.code===0?(d.success("添加成功"),r.value=!1,p()):d.error(e.msg)})},T=e=>{G.confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{c.del({id:e.id}).then(o=>{o.code===0?(d.success("删除成功"),p()):d.error(o.msg)})}).catch(()=>{})},p=async()=>{c.getChild({fieldId:v}).then(e=>{e.code===0&&(h.value=e.data)})};return p(),(e,o)=>{const n=H,g=Y,$=j,D=J,I=K,R=L,N=W;return b(),M(A,null,[u("div",X,[u("div",Z,[u("span",ee,P(S(C)),1),l(n,{type:"",onClick:o[0]||(o[0]=i=>e.$router.go(-1))},{default:a(()=>[m("返回")]),_:1})]),u("div",te,[l(n,{size:"small",icon:"Plus",onClick:o[1]||(o[1]=i=>k({}))},{default:a(()=>[m("新增")]),_:1})]),l($,{data:h.value,"row-key":"id",border:"","tree-props":{children:"child"},"default-expand-all":"","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:a(()=>[l(g,{prop:"name",label:"名称"}),l(g,{label:"操作",width:"180px"},{default:a(i=>[w(i.row.pid)?(b(),U(n,{key:0,link:"",type:"primary",onClick:E=>k(i.row)},{default:a(()=>[m("新增")]),_:2},1032,["onClick"])):z("",!0),l(n,{link:"",type:"primary",onClick:E=>B(i.row)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),l(n,{link:"",type:"danger",onClick:E=>T(i.row)},{default:a(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(N,{title:V.value,modelValue:r.value,"onUpdate:modelValue":o[4]||(o[4]=i=>r.value=i),style:{width:"400px"}},{footer:a(()=>[u("div",oe,[l(n,{onClick:o[3]||(o[3]=i=>r.value=!1)},{default:a(()=>[m("取 消")]),_:1}),l(n,{type:"primary",onClick:F},{default:a(()=>[m("确 定")]),_:1})])]),default:a(()=>[l(R,{ref_key:"addformRef",ref:x,model:t.value,"label-width":"atuo"},{default:a(()=>[l(I,{label:"",prop:"name"},{default:a(()=>[l(D,{modelValue:t.value.name,"onUpdate:modelValue":o[2]||(o[2]=i=>t.value.name=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],64)}}});export{ze as default};
