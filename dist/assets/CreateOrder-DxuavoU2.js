import{d as k,l as B,c as J,b as h,O as t,Q as d,e as g,F as T,U as I,R as e,i as n,W as R,a5 as F,o as b,P as i,X as q,Y as W}from"./index-zlANHd7e.js";/* empty css                  *//* empty css                       */import{E as j,a as D}from"./el-radio-C6ZLIxe9.js";/* empty css                 */import{E as G}from"./el-input-number-Wt9jyLMX.js";import{a as L,E as M}from"./el-table-column-UtBrofRD.js";import"./el-checkbox-DR4JUmmt.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-popper-1GHiwXiB.js";import"./el-scrollbar-CPay5iue.js";import"./el-tag-DUB2I-gd.js";import{b as Q}from"./index-BOR21YN5.js";/* empty css                   */import{c as E}from"./request-TyN6Ve8j.js";import{E as X}from"./index-DYWVEy4c.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./event-BB_Ol6Sd.js";import"./use-form-item-5dcFKqpy.js";import"./index-BLcBCAsv.js";import"./index-BNv7Z_w6.js";import"./_initCloneObject-DoxQbTWm.js";import"./isEqual-CisndQCM.js";const u=m=>(q("data-v-dc92eabc"),m=m(),W(),m),z={class:"create-order"},A={class:"p1"},H=u(()=>t("div",{class:"p2"},"展位清单",-1)),K={class:"p3"},Z={class:"p4"},$=u(()=>t("span",null,"预定金",-1)),ee=u(()=>t("span",null,"元",-1)),oe=u(()=>t("span",{style:{margin:"0 10px 0 40px"}},"是否冲抵展位费",-1)),ae=u(()=>t("span",{style:{"margin-left":"10px"}},"%",-1)),te={style:{"text-align":"center",padding:"20px"}},le=k({__name:"CreateOrder",setup(m){const y=R(),f=F(),O=f.query.companyName,c=B({});c.value=JSON.parse(f.query.data);const S={1:"%",2:"￥"},v=o=>{let s=[];return o.forEach(l=>{let p=JSON.parse(l);s.push(p.price+S[p.unit])}),s.join("，")},C=J(()=>o=>{let s=o.finalPrice;return o.isOffset===1&&(s=s-o.deposit),o.payType===2&&(s=s*o.ratio/100),s<0?0:Number(s.toFixed(2))}),U=()=>{let o=JSON.parse(JSON.stringify(c.value)),s=o.add.map(p=>JSON.parse(p)),l=o.discount.map(p=>JSON.parse(p));o.add=s,o.discount=l,Q.create(o).then(p=>{p.code===0?(E.success("提交成功"),y.push({name:"Will"})):E.error(p.msg)})},P=()=>{y.go(-1)};return(o,s)=>{const l=L,p=M,x=G,_=j,V=D,N=X;return b(),h("div",z,[t("div",A,d(g(f).query.exhibitionName),1),H,(b(!0),h(T,null,I(c.value.position,(a,w)=>(b(),h("div",{key:w,class:"item"},[e(p,{data:[a],border:""},{default:n(()=>[e(l,{prop:"name",label:"企业名称","min-width":"120"},{default:n(r=>[i(d(g(O)),1)]),_:1}),e(l,{prop:"companyBrand",label:"参展品牌","min-width":"120"}),e(l,{prop:"hallCode",label:"展馆号"}),e(l,{prop:"positionCode",label:"展位号"}),e(l,{prop:"product",label:"产品名称","min-width":"120"}),e(l,{prop:"unitPrice",label:"单价"}),e(l,{prop:"area",label:"面积"}),e(l,{prop:"discount",label:"折扣"},{default:n(r=>[i(d(v(c.value.discount)),1)]),_:1}),e(l,{prop:"add",label:"加收"},{default:n(r=>[i(d(v(c.value.add)),1)]),_:1})]),_:2},1032,["data"]),t("div",K,[t("span",null,"订单原价："+d(a.costPrice),1),t("span",null,"最终金额："+d(a.finalPrice),1),t("span",null,"待支付金额："+d(C.value(a)),1),t("span",null,"优惠金额："+d(a.discountPrice),1),t("span",null,"加收金额："+d(a.addPrice),1)]),t("div",Z,[$,e(x,{modelValue:a.deposit,"onUpdate:modelValue":r=>a.deposit=r,placeholder:"请输入金额",min:0,controls:!1,style:{width:"120px",margin:"0 10px 0 10px"}},null,8,["modelValue","onUpdate:modelValue"]),ee,oe,e(V,{modelValue:a.isOffset,"onUpdate:modelValue":r=>a.isOffset=r},{default:n(()=>[e(_,{value:1},{default:n(()=>[i("是")]),_:1}),e(_,{value:2},{default:n(()=>[i("否")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(V,{modelValue:a.payType,"onUpdate:modelValue":r=>a.payType=r,style:{margin:"0 10px 0 40px"}},{default:n(()=>[e(_,{value:1},{default:n(()=>[i("全款")]),_:1}),e(_,{value:2},{default:n(()=>[i("分期")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(x,{modelValue:a.ratio,"onUpdate:modelValue":r=>a.ratio=r,placeholder:"分期比例",min:0,max:100,controls:!1,style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),ae])]))),128)),t("div",te,[e(N,{type:"primary",onClick:U},{default:n(()=>[i("提交订单")]),_:1}),e(N,{type:"",onClick:P},{default:n(()=>[i("返回")]),_:1})])])}}}),Ue=Y(le,[["__scopeId","data-v-dc92eabc"]]);export{Ue as default};
