import{d as w,l as _,o as k,h,i as t,R as l,P as p,s as C,O as x}from"./index-BzRMNBuR.js";import{E as D}from"./el-progress-BW0ap67p.js";/* empty css                  */import{i as y}from"./index-DaicyTos.js";import{u as N}from"./index-y_nFlrAC.js";/* empty css                   */import{c as d}from"./request-CCDIsiP6.js";import{E as I}from"./index-CUjtxLYC.js";import{E as F}from"./el-dialog-MTi_vgX9.js";/* empty css                   */import{a as R,E as B}from"./el-form-item-Zhm0faD3.js";/* empty css                 */import{E as $}from"./index-D4QDqFPv.js";/* empty css                       */import{E as S,a as z}from"./el-radio-CpUh-ULN.js";const ee=w({__name:"UpInvoice",props:["id"],emits:["callback"],setup(E,{emit:V}){const b=E,e=_(!1),u=_(null),v=m=>m.size/1024/1024>3?(d.error("文件大小不能超过 3MB!"),!1):!0,g=m=>{e.value=!0;let s=new FormData;return s.append("upload",m.file),new Promise((f,r)=>{N(s).then(i=>{i.code===0?f(i.data):(r(i),d.error(i.msg),u.value.clearFiles()),e.value=!1}).catch(i=>{r(i),d.error("上传失败"),u.value.clearFiles(),e.value=!1})})},a=m=>{y.uploadInvoice({id:b.id,url:m}).then(s=>{s.code===0?(d.success("上传成功"),o("callback")):d.error(s.msg)})},o=V;return(m,s)=>{const f=I,r=D;return k(),h(r,{ref_key:"uploadRef",ref:u,style:{display:"inline-block","margin-right":"5px","vertical-align":"bottom"},"show-file-list":!1,"on-success":(i,n,U)=>{a(i.url)},"before-upload":v,"http-request":g},{default:t(()=>[l(f,{link:"",type:"primary",size:"small",loading:e.value},{default:t(()=>[p("上传发票")]),_:1},8,["loading"])]),_:1},8,["on-success"])}}}),M={class:"dialog-footer"},oe=w({__name:"EditInvoice",emits:["callback"],setup(E,{expose:V,emit:b}){_(!1),_(null);const e=C({show:!1,form:{id:"",title:"",socialCode:"",contact:"",phone:"",email:""}}),u=()=>{y.edit(e.form).then(a=>{a.code===0?(d.success("修改成功"),e.show=!1,g("callback")):d.error(a.msg)})},v=a=>{e.show=!0,e.form.id=a.id,e.form.title=a.invoiceTitle,e.form.socialCode=a.socialCode,e.form.contact=a.contact,e.form.phone=a.phone,e.form.email=a.email},g=b;return V({setEdit:v}),(a,o)=>{const m=$,s=R,f=B,r=I,i=F;return k(),h(i,{modelValue:e.show,"onUpdate:modelValue":o[6]||(o[6]=n=>e.show=n),title:"编辑发票",width:"500",draggable:""},{footer:t(()=>[x("div",M,[l(r,{onClick:o[5]||(o[5]=n=>e.show=!1)},{default:t(()=>[p("取消")]),_:1}),l(r,{type:"primary",onClick:u},{default:t(()=>[p("确定")]),_:1})])]),default:t(()=>[l(f,{ref:"willFormRef",model:e.form,"label-width":"auto","label-position":"left"},{default:t(()=>[l(s,{label:"发票抬头"},{default:t(()=>[l(m,{modelValue:e.form.title,"onUpdate:modelValue":o[0]||(o[0]=n=>e.form.title=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(s,{label:"社会信用代码"},{default:t(()=>[l(m,{modelValue:e.form.socialCode,"onUpdate:modelValue":o[1]||(o[1]=n=>e.form.socialCode=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(s,{label:"联系人"},{default:t(()=>[l(m,{modelValue:e.form.contact,"onUpdate:modelValue":o[2]||(o[2]=n=>e.form.contact=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(s,{label:"手机号"},{default:t(()=>[l(m,{modelValue:e.form.phone,"onUpdate:modelValue":o[3]||(o[3]=n=>e.form.phone=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(s,{label:"邮箱"},{default:t(()=>[l(m,{modelValue:e.form.email,"onUpdate:modelValue":o[4]||(o[4]=n=>e.form.email=n),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),P={class:"dialog-footer"},le=w({__name:"Invoicing",emits:["callback"],setup(E,{expose:V,emit:b}){_(!1),_(null);const e=C({show:!1,form:{id:"",code:"",type:1}}),u=()=>{y.openInvoice(e.form).then(a=>{a.code===0?(d.success("成功"),e.show=!1,g("callback")):d.error(a.msg)})},v=a=>{e.show=!0,e.form.id=a.id,e.form.code="",e.form.type=1},g=b;return V({openInvoiceSet:v}),(a,o)=>{const m=S,s=z,f=R,r=$,i=B,n=I,U=F;return k(),h(U,{modelValue:e.show,"onUpdate:modelValue":o[3]||(o[3]=c=>e.show=c),title:"开票",width:"500",draggable:""},{footer:t(()=>[x("div",P,[l(n,{onClick:o[2]||(o[2]=c=>e.show=!1)},{default:t(()=>[p("取消")]),_:1}),l(n,{type:"primary",onClick:u},{default:t(()=>[p("确定")]),_:1})])]),default:t(()=>[l(i,{ref:"",model:e.form,"label-width":"auto","label-position":"left"},{default:t(()=>[l(f,{label:"发票类型"},{default:t(()=>[l(s,{modelValue:e.form.type,"onUpdate:modelValue":o[0]||(o[0]=c=>e.form.type=c)},{default:t(()=>[l(m,{value:1},{default:t(()=>[p("电子专票")]),_:1}),l(m,{value:2},{default:t(()=>[p("电子普票")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"发票号"},{default:t(()=>[l(r,{modelValue:e.form.code,"onUpdate:modelValue":o[1]||(o[1]=c=>e.form.code=c),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{ee as _,oe as a,le as b};
