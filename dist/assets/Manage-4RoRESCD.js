import{d as j,l as f,s as G,o as V,f as P,P as h,S as e,w as a,Q as d,F as q,W as H,a as J,Z as K,a7 as X,M as z,c as Y}from"./index-CqGmAY_u.js";import{E as ee}from"./el-dialog-v8QaKeiT.js";/* empty css                   *//* empty css                     */import{E as te}from"./el-row-BZvl9L3e.js";import{E as le}from"./el-col-bHdl6-l-.js";/* empty css                 */import"./el-tag-uPOr0Gox.js";/* empty css                  */import"./el-scrollbar-DStktWal.js";import{E as oe}from"./el-pagination-C94Vvszp.js";import{E as ae,a as re}from"./el-table-column-BN3t8Niw.js";import"./el-checkbox-BEIE1FTh.js";import"./el-tooltip-l0sNRNKZ.js";import{E as ie}from"./el-progress-DhJv_DBp.js";import"./el-button-DpzYuNCC.js";import{T as se}from"./index-BGjDof29.js";import{b as ne,a as de,c as pe,d as me,e as ue,f as fe}from"./index-C00Cj6tO.js";import{g as ce}from"./index-Yd7WEuDO.js";/* empty css                   *//* empty css                       */import{a as n}from"./request-BWe5mLiC.js";import{E as be}from"./index-D5J-_Dfe.js";import{E as he}from"./index-Bd1qaB5O.js";import{E as _e}from"./index-CN0jcStv.js";import{E as ge,a as ve}from"./index-M5aUYcP_.js";import{a as Ee,E as xe}from"./index-CFhDgrYB.js";import"./index-ChNZniro.js";import"./index-BJocUqJs.js";import"./scroll-Covgc6bg.js";import"./vnode-8cI36gNR.js";import"./refs-DIIzzgZO.js";import"./event-BB_Ol6Sd.js";import"./typescript-B9iuFu41.js";import"./_initCloneObject-BTvP7gDY.js";import"./isEqual-BCKW0y_w.js";import"./isArrayLikeObject-bNXIFdAR.js";import"./cloneDeep-CKE_w5NT.js";import"./_baseClone-CIKtdTEW.js";/* empty css                                                              *//* empty css                       *//* empty css                 *//* empty css                          */import"./index-CguX-oIt.js";import"./index-BXjaXClQ.js";import"./arrays-6TrVLtTe.js";import"./index-E146iEmP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./aria-KgdLjl5h.js";import"./validator-0OFKhMQ4.js";import"./castArray-Ds8PJccp.js";const Ve={class:"s-flex-col",style:{height:"100%"}},Ce={class:"s-table-operations"},we={class:"s-flex-auto",style:{"min-height":"0"}},ye={class:"s-table-pagination"},ke={class:"dialog-footer"},kt=j({__name:"Manage",setup(Ue){K();const c=X().query.id,v=f([]),C=f(null),_=f(null),m=f(!1),E=f(!1),o=G({id:"",exhibitionId:c,hallCode:"",positionCode:"",standardPrice:0,specialPrice:0,specialUnit:1,length:0,width:0,remark:"",exhibitor:""}),B={hallCode:[{required:!0,message:"请输入大厅号",trigger:"blur"}],positionCode:[{required:!0,message:"请输入位置号",trigger:"blur"}],standardPrice:[{required:!0,message:"请输入标准展位单价",trigger:"blur"},{validator:(l,t,r)=>{t<=0?r(new Error("不能小于0")):r()}}],specialPrice:[{required:!0,message:"请输入特装展位单价",trigger:"blur"},{validator:(l,t,r)=>{t<=0?r(new Error("不能小于0")):r()}}],specialUnit:[{required:!0,message:"请选择单位",trigger:"blur"}],length:[{required:!0,message:"请输入长度",trigger:"blur"},{validator:(l,t,r)=>{t<=0?r(new Error("必须大于0")):r()}}],width:[{required:!0,message:"请输入宽度",trigger:"blur"},{validator:(l,t,r)=>{t<=0?r(new Error("必须大于0")):r()}}],exhibitor:[{required:!0,message:"请选择展商",trigger:"blur"}]};let w=f([]);ce().then(l=>{l.code===0&&(w.value=l.data)});const D=f([]),b=()=>{ne({exhibitionId:c}).then(l=>{l.code===0?v.value=l.data:v.value=[]})},F=async l=>{E.value=!0,m.value=!0,await z(),_.value.resetFields(),o.hallCode=l.hallCode,o.positionCode=l.positionCode,o.standardPrice=l.standardPrice,o.specialPrice=l.specialPrice,o.specialUnit=l.specialUnit.indexOf("个")>-1?2:1,o.length=l.length,o.width=l.width,o.remark=l.remark,o.exhibitor=l.exhibitor,o.id=l.id},T=()=>{let l=C.value.getSelectionRows().map(t=>t.id);if(l.length===0){n.warning("请选择需要删除的数据");return}y(l)},y=l=>{be.confirm("此操作将永久删除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{de({id:l}).then(t=>{t.code===0?(n.success("删除成功"),b()):n.error(t.msg)})}).catch(()=>{})},I=async()=>{E.value=!1,m.value=!0,await z(),_.value.resetFields()},R=()=>{_.value.validate(l=>{if(l)if(E.value)pe(o).then(r=>{r.code===0?(n.success("编辑成功"),m.value=!1,b()):n.error(r.msg)});else{let{id:t,...r}=o;me(r).then(g=>{g.code===0?(n.success("新增成功"),m.value=!1,b()):n.error(g.msg)})}else return!1})},S=()=>{ue({exhibitionId:c}).then(l=>{l.code===0?(window.open(l.data.url,"_self"),n.success("导出成功")):n.error(l.msg)})},M=l=>{const t=l.size/1024/1024<3;return t||n.error("文件大小不能超过 3MB!"),t},L=l=>{const t=new FormData;t.append("file",l.file),t.append("exhibitionId",c),fe(t).then(r=>{r.code===0?(n.success("导入成功"),b()):n.error(r.msg)})},N=l=>{console.log(l)};return c&&b(),(l,t)=>{const r=he,g=ie,s=ae,O=re,$=oe,u=_e,p=ge,x=Ee,k=xe,U=le,A=te,Q=ve,W=ee;return V(),P(q,null,[h("div",Ve,[e(se,{data:D.value,onSearch:N},null,8,["data"]),h("div",Ce,[e(r,{size:"small",onClick:I},{default:a(()=>[d("新增")]),_:1}),e(g,{style:{display:"flex","margin-left":"10px","margin-right":"10px"},"show-file-list":!1,"before-upload":M,"http-request":L},{default:a(()=>[e(r,{size:"small"},{default:a(()=>[d("导入")]),_:1})]),_:1}),e(r,{size:"small",onClick:S},{default:a(()=>[d("导出")]),_:1}),e(r,{size:"small",onClick:T},{default:a(()=>[d("删除")]),_:1})]),h("div",we,[e(O,{ref_key:"tableRef",ref:C,data:v.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:a(()=>[e(s,{type:"selection",width:"42"}),e(s,{prop:"id",label:"ID",width:"50"}),e(s,{prop:"hallCode",label:"展馆号"}),e(s,{prop:"positionCode",label:"展位号"}),e(s,{prop:"standardPrice",label:"标摊/元"}),e(s,{prop:"specialPrice",label:"特装/元"}),e(s,{prop:"specialUnit",label:"特装/㎡/个"}),e(s,{prop:"length",label:"长"}),e(s,{prop:"width",label:"宽"}),e(s,{prop:"remark",label:"备注"}),e(s,{prop:"exhibitor",label:"参展商"}),e(s,{prop:"createTime",label:"创建时间"}),e(s,{fixed:"right",label:"操作",width:"120"},{default:a(i=>[e(r,{link:"",type:"primary",size:"small",onClick:Z=>F(i.row)},{default:a(()=>[d("编辑")]),_:2},1032,["onClick"]),e(r,{link:"",type:"primary",size:"small",onClick:Z=>y([i.row.id])},{default:a(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),h("div",ye,[e($,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:1e3})])]),e(W,{modelValue:m.value,"onUpdate:modelValue":t[10]||(t[10]=i=>m.value=i),title:"新增展位信息",width:"500",draggable:""},{footer:a(()=>[h("div",ke,[e(r,{onClick:t[9]||(t[9]=i=>m.value=!1)},{default:a(()=>[d("取消")]),_:1}),e(r,{type:"primary",onClick:R},{default:a(()=>[d("确定")]),_:1})])]),default:a(()=>[e(Q,{ref_key:"formRef",ref:_,model:o,rules:B,"label-width":"auto"},{default:a(()=>[e(p,{label:"展馆号",prop:"hallCode"},{default:a(()=>[e(u,{modelValue:o.hallCode,"onUpdate:modelValue":t[0]||(t[0]=i=>o.hallCode=i),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(p,{label:"展位号",prop:"positionCode"},{default:a(()=>[e(u,{modelValue:o.positionCode,"onUpdate:modelValue":t[1]||(t[1]=i=>o.positionCode=i),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(p,{label:"标准展位",prop:"standardPrice"},{default:a(()=>[e(u,{modelValue:o.standardPrice,"onUpdate:modelValue":t[2]||(t[2]=i=>o.standardPrice=i),autocomplete:"off",type:"number"},{append:a(()=>[d("元/个")]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"特装展位",prop:"specialPrice"},{default:a(()=>[e(u,{modelValue:o.specialPrice,"onUpdate:modelValue":t[4]||(t[4]=i=>o.specialPrice=i),autocomplete:"off",type:"number"},{append:a(()=>[e(k,{modelValue:o.specialUnit,"onUpdate:modelValue":t[3]||(t[3]=i=>o.specialUnit=i),placeholder:"请选择",style:{width:"120px"}},{default:a(()=>[e(x,{label:"元/㎡",value:1}),e(x,{label:"元/个",value:2})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(A,null,{default:a(()=>[e(U,{span:12},{default:a(()=>[e(p,{label:"长",prop:"length"},{default:a(()=>[e(u,{modelValue:o.length,"onUpdate:modelValue":t[5]||(t[5]=i=>o.length=i),autocomplete:"off",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(U,{span:12},{default:a(()=>[e(p,{label:"宽",prop:"width"},{default:a(()=>[e(u,{modelValue:o.width,"onUpdate:modelValue":t[6]||(t[6]=i=>o.width=i),autocomplete:"off",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{label:"备注"},{default:a(()=>[e(u,{modelValue:o.remark,"onUpdate:modelValue":t[7]||(t[7]=i=>o.remark=i),autocomplete:"off",type:"textarea"},null,8,["modelValue"])]),_:1}),e(p,{label:"参展商",prop:"exhibitor"},{default:a(()=>[e(k,{modelValue:o.exhibitor,"onUpdate:modelValue":t[8]||(t[8]=i=>o.exhibitor=i),placeholder:"请选择"},{default:a(()=>[(V(!0),P(q,null,H(J(w),i=>(V(),Y(x,{key:i.id,label:i.name,value:i.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});export{kt as default};
