import{d as L,s as b,l as w,o as M,b as A,O as _,R as e,i as t,P as p,Q as u,F as G}from"./index-BCumuH2l.js";/* empty css                 */import{E as O}from"./el-dialog-Cr31W0vf.js";/* empty css                   *//* empty css                     *//* empty css                 */import{E as Q}from"./el-pagination-D4c8cSyo.js";import"./el-tag-BkIRG4gH.js";import"./el-select-Dn8g1hD5.js";import"./el-scrollbar-DYhKSyot.js";import"./el-popper-DuA7pbMX.js";import{E as j,a as q}from"./el-table-column-BOkQkY76.js";import"./el-checkbox-CCbI2xFo.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{E as H}from"./el-image-viewer-CHpRcp5m.js";import{T as J}from"./index-DzCNvIwH.js";import{_ as K}from"./UpInvoice.vue_vue_type_script_setup_true_lang-DwJxcpkc.js";import{a as h}from"./index-zwJVtKDU.js";/* empty css                   *//* empty css                       */import{E as W}from"./index-D3W99q7A.js";import{a as g}from"./request--qZdk5mN.js";import{E as X}from"./index-CGEPfdHm.js";import{E as Y}from"./index-x58V2ps9.js";import{E as Z,a as ee}from"./index-KsNwzYtN.js";import{E as oe,a as te}from"./index-C93lHvfN.js";import"./index-BBCR1adM.js";import"./index-BNMC9-9K.js";import"./use-form-item-DPxtBdX-.js";import"./scroll-DEYraRnD.js";import"./vnode-DjHHQFRY.js";import"./refs-DC4vuWkM.js";import"./event-BB_Ol6Sd.js";import"./isEqual-Du7s0shl.js";import"./_Uint8Array-CjJrf9_z.js";import"./castArray--BTnThqL.js";import"./_initCloneObject-B8PdS-lA.js";import"./isArrayLikeObject-Y-BCkoqb.js";/* empty css                                                              *//* empty css                       *//* empty css                          */import"./index-DTTQnmv4.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./arrays-6TrVLtTe.js";import"./index-DMIrdWoP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./el-progress-BYlrxkw4.js";import"./cloneDeep-DaR3SEY2.js";import"./_baseClone-7GzUapHy.js";import"./index-OHwu8Osq.js";import"./aria-KgdLjl5h.js";import"./validator-C_mxy1pJ.js";const le={class:"s-flex-col",style:{height:"100%"}},ae=_("div",null,null,-1),ie={class:"s-flex-auto",style:{"min-height":"0"}},re={class:"s-table-pagination"},pe={class:"dialog-footer"},ne={class:"dialog-footer"},mo=L({__name:"Invoices",setup(me){const f=b({page:1,perPage:10}),y=w(0),V=w({}),C=w([]),S=w(null),E=w([]),U=a=>{V.value=a,f.page=1,m()},m=async()=>{h.invoice.getList({...V.value,...f}).then(a=>{a.code===0&&(C.value=a.data.data,y.value=a.data.total)})},z=a=>{W.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.invoice.del({id:a}).then(l=>{l.code===0?(g.success("删除成功"),m()):g.error(l.msg)})}).catch(()=>{})},i=b({show:!1,form:{id:"",title:"",socialCode:"",contact:"",phone:"",email:""}}),P=()=>{h.invoice.edit(i.form).then(a=>{a.code===0?(g.success("修改成功"),i.show=!1,m()):g.error(a.msg)})},F=a=>{i.show=!0,i.form.id=a.id,i.form.title=a.invoiceTitle,i.form.socialCode=a.socialCode,i.form.contact=a.contact,i.form.phone=a.phone,i.form.email=a.email},n=b({show:!1,form:{id:"",cose:"",type:1}}),B=()=>{h.invoice.openInvoice(n.form).then(a=>{a.code===0?(g.success("成功"),n.show=!1,m()):g.error(a.msg)})},R=a=>{n.show=!0,n.form.id=a.id,n.form.code="",n.form.type=1};return h.invoice.getSearchField().then(a=>{a.code===0&&(E.value=a.data)}),m(),(a,l)=>{const r=j,v=H,d=X,$=q,D=Q,c=Y,s=Z,x=ee,k=O,I=oe,N=te;return M(),A(G,null,[_("div",le,[ae,e(J,{data:E.value,onSearch:U},null,8,["data"]),_("div",ie,[e($,{ref_key:"tableRef",ref:S,data:C.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:t(()=>[e(r,{prop:"orderCode",label:"订单编号",width:"180"}),e(r,{prop:"companyName",label:"企业名称","min-width":"120"}),e(r,{prop:"hallCode",label:"展馆号"}),e(r,{prop:"positionCode",label:"展位号"}),e(r,{prop:"positionType",label:"展位类型","min-width":"120"},{default:t(o=>[p(u({1:"标准",2:"特装"}[o.row.positionType]),1)]),_:1}),e(r,{prop:"positionArea",label:"面积"}),e(r,{prop:"positionUnitPrice",label:"展位单价","min-width":"120"}),e(r,{prop:"orderPrice",label:"订单金额","min-width":"120"}),e(r,{prop:"payType",label:"付款方式","min-width":"120"},{default:t(o=>[p(u("银行转账"))]),_:1}),e(r,{prop:"payStatus",label:"付款状态","min-width":"120"},{default:t(o=>[p(u({0:"未付款",1:"部分付款",2:"已付款"}[o.row.payStatus]),1)]),_:1}),e(r,{prop:"orderStatus",label:"订单状态","min-width":"120"},{default:t(o=>[p(u({0:"已撤销",1:"已完成"}[o.row.orderStatus]),1)]),_:1}),e(r,{prop:"orderType",label:"订单类型","min-width":"120"},{default:t(o=>[p(u({1:"代下单",2:"展商下单"}[o.row.orderType]),1)]),_:1}),e(r,{prop:"payCode",label:"录款编号","min-width":"120"}),e(r,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:t(o=>[p(u({1:"电子专票",2:"电子普票"}[o.row.invoiceType]),1)]),_:1}),e(r,{prop:"invoiceTitle",label:"发票抬头","min-width":"120"}),e(r,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),e(r,{prop:"contact",label:"联系人"}),e(r,{prop:"phone",label:"手机号"}),e(r,{prop:"email",label:"邮箱"}),e(r,{prop:"invoicePrice",label:"开票金额","min-width":"120"}),e(r,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:t(o=>[p(u({0:"未申请",1:"待开票",2:"已开票"}[o.row.invoiceStatus]),1)]),_:1}),e(r,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:t(o=>[e(v,{style:{width:"30px",height:"30px","margin-right":"5px"},src:o.row.payImg,fit:"contain","preview-src-list":[o.row.payImg],"preview-teleported":"true",loading:"lazy"},null,8,["src","preview-src-list"])]),_:1}),e(r,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:t(o=>[e(v,{style:{width:"30px",height:"30px","margin-right":"5px"},src:o.row.receiveImg,fit:"contain","preview-src-list":[o.row.receiveImg],"preview-teleported":"true",loading:"lazy"},null,8,["src","preview-src-list"])]),_:1}),e(r,{prop:"invoiceImg",label:"发票附件","min-width":"120"},{default:t(o=>[e(v,{style:{width:"30px",height:"30px","margin-right":"5px"},src:o.row.invoiceImg,fit:"contain","preview-src-list":[o.row.invoiceImg],"preview-teleported":"true",loading:"lazy"},null,8,["src","preview-src-list"])]),_:1}),e(r,{fixed:"right",label:"操作",width:"200"},{default:t(o=>[e(d,{link:"",type:"primary",size:"small",onClick:T=>R(o.row),style:{"margin-right":"5px"}},{default:t(()=>[p("开票")]),_:2},1032,["onClick"]),e(K,{id:o.row.id,onCallback:m},null,8,["id"]),e(d,{link:"",type:"primary",size:"small",onClick:T=>F(o.row)},{default:t(()=>[p("编辑")]),_:2},1032,["onClick"]),e(d,{link:"",type:"primary",size:"small",onClick:T=>z([o.row.id])},{default:t(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_("div",re,[e(D,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:y.value,"current-page":f.page,"onUpdate:currentPage":l[0]||(l[0]=o=>f.page=o),"page-size":f.perPage,"onUpdate:pageSize":l[1]||(l[1]=o=>f.perPage=o),onChange:m},null,8,["total","current-page","page-size"])])]),e(k,{modelValue:i.show,"onUpdate:modelValue":l[8]||(l[8]=o=>i.show=o),title:"编辑发票",width:"500",draggable:""},{footer:t(()=>[_("div",pe,[e(d,{onClick:l[7]||(l[7]=o=>i.show=!1)},{default:t(()=>[p("取消")]),_:1}),e(d,{type:"primary",onClick:P},{default:t(()=>[p("确定")]),_:1})])]),default:t(()=>[e(x,{ref:"willFormRef",model:i.form,"label-width":"auto"},{default:t(()=>[e(s,{label:"发票抬头"},{default:t(()=>[e(c,{modelValue:i.form.title,"onUpdate:modelValue":l[2]||(l[2]=o=>i.form.title=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(s,{label:"社会信用代码"},{default:t(()=>[e(c,{modelValue:i.form.socialCode,"onUpdate:modelValue":l[3]||(l[3]=o=>i.form.socialCode=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(s,{label:"联系人"},{default:t(()=>[e(c,{modelValue:i.form.contact,"onUpdate:modelValue":l[4]||(l[4]=o=>i.form.contact=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(s,{label:"手机号"},{default:t(()=>[e(c,{modelValue:i.form.phone,"onUpdate:modelValue":l[5]||(l[5]=o=>i.form.phone=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(s,{label:"邮箱"},{default:t(()=>[e(c,{modelValue:i.form.email,"onUpdate:modelValue":l[6]||(l[6]=o=>i.form.email=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(k,{modelValue:n.show,"onUpdate:modelValue":l[12]||(l[12]=o=>n.show=o),title:"开票",width:"500",draggable:""},{footer:t(()=>[_("div",ne,[e(d,{onClick:l[11]||(l[11]=o=>i.show=!1)},{default:t(()=>[p("取消")]),_:1}),e(d,{type:"primary",onClick:B},{default:t(()=>[p("确定")]),_:1})])]),default:t(()=>[e(x,{ref:"willFormRef",model:i.form,"label-width":"auto"},{default:t(()=>[e(s,{label:"发票类型"},{default:t(()=>[e(N,{modelValue:n.form.type,"onUpdate:modelValue":l[9]||(l[9]=o=>n.form.type=o)},{default:t(()=>[e(I,{value:1},{default:t(()=>[p("电子专票")]),_:1}),e(I,{value:2},{default:t(()=>[p("电子普票")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"发票号"},{default:t(()=>[e(c,{modelValue:n.form.code,"onUpdate:modelValue":l[10]||(l[10]=o=>n.form.code=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});export{mo as default};
