import{d as G,s as y,l as h,o as Q,f as j,P as w,S as e,w as t,Q as n,R as d,F as H}from"./index-CnZSDrTx.js";import{E as J,a as K}from"./el-radio-Bsqvlqug.js";import{E as O}from"./el-dialog-QPTvRhlP.js";/* empty css                   */import{E as W,a as X}from"./el-form-item-CA7IP6BC.js";/* empty css                 */import{E as Y}from"./el-pagination-FdSeQtnZ.js";import"./el-tag-CqeFY_ag.js";import"./el-select-Dp_6BTY6.js";import"./el-scrollbar-Biylh7eA.js";import"./el-popper-CjnSP2rC.js";import{E as Z,a as ee}from"./el-table-column-BeGdXhrV.js";import"./el-checkbox-C9Xq17fp.js";import"./el-tooltip-l0sNRNKZ.js";import{E as oe}from"./el-progress-S-OOQlXg.js";import"./el-button-PcvT78BB.js";import{E as te}from"./el-link-DB_3GmQC.js";import{T as le}from"./index-C3O9c73V.js";import{a as b}from"./index-CV1-f70C.js";import{u as ae}from"./index-DrWA11Sv.js";/* empty css                   *//* empty css                       */import{E as ie}from"./index-CACB1FTA.js";import{a as f}from"./request-DuPLO9ut.js";import{E as re}from"./index-D3WNSepZ.js";import{E as ne}from"./index-CiJAOnbI.js";import"./event-BB_Ol6Sd.js";import"./index--_DWiEan.js";import"./index-C3JCfczY.js";import"./scroll-Cj_m6eEx.js";import"./vnode-B2IoBO-f.js";import"./refs-BTuIepUY.js";import"./castArray-BIWlv9Ow.js";import"./_baseClone-If5JTBnu.js";import"./_initCloneObject-BzJT1sN_.js";import"./isEqual-ZGPUTl53.js";import"./isArrayLikeObject-B_tCCL-e.js";import"./cloneDeep-DzRUDpS_.js";import"./el-date-picker-BwYDIgEg.js";import"./arrays-6TrVLtTe.js";import"./index-W37LwBMy.js";/* empty css                          */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./aria-KgdLjl5h.js";import"./validator-CYX2kOhi.js";const me={class:"s-flex-col",style:{height:"100%"}},pe=w("div",null,null,-1),de={class:"s-flex-auto",style:{"min-height":"0"}},se={class:"s-table-pagination"},fe={class:"dialog-footer"},ue={class:"dialog-footer"},mo=G({__name:"Invoices",setup(ce){const u=y({page:1,perPage:10}),V=h(0),E=h({}),C=h([]),U=h(null),k=h([]),x=a=>{E.value=a,u.page=1,c()},c=async()=>{b.invoice.getList({...E.value,...u}).then(a=>{a.code===0&&(C.value=a.data.data,V.value=a.data.total)})},z=a=>{ie.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{}).catch(()=>{})},r=y({show:!1,form:{id:"",title:"",socialCode:"",contact:"",phone:"",email:"",type:"",status:"",invoiceCode:"",img:""}}),F=()=>{b.invoice.edit(r.form).then(a=>{a.code===0?(f.success("申请成功"),r.show=!1,c()):f.error(a.msg)})},P=a=>{r.show=!0,r.form.id=a.id,r.form.title=a.title,r.form.socialCode=a.socialCode,r.form.contact=a.contact,r.form.phone=a.phone,r.form.email=a.email},B=a=>a.size/1024/1024>3?(f.error("文件大小不能超过 3MB!"),!1):!0,D=a=>{let l=new FormData;return l.append("upload",a.file),new Promise((i,g)=>{ae(l).then(p=>{p.code===0?i(p.data):g(p)})})},R=a=>{b.invoice.uploadInvoice(a).then(l=>{l.code===0?(f.success("上传成功"),c()):f.error(l.msg)})},m=y({show:!1,form:{id:"",cose:"",type:1}}),$=()=>{b.invoice.openInvoice(m.form).then(a=>{a.code===0?(f.success("成功"),m.show=!1,c()):f.error(a.msg)})},L=a=>{m.show=!0,m.form.id=a.id,m.form.code="",m.form.type=1};return b.invoice.getSearchField().then(a=>{a.code===0&&(k.value=a.data)}),c(),(a,l)=>{const i=Z,g=te,p=re,N=oe,M=ee,q=Y,_=ne,s=W,I=X,T=O,S=J,A=K;return Q(),j(H,null,[w("div",me,[pe,e(le,{data:k.value,onSearch:x},null,8,["data"]),w("div",de,[e(M,{ref_key:"tableRef",ref:U,data:C.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:t(()=>[e(i,{type:"selection",width:"42"}),e(i,{prop:"orderCode",label:"订单编号",width:"180"}),e(i,{prop:"companyName",label:"企业名称","min-width":"120"}),e(i,{prop:"hallCode",label:"展馆号"}),e(i,{prop:"positionCode",label:"展位号"}),e(i,{prop:"positionType",label:"展位类型","min-width":"120"},{default:t(o=>[n(d({1:"标准",2:"特装"}[o.row.positionType]),1)]),_:1}),e(i,{prop:"positionArea",label:"面积"}),e(i,{prop:"positionUnitPrice",label:"展位单价","min-width":"120"}),e(i,{prop:"orderPrice",label:"订单金额","min-width":"120"}),e(i,{prop:"payType",label:"付款方式","min-width":"120"},{default:t(o=>[n(d({1:"全款",2:"分期"}[o.row.payType]),1)]),_:1}),e(i,{prop:"payStatus",label:"付款状态","min-width":"120"},{default:t(o=>[n(d({0:"未付款",1:"部分付款",2:"已付款"}[o.row.payStatus]),1)]),_:1}),e(i,{prop:"orderStatus",label:"订单状态","min-width":"120"},{default:t(o=>[n(d({0:"已撤销",1:"已完成"}[o.row.orderStatus]),1)]),_:1}),e(i,{prop:"orderType",label:"订单类型","min-width":"120"},{default:t(o=>[n(d({1:"代下单",2:"展商下单"}[o.row.orderType]),1)]),_:1}),e(i,{prop:"payCode",label:"录款编号","min-width":"120"}),e(i,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:t(o=>[n(d({1:"电子专票",2:"电子普票"}[o.row.invoiceType]),1)]),_:1}),e(i,{prop:"invoiceTitle",label:"发票抬头","min-width":"120"}),e(i,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),e(i,{prop:"contact",label:"联系人"}),e(i,{prop:"phone",label:"手机号"}),e(i,{prop:"email",label:"邮箱"}),e(i,{prop:"invoicePrice",label:"开票金额","min-width":"120"}),e(i,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:t(o=>[n(d({0:"待开票",1:"已开票"}[o.row.invoiceStatus]),1)]),_:1}),e(i,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:t(o=>[e(g,{href:o.row.payImg,target:"_blank"},{default:t(()=>[n(d(o.row.payImg),1)]),_:2},1032,["href"])]),_:1}),e(i,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:t(o=>[e(g,{href:o.row.receiveImg,target:"_blank"},{default:t(()=>[n(d(o.row.receiveImg),1)]),_:2},1032,["href"])]),_:1}),e(i,{prop:"invoiceImg",label:"发票附件","min-width":"120"},{default:t(o=>[e(g,{href:o.row.invoiceImg,target:"_blank"},{default:t(()=>[n(d(o.row.invoiceImg),1)]),_:2},1032,["href"])]),_:1}),e(i,{fixed:"right",label:"操作",width:"200"},{default:t(o=>[e(p,{link:"",type:"primary",size:"small",onClick:v=>L(o.row)},{default:t(()=>[n("开票")]),_:2},1032,["onClick"]),e(N,{"show-file-list":!1,"on-success":(v,_e,we)=>{R({id:o.row.id,url:v.url})},"before-upload":B,"http-request":D},{default:t(()=>[e(p,{link:"",type:"primary",size:"small"},{default:t(()=>[n("上传发票")]),_:1})]),_:2},1032,["on-success"]),e(p,{link:"",type:"primary",size:"small",onClick:v=>P(o.row)},{default:t(()=>[n("编辑")]),_:2},1032,["onClick"]),e(p,{link:"",type:"primary",size:"small",onClick:v=>z([o.row.id])},{default:t(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),w("div",se,[e(q,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:V.value,"current-page":u.page,"onUpdate:currentPage":l[0]||(l[0]=o=>u.page=o),"page-size":u.perPage,"onUpdate:pageSize":l[1]||(l[1]=o=>u.perPage=o),onChange:c},null,8,["total","current-page","page-size"])])]),e(T,{modelValue:r.show,"onUpdate:modelValue":l[8]||(l[8]=o=>r.show=o),title:"编辑发票",width:"500",draggable:""},{footer:t(()=>[w("div",fe,[e(p,{onClick:l[7]||(l[7]=o=>r.show=!1)},{default:t(()=>[n("取消")]),_:1}),e(p,{type:"primary",onClick:F},{default:t(()=>[n("确定")]),_:1})])]),default:t(()=>[e(I,{ref:"willFormRef",model:r.form,"label-width":"auto"},{default:t(()=>[e(s,{label:"发票抬头"},{default:t(()=>[e(_,{modelValue:r.form.title,"onUpdate:modelValue":l[2]||(l[2]=o=>r.form.title=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(s,{label:"社会信用代码"},{default:t(()=>[e(_,{modelValue:r.form.socialCode,"onUpdate:modelValue":l[3]||(l[3]=o=>r.form.socialCode=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(s,{label:"联系人"},{default:t(()=>[e(_,{modelValue:r.form.contact,"onUpdate:modelValue":l[4]||(l[4]=o=>r.form.contact=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(s,{label:"手机号"},{default:t(()=>[e(_,{modelValue:r.form.phone,"onUpdate:modelValue":l[5]||(l[5]=o=>r.form.phone=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(s,{label:"邮箱"},{default:t(()=>[e(_,{modelValue:r.form.email,"onUpdate:modelValue":l[6]||(l[6]=o=>r.form.email=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(T,{modelValue:m.show,"onUpdate:modelValue":l[12]||(l[12]=o=>m.show=o),title:"转为意向客户",width:"500",draggable:""},{footer:t(()=>[w("div",ue,[e(p,{onClick:l[11]||(l[11]=o=>r.show=!1)},{default:t(()=>[n("取消")]),_:1}),e(p,{type:"primary",onClick:$},{default:t(()=>[n("确定")]),_:1})])]),default:t(()=>[e(I,{ref:"willFormRef",model:r.form,"label-width":"auto"},{default:t(()=>[e(s,{label:"发票类型"},{default:t(()=>[e(A,{modelValue:m.form.type,"onUpdate:modelValue":l[9]||(l[9]=o=>m.form.type=o)},{default:t(()=>[e(S,{value:1},{default:t(()=>[n("电子专票")]),_:1}),e(S,{value:2},{default:t(()=>[n("电子普票")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"发票号"},{default:t(()=>[e(_,{modelValue:m.form.code,"onUpdate:modelValue":l[10]||(l[10]=o=>m.form.code=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});export{mo as default};
