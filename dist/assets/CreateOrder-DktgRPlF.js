import{d as U,l as k,e as B,o as f,f as h,P as t,R as d,a as J,F as T,W as w,S as e,w as n,Q as u,Z as I,a7 as R,_ as F,$ as q}from"./index-DHfRNRLb.js";import"./el-button-CKfH1yK4.js";/* empty css                 */import"./el-input-BkEPJYjr.js";import{E as W,a as j}from"./el-table-column-BZI_VcEA.js";import"./el-checkbox-D5-pooQp.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-Dylm0_gC.js";import"./el-tag-BekjV4sH.js";import{b as D}from"./index-Dx_iS1Cj.js";import{E}from"./request-iz7p0Cm_.js";import{E as G}from"./index-CGC0Fgk5.js";import{E as L}from"./index-DRvl5mKD.js";import{E as M,a as Q}from"./index-CXIn_3Gd.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B7dESW3w.js";import"./isArrayLikeObject-D4i4NGkg.js";import"./typescript-CXVAC2gn.js";import"./event-BB_Ol6Sd.js";import"./isEqual-D-5pMCgb.js";const c=_=>(F("data-v-4de3495a"),_=_(),q(),_),$={class:"create-order"},z={class:"p1"},A=c(()=>t("div",{class:"p2"},"展位清单",-1)),H={class:"p3"},K={class:"p4"},X=c(()=>t("span",null,"预定金",-1)),Y=c(()=>t("span",null,"元",-1)),ee=c(()=>t("span",{style:{margin:"0 10px 0 40px"}},"是否冲抵展位费",-1)),oe=c(()=>t("span",{style:{"margin-left":"10px"}},"%",-1)),ae={style:{"text-align":"center",padding:"20px"}},te=U({__name:"CreateOrder",setup(_){const g=I(),y=R(),i=k({});i.value=JSON.parse(y.query.data),console.log(i.value);const S={1:"%",2:"￥"},b=o=>{let s=[];return o.forEach(l=>{let p=JSON.parse(l);s.push(p.price+S[p.unit])}),s.join("，")},N=B(()=>o=>{let s=o.finalPrice;return o.isOffset===1&&(s=s-o.deposit),o.payType===2&&(s=s*o.ratio/100),Number(s.toFixed(2))}),O=()=>{let o=JSON.parse(JSON.stringify(i.value)),s=o.add.map(p=>JSON.parse(p)),l=o.discount.map(p=>JSON.parse(p));o.add=s,o.discount=l,D.create(o).then(p=>{p.code===0?(E.success("提交成功"),g.push({name:"Will"})):E.error(p.msg)})},C=()=>{};return(o,s)=>{const l=W,p=j,v=L,m=M,V=Q,x=G;return f(),h("div",$,[t("div",z,d(J(y).query.exhibitionName),1),A,(f(!0),h(T,null,w(i.value.position,(a,P)=>(f(),h("div",{key:P,class:"item"},[e(p,{data:[a],border:""},{default:n(()=>[e(l,{prop:"name",label:"企业名称"}),e(l,{prop:"companyBrand",label:"参展品牌"}),e(l,{prop:"hallCode",label:"展馆号"}),e(l,{prop:"positionCode",label:"展位号"}),e(l,{prop:"product",label:"产品名称"}),e(l,{prop:"unitPrice",label:"单价"}),e(l,{prop:"area",label:"面积"}),e(l,{prop:"discount",label:"折扣"},{default:n(r=>[u(d(b(i.value.discount)),1)]),_:1}),e(l,{prop:"add",label:"加收"},{default:n(r=>[u(d(b(i.value.add)),1)]),_:1})]),_:2},1032,["data"]),t("div",H,[t("span",null,"订单原价："+d(a.costPrice),1),t("span",null,"最终金额："+d(a.finalPrice),1),t("span",null,"待支付金额："+d(N.value(a)),1),t("span",null,"优惠金额："+d(a.discountPrice),1),t("span",null,"加收金额："+d(a.addPrice),1)]),t("div",K,[X,e(v,{modelValue:a.deposit,"onUpdate:modelValue":r=>a.deposit=r,placeholder:"请输入金额",style:{width:"120px",margin:"0 10px 0 10px"}},null,8,["modelValue","onUpdate:modelValue"]),Y,ee,e(V,{modelValue:a.isOffset,"onUpdate:modelValue":r=>a.isOffset=r},{default:n(()=>[e(m,{value:1},{default:n(()=>[u("是")]),_:1}),e(m,{value:2},{default:n(()=>[u("否")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(V,{modelValue:a.payType,"onUpdate:modelValue":r=>a.payType=r,style:{margin:"0 10px 0 40px"}},{default:n(()=>[e(m,{value:1},{default:n(()=>[u("全款")]),_:1}),e(m,{value:2},{default:n(()=>[u("分期")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(v,{modelValue:a.ratio,"onUpdate:modelValue":r=>a.ratio=r,placeholder:"分期比例",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),oe])]))),128)),t("div",ae,[e(x,{type:"primary",onClick:O},{default:n(()=>[u("提交订单")]),_:1}),e(x,{type:"",onClick:C},{default:n(()=>[u("返回")]),_:1})])])}}}),Se=Z(te,[["__scopeId","data-v-4de3495a"]]);export{Se as default};
