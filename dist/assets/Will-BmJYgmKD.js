import{d as ee,l as i,s as oe,O as te,o as p,f as w,P as u,S as o,w as a,F as x,W as R,Q as n,R as T,c as v,X as B}from"./index-g75ufP7d.js";import{E as le}from"./el-dialog-DSAGb08e.js";/* empty css                   *//* empty css                     */import"./el-input-D8XJmPrM.js";import"./el-tag-3xTPL-an.js";/* empty css                  */import"./el-scrollbar-CB0aBKmB.js";import{E as ae}from"./el-pagination-C6INOyPw.js";import{E as ie,a as ne}from"./el-table-column-C7JUfLOg.js";import"./el-checkbox-BJ8UZ24J.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-button-CNOJgwLG.js";/* empty css                        */import{a as re,b as se,E as de}from"./el-dropdown-item-BabVH1zJ.js";import{T as me}from"./index-BiYq8-Zs.js";import{a as h}from"./index-BstPB4bA.js";import{e as pe}from"./index-Cwi4Elpn.js";import{g as ue}from"./index-ExE_VvKT.js";/* empty css                   *//* empty css                       */import{E as d}from"./request--uz8TcEF.js";import{E as ce}from"./index-BboYzVDa.js";import{E as _e}from"./index-CQOAdKLS.js";import{E as fe}from"./index-D8caOcpg.js";import{E as he,a as ge}from"./index-uMw6JbdF.js";import{E as ve,a as be}from"./index-CgK-lu4a.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DjBQj6k2.js";import"./scroll-BzbWq0HX.js";import"./vnode-DqEnQ7T-.js";import"./refs-BBkqgsFQ.js";import"./event-BB_Ol6Sd.js";import"./isEqual-DI1axKtC.js";import"./typescript-BiM07qGq.js";import"./index-DooEcWLP.js";import"./isArrayLikeObject-DwSHuVlJ.js";import"./castArray-BAmbttlM.js";/* empty css                                                              *//* empty css                       *//* empty css                 *//* empty css                          */import"./index-D8plI_pv.js";import"./index-rws0KOBe.js";import"./arrays-6TrVLtTe.js";import"./index-Cvhn5ebx.js";import"./aria-KgdLjl5h.js";import"./validator-uMnuo2_2.js";const xe={class:"s-flex-col",style:{height:"100%"}},Ee={class:""},ke={class:"el-dropdown-link"},Ce={class:"s-table-operations"},ye={class:"s-flex-auto",style:{"min-height":"0"}},Ie={class:"s-table-pagination"},Se={class:"dialog-footer"},ze=ee({__name:"Will",setup(Ve){const E=i("全部"),k=i(""),c=oe({page:1,perPage:10}),C=i(0),y=i({}),I=i([]),g=i(null),S=i([]),z=i([]),N=e=>{y.value=e,c.page=1,m()},m=async()=>{h.getList({status:2,exhibitionId:k.value,...c,...y.value}).then(e=>{e.code===0&&(I.value=e.data.data,C.value=e.data.total)})};i({}),i(!1),i(null);const P=()=>{let e=g.value.getSelectionRows().map(t=>t.id);if(e.length===0){d.warning("请选择需要删除的线索");return}ce.confirm("确定删除所选线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.del({id:e}).then(t=>{t.code===0?(d.success("删除成功"),m()):d.error(t.msg)})}).catch(()=>{})},_=i({}),f=i(!1),V=i(null),D=i([]),U=()=>{let e=g.value.getSelectionRows().map(t=>t.id);if(e.length===0){d.warning("请选择需要转移的线索");return}_.value.id=e,f.value=!0},M=()=>{V.value.validate(e=>{e&&h.changeUser(_.value).then(t=>{t.code===0?(d.success("转移成功"),f.value=!1,m()):d.error(t.msg)})})},$=()=>{let e=g.value.getSelectionRows().map(t=>t.id);if(e.length===0){d.warning("请选择需要移至公海的线索");return}h.changePublic({id:e}).then(t=>{t.code===0?(d.success("移至公海成功"),m()):d.error(t.msg)})},L=()=>{console.log("import")},q=()=>{console.log("export")};h.getSearchField().then(e=>{e.code===0&&(S.value=e.data)}),pe().then(e=>{e.code===0&&(z.value=[{exhibitionName:"全部",id:""},...e.data])}),ue().then(e=>{e.code===0&&(D.value=e.data)});const W=e=>{console.log(e),E.value=e.exhibitionName,k.value=e.id,m()};return m(),(e,t)=>{const O=te("arrow-down"),G=_e,H=de,Q=re,X=se,r=fe,s=ie,j=ne,A=ae,F=he,J=be,K=ve,Y=ge,Z=le;return p(),w(x,null,[u("div",xe,[u("div",Ee,[o(X,{onCommand:W,style:{outline:"none"}},{dropdown:a(()=>[o(Q,null,{default:a(()=>[(p(!0),w(x,null,R(z.value,(l,b)=>(p(),v(H,{key:b,command:l},{default:a(()=>[n(T(l.exhibitionName),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:a(()=>[u("span",ke,[n(T(E.value),1),o(G,{class:"el-icon--right"},{default:a(()=>[o(O)]),_:1})])]),_:1})]),o(me,{data:S.value,onSearch:N},null,8,["data"]),u("div",Ce,[o(r,{size:"small",onClick:U},{default:a(()=>[n("转移")]),_:1}),o(r,{size:"small",onClick:$},{default:a(()=>[n("移至公海")]),_:1}),o(r,{size:"small",onClick:t[0]||(t[0]=()=>{})},{default:a(()=>[n("合并")]),_:1}),o(r,{size:"small",onClick:q},{default:a(()=>[n("导出")]),_:1}),o(r,{size:"small",onClick:P},{default:a(()=>[n("删除")]),_:1}),o(r,{size:"small",onClick:t[1]||(t[1]=l=>e.$router.push("/market/clues/add"))},{default:a(()=>[n("新建线索")]),_:1}),o(r,{size:"small",onClick:L},{default:a(()=>[n("导入线索")]),_:1})]),u("div",ye,[o(j,{ref_key:"tableRef",ref:g,data:I.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:a(()=>[o(s,{type:"selection",width:"42"}),o(s,{prop:"companyName",label:"公司名称",width:"180"}),o(s,{prop:"exhibitionContact",label:"联系方式",width:"180"}),o(s,{prop:"duties",label:"职务"}),o(s,{prop:"phone",label:"电话"}),o(s,{prop:"recordTime",label:"记录时间",width:"180"}),o(s,{prop:"recordText",label:"记录内容"}),o(s,{prop:"authUser",label:"授权人"}),o(s,{fixed:"right",label:"操作",width:"180"},{default:a(l=>[l.row.orderPositionStatus?(p(),v(r,{key:0,link:"",type:"primary",size:"small",onClick:b=>e.$router.push({name:"HallLayout",query:{clueId:l.row.id,exhibitionId:l.row.exhibitionId,exhibitorId:l.row.exhibitorId}})},{default:a(()=>[n(" 展位预定 ")]),_:2},1032,["onClick"])):B("",!0),l.row.orderMaterialStatus?(p(),v(r,{key:1,link:"",type:"primary",size:"small",onClick:b=>e.$router.push({name:"GoodsReserve",query:{clueId:l.row.id,exhibitionId:l.row.exhibitionId,exhibitorId:l.row.exhibitorId,hallCode:l.row.hallCode,positionCode:l.row.positionCode}})},{default:a(()=>[n(" 物料预定 ")]),_:2},1032,["onClick"])):B("",!0)]),_:1})]),_:1},8,["data"])]),u("div",Ie,[o(A,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:C.value,"current-page":c.page,"onUpdate:currentPage":t[2]||(t[2]=l=>c.page=l),"page-size":c.perPage,"onUpdate:pageSize":t[3]||(t[3]=l=>c.perPage=l),onChange:m},null,8,["total","current-page","page-size"])])]),o(Z,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=l=>f.value=l),title:"转移销售线索",width:"500",draggable:""},{footer:a(()=>[u("div",Se,[o(r,{onClick:t[5]||(t[5]=l=>f.value=!1)},{default:a(()=>[n("取消")]),_:1}),o(r,{type:"primary",onClick:M},{default:a(()=>[n("确定")]),_:1})])]),default:a(()=>[o(Y,{ref_key:"moveFormRef",ref:V,model:_.value,"label-width":"auto"},{default:a(()=>[o(F,{label:""},{default:a(()=>[n("是否将选中的销售线索转移？")]),_:1}),o(F,{label:"销售线索所有人",prop:"userId",rules:[{required:!0,message:"请选择销售线索所有人"}]},{default:a(()=>[o(K,{modelValue:_.value.userId,"onUpdate:modelValue":t[4]||(t[4]=l=>_.value.userId=l),placeholder:""},{default:a(()=>[(p(!0),w(x,null,R(D.value,l=>(p(),v(J,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}}),yo=we(ze,[["__scopeId","data-v-96f426c0"]]);export{yo as default};
