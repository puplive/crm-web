import{d as v,l as c,o as h,h as k,i as p,R as b,P as x}from"./index-CoktlfKN.js";import{E as y}from"./el-progress-DCdY8ePl.js";/* empty css                  */import{i as E}from"./index-Cri7qHKI.js";import{u as w}from"./index-D7B-4EVK.js";/* empty css                   */import{c as l}from"./request-DAESqlcg.js";import{E as B}from"./index-BPJO_kH-.js";const V=v({__name:"UpInvoice",props:["id"],emits:["callback"],setup(u,{emit:m}){const n=u,t=c(!1),r=c(null);console.log(n.id);const f=o=>o.size/1024/1024>3?(l.error("文件大小不能超过 3MB!"),!1):!0,d=o=>{t.value=!0;let a=new FormData;return a.append("upload",o.file),new Promise((i,s)=>{w(a).then(e=>{e.code===0?i(e.data):(s(e),l.error(e.msg),r.value.clearFiles()),t.value=!1}).catch(e=>{s(e),l.error("上传失败"),r.value.clearFiles(),t.value=!1})})},_=o=>{E.uploadInvoice({id:n.id,url:o}).then(a=>{a.code===0?(l.success("上传成功"),g("callback")):l.error(a.msg)})},g=m;return(o,a)=>{const i=B,s=y;return h(),k(s,{ref_key:"uploadRef",ref:r,style:{display:"inline-block","margin-right":"5px"},"show-file-list":!1,"on-success":(e,F,I)=>{_(e.url)},"before-upload":f,"http-request":d},{default:p(()=>[b(i,{link:"",type:"primary",size:"small",loading:t.value},{default:p(()=>[x("上传发票")]),_:1},8,["loading"])]),_:1},8,["on-success"])}}});export{V as _};
