import{d as N,l as w,b as D,O as l,Q as r,R as e,i as o,F as V,a5 as A,o as s,P as n,h as u,a3 as h,X as z,Y as F}from"./index-DeSX2eSr.js";import{E as M}from"./el-image-viewer-Dvsm3OTV.js";import{E as U,a as X}from"./el-table-column-BdCa15VD.js";import"./el-checkbox-j7lFECTN.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-popper-CT0v3eTF.js";import"./el-scrollbar-C4h8kzU_.js";/* empty css                  */import"./el-tag-BQyrV36T.js";import{b as T}from"./index-Dz12IHVF.js";import{i as j,p as q}from"./index-D3uLjGS3.js";import{_ as O,a as Q,b as Y}from"./Invoicing.vue_vue_type_script_setup_true_lang-CRN784jy.js";import{_ as G}from"./ApplyInvoice.vue_vue_type_script_setup_true_lang-Cdg_HTYG.js";import{_ as H}from"./EditPayment.vue_vue_type_script_setup_true_lang-BjUbzuZK.js";/* empty css                   *//* empty css                       *//* empty css                 *//* empty css                   */import{c as _}from"./request-Cns7CokS.js";import{E as k}from"./index-2mh8h9PP.js";import{E as J}from"./index-BrXk96ji.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BW2YqXyq.js";import"./use-form-item-D_DCfmfc.js";import"./event-BB_Ol6Sd.js";import"./scroll-iU-J_Tou.js";import"./_initCloneObject-CHbams4w.js";import"./isEqual-BMa_i8p1.js";import"./tool-BQQRKqby.js";import"./el-progress-CweXfkkr.js";import"./cloneDeep-BsC4GeIN.js";import"./_baseClone--tkZ36p-.js";import"./index-14u3e8jx.js";import"./el-dialog-CD1L4fPG.js";import"./index-Da9NyqAT.js";import"./vnode-C0RwecBe.js";import"./refs-Vw7JU3Sm.js";import"./el-form-item-CRv0drmm.js";import"./castArray-hZIkKxd3.js";/* empty css                       */import"./el-radio-CuKIBoRC.js";import"./el-row-BFlqfcyz.js";import"./el-col-Cif2sTCC.js";import"./el-date-picker-t0xtrGi1.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./arrays-6TrVLtTe.js";import"./index-Cz-ImYxH.js";import"./el-select-BMVNPZYZ.js";import"./aria-KgdLjl5h.js";import"./validator-t_PUM3SV.js";const b=v=>(z("data-v-97729c9d"),v=v(),F(),v),L=b(()=>l("div",null,"详情",-1)),W=b(()=>l("div",{class:"title"},"展位订单",-1)),Z={class:"info"},ee={class:"table"},te=b(()=>l("div",{class:"title"},"到款详情",-1)),ie={class:"table"},oe=b(()=>l("div",{class:"title"},"发票详情",-1)),le={class:"table"},ae=N({__name:"BoothDetail",setup(v){const B=A(),E=w(B.query.id),g=w(null),C=w(null),x=w(null),S=w(null),a=w({brand:[],payment:[],invoice:[]}),c=()=>{T.getDetail({id:E.value}).then(d=>{d.code===0?a.value=d.data:_.error(d.msg)})},P=d=>{k.confirm("是否确认要撤销订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{T.revoke({id:d}).then(p=>{p.code===0?(_.success("撤销成功"),c()):_.error(p.msg)})}).catch(()=>{})},R=d=>{k.confirm("是否确认要删除发票?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{j.del({id:d}).then(p=>{p.code===0?(_.success("删除成功"),c()):_.error(p.msg)})}).catch(()=>{})},$=d=>{k.confirm("是否确认要删除付款记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{q.del({id:d}).then(p=>{p.code===0?(_.success("删除成功"),c()):_.error(p.msg)})}).catch(()=>{})};return c(),(d,p)=>{const t=X,m=J,y=U,I=M;return s(),D(V,null,[l("div",null,[L,l("div",null,[W,l("div",Z,[l("span",null,"订单编号："+r(a.value.orderCode),1),l("span",null,"企业名称："+r(a.value.exhibitorName),1),l("span",null,"参展品牌："+r(a.value.brand.join(",")),1),l("span",null,"订单状态："+r(a.value.orderStatus),1),l("span",null,"订单生成时间："+r(a.value.orderTime),1),l("span",null,"下单人："+r(a.value.authUser),1),l("span",null,"对应销售："+r(a.value.clueUser),1)]),l("div",ee,[e(y,{data:[a.value],border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:o(()=>[e(t,{prop:"exhibitionName",label:"项目名称","min-width":"120"}),e(t,{prop:"hallCode",label:"展馆号"}),e(t,{prop:"positionCode",label:"展位号"}),e(t,{prop:"area",label:"面积"}),e(t,{prop:"length",label:"展位尺寸","min-width":"120"},{default:o(i=>[n(r(i.row.length)+" X "+r(i.row.width),1)]),_:1}),e(t,{prop:"num",label:"展位数量","min-width":"120"}),e(t,{prop:"product",label:"产品名称","min-width":"120"}),e(t,{prop:"unitPrice",label:"单价"}),e(t,{prop:"orderPrice",label:"最终金额","min-width":"120"}),e(t,{prop:"costPrice",label:"订单原价","min-width":"120"}),e(t,{prop:"discountPrice",label:"优惠(折扣)金额","min-width":"120"}),e(t,{prop:"addPrice",label:"加收金额","min-width":"120"}),e(t,{prop:"pendingPrice",label:"待支付金额","min-width":"120"}),e(t,{prop:"contractStatus",label:"合同状态","min-width":"120"},{default:o(i=>[n(r(["未签约","已签约","已回执"][i.row.contractStatus]),1)]),_:1}),e(t,{prop:"payStatus",label:"付款状态","min-width":"120"},{default:o(i=>[n(r(["未付款","部分付款","已付款"][i.row.payStatus]),1)]),_:1}),e(t,{prop:"receivedPrice",label:"到款金额","min-width":"120"}),e(t,{prop:"notReceivedPrice",label:"未到款金额","min-width":"120"}),e(t,{prop:"invoiceStatus",label:"发票状态","min-width":"120"},{default:o(i=>[n(r(["未申请","待开票","部分开票","已开票"][i.row.invoiceStatus]),1)]),_:1}),e(t,{prop:"remark",label:"备注"}),e(t,{fixed:"right",label:"操作",width:"200"},{default:o(i=>[a.value.orderStatus===1?(s(),u(m,{key:0,link:"",type:"danger",onClick:p[0]||(p[0]=f=>P(a.value.id))},{default:o(()=>[n("撤销")]),_:1})):a.value.orderStatus===0?(s(),u(m,{key:1,link:"",type:"",disabled:""},{default:o(()=>[n("已撤销")]),_:1})):h("",!0)]),_:1})]),_:1},8,["data"])]),te,l("div",ie,[e(y,{data:a.value.payment,border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:o(()=>[e(t,{prop:"code",label:"录款编号","min-width":"120"}),e(t,{prop:"payCompany",label:"付款公司","min-width":"120"}),e(t,{prop:"payType",label:"到款类型","min-width":"120"},{default:o(i=>[n(r({1:"预定金",2:"首款",3:"二次款",4:"尾款",5:"转款"}[i.row.payType]),1)]),_:1}),e(t,{prop:"payPrice",label:"到款金额","min-width":"120"}),e(t,{prop:"payTime",label:"到款时间","min-width":"120"}),e(t,{prop:"receiveAccount",label:"收款账户","min-width":"120"}),e(t,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:o(i=>[i.row.payImg?(s(),u(I,{key:0,style:{width:"30px",height:"30px"},src:i.row.payImg,"preview-src-list":[i.row.payImg],fit:"contain","preview-teleported":"true",loading:"lazy"},null,8,["src","preview-src-list"])):h("",!0)]),_:1}),e(t,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:o(i=>[i.row.receiveImg?(s(),u(I,{key:0,style:{width:"30px",height:"30px"},src:i.row.receiveImg,"preview-src-list":[i.row.receiveImg],fit:"contain","preview-teleported":"true",loading:"lazy"},null,8,["src","preview-src-list"])):h("",!0)]),_:1}),e(t,{prop:"invoiceStatus",label:"发票状态","min-width":"120"},{default:o(i=>[n(r({0:"未申请",1:"待开票",2:"已开票"}[i.row.invoiceStatus]),1)]),_:1}),e(t,{prop:"remark",label:"备注"}),a.value.orderStatus===1?(s(),u(t,{key:0,fixed:"right",label:"操作",width:"200"},{default:o(i=>[e(m,{link:"",type:"primary",onClick:()=>{let f={...i.row,account:i.row.receiveAccount};x.value.setEdit(f)}},{default:o(()=>[n("编辑")]),_:2},1032,["onClick"]),i.row.invoiceStatus===0?(s(),u(m,{key:0,link:"",type:"primary",onClick:f=>g.value.setApply(i.row)},{default:o(()=>[n("申请发票")]),_:2},1032,["onClick"])):h("",!0),e(m,{link:"",type:"danger",onClick:f=>$(i.row.id)},{default:o(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})):h("",!0)]),_:1},8,["data"])]),oe,l("div",le,[e(y,{data:a.value.invoice,border:"","table-layout":"fixed","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:o(()=>[e(t,{prop:"code",label:"编号"}),e(t,{prop:"title",label:"发票抬头","min-width":"120"}),e(t,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),e(t,{prop:"price",label:"开票金额","min-width":"120"}),e(t,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:o(i=>[n(r({1:"电子专票",2:"电子普票"}[i.row.invoiceType]),1)]),_:1}),e(t,{prop:"contact",label:"联系人"}),e(t,{prop:"email",label:"发送邮箱","min-width":"120"}),e(t,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:o(i=>[n(r({1:"待开票",2:"已开票"}[i.row.invoiceStatus]),1)]),_:1}),e(t,{prop:"invoiceCode",label:"发票号"}),e(t,{prop:"remark",label:"备注"}),a.value.orderStatus===1?(s(),u(t,{key:0,fixed:"right",label:"操作",width:"200"},{default:o(i=>[i.row.invoiceStatus===1?(s(),u(m,{key:0,link:"",type:"primary",onClick:()=>S.value.openInvoiceSet(i.row),style:{"margin-right":"5px"}},{default:o(()=>[n("开票")]),_:2},1032,["onClick"])):h("",!0),e(O,{id:i.row.id,onCallback:c},null,8,["id"]),e(m,{link:"",type:"primary",onClick:()=>{let f={...i.row,invoiceTitle:i.row.title};C.value.setEdit(f)}},{default:o(()=>[n("编辑")]),_:2},1032,["onClick"]),e(m,{link:"",type:"danger",onClick:f=>R(i.row.id)},{default:o(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})):h("",!0)]),_:1},8,["data"])])])]),e(G,{ref_key:"applyInvoiceRef",ref:g,onCallback:c},null,512),e(Q,{ref_key:"editInvoiceRef",ref:C,onCallback:c},null,512),e(H,{ref_key:"editPaymentRef",ref:x,onCallback:c},null,512),e(Y,{ref_key:"invoicingRef",ref:S,onCallback:c},null,512)],64)}}}),it=K(ae,[["__scopeId","data-v-97729c9d"]]);export{it as default};
