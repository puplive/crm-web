import{d as O,S as D,l as p,t as V,s as L,b as C,O as c,R as e,i,F as E,o as d,P as r,Q as s,h as T,a3 as f}from"./index-DeEmUtk8.js";import{E as U}from"./el-pagination-DVhabw-y.js";/* empty css                 */import"./el-tag-sTjTPs1p.js";import"./el-select-CdAKibK0.js";import"./el-scrollbar-B1UEJCGn.js";import"./el-popper-BDA29ZWi.js";import{E as H,a as M}from"./el-table-column-BgZCj435.js";import"./el-checkbox-BzP2PgOU.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{E as X}from"./el-link-CuSw6FwK.js";import{E as A}from"./el-image-viewer-CvwHrXy3.js";import{T as Q}from"./index-DdLp2tIy.js";import{_ as j,a as q,b as G}from"./Invoicing.vue_vue_type_script_setup_true_lang-pkhfjVAP.js";import{a as _}from"./index-yWv7EJ1A.js";import{_ as J}from"./ExhibitionChange.vue_vue_type_script_setup_true_lang-Cv30U2LH.js";/* empty css                   *//* empty css                       *//* empty css                   */import{E as K}from"./index-ClnE_xu4.js";import{c as S}from"./request-CrXne6Ug.js";import{E as W}from"./index-qMmuViMS.js";import"./isEqual-BJDDhv6O.js";import"./_initCloneObject-BADudMQM.js";import"./use-form-item-DsK_TWpk.js";import"./index-BuE8HFtE.js";import"./event-BB_Ol6Sd.js";import"./scroll-2Pi8ZKPm.js";import"./castArray-B2QRG32N.js";import"./el-form-item-CUOwenu9.js";import"./_baseClone-EScuJjl1.js";/* empty css                                                              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./el-progress-C3XsK8Af.js";import"./cloneDeep-Dx6YH9FS.js";import"./index-CnQNvcr7.js";import"./el-dialog-DOyBZBm6.js";import"./index-B4wusByw.js";import"./vnode-DmBlLciG.js";import"./refs-BZ5sklc_.js";/* empty css                       */import"./el-radio-DTQ752oL.js";/* empty css                        */import"./el-dropdown-item-D1RhnIXn.js";import"./index-IG-qNpH2.js";import"./aria-KgdLjl5h.js";import"./validator-wDnDF2Ia.js";const Y={class:"s-flex-col",style:{height:"100%"}},Z={class:"",style:{"margin-bottom":"10px"}},ee={class:"s-flex-auto",style:{"min-height":"0"}},te={class:"s-table-pagination"},We=O({__name:"Invoices",setup(oe){const h=D(),g=p(h.EXHIBITION_INFO);V(()=>h.EXHIBITION_INFO,(a,l)=>{a.id!==l.id&&(g.value=a,n())},{deep:!0});const m=L({page:1,perPage:10}),w=p(0),v=p({}),b=p([]),B=p(null),y=p([]),N=a=>{v.value=a,m.page=1,n()},n=async()=>{_.invoice.getList({exhibitionId:g.value.id,...v.value,...m}).then(a=>{a.code===0&&(b.value=a.data.data,w.value=a.data.total)})},P=a=>{K.confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{_.invoice.del({id:a}).then(l=>{l.code===0?(S.success("删除成功"),n()):S.error(l.msg)})}).catch(()=>{})};_.invoice.getSearchField().then(a=>{a.code===0&&(y.value=a.data)});const I=p(null),k=p(null);return n(),(a,l)=>{const o=M,x=A,z=X,u=W,R=H,F=U;return d(),C(E,null,[c("div",Y,[c("div",Z,[e(J)]),e(Q,{data:y.value,onSearch:N,type:"invoice"},null,8,["data"]),c("div",ee,[e(R,{ref_key:"tableRef",ref:B,data:b.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:i(()=>[e(o,{prop:"orderCode",label:"订单编号",width:"180"}),e(o,{prop:"companyName",label:"企业名称","min-width":"120"}),e(o,{prop:"exhibitionName",label:"展会名称","min-width":"120"}),e(o,{prop:"hallCode",label:"展馆号"}),e(o,{prop:"positionCode",label:"展位号"}),e(o,{prop:"positionType",label:"展位类型","min-width":"120"},{default:i(t=>[r(s({1:"标准",2:"特装"}[t.row.positionType]),1)]),_:1}),e(o,{prop:"positionArea",label:"面积"}),e(o,{prop:"positionUnitPrice",label:"展位单价","min-width":"120"}),e(o,{prop:"orderPrice",label:"订单金额","min-width":"120"}),e(o,{prop:"payType",label:"付款方式","min-width":"120"},{default:i(t=>[r(s({1:"全款",2:"分期"}[t.row.payType]),1)]),_:1}),e(o,{prop:"payStatus",label:"付款状态","min-width":"120"},{default:i(t=>[r(s({0:"未付款",1:"部分付款",2:"已付款"}[t.row.payStatus]),1)]),_:1}),e(o,{prop:"orderStatus",label:"订单状态","min-width":"120"},{default:i(t=>[r(s({0:"已撤销",1:"已完成"}[t.row.orderStatus]),1)]),_:1}),e(o,{prop:"orderType",label:"订单类型","min-width":"120"},{default:i(t=>[r(s({1:"代下单",2:"展商下单"}[t.row.orderType]),1)]),_:1}),e(o,{prop:"payCode",label:"录款编号","min-width":"120"}),e(o,{prop:"invoiceType",label:"发票类型","min-width":"120"},{default:i(t=>[r(s({1:"电子专票",2:"电子普票"}[t.row.invoiceType]),1)]),_:1}),e(o,{prop:"invoiceTitle",label:"发票抬头","min-width":"120"}),e(o,{prop:"socialCode",label:"社会信用代码","min-width":"120"}),e(o,{prop:"contact",label:"联系人"}),e(o,{prop:"phone",label:"手机号"}),e(o,{prop:"email",label:"邮箱"}),e(o,{prop:"invoicePrice",label:"开票金额","min-width":"120"}),e(o,{prop:"invoiceStatus",label:"开票状态","min-width":"120"},{default:i(t=>[r(s({1:"待开票",2:"已开票"}[t.row.invoiceStatus]),1)]),_:1}),e(o,{prop:"payImg",label:"付款凭证","min-width":"120"},{default:i(t=>[e(x,{style:{width:"30px",height:"30px","margin-right":"5px"},src:t.row.payImg,fit:"contain","preview-src-list":[t.row.payImg],"preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])]),_:1}),e(o,{prop:"receiveImg",label:"到款凭证","min-width":"120"},{default:i(t=>[e(x,{style:{width:"30px",height:"30px","margin-right":"5px"},src:t.row.receiveImg,fit:"contain","preview-src-list":[t.row.receiveImg],"preview-teleported":!0,loading:"lazy"},null,8,["src","preview-src-list"])]),_:1}),e(o,{prop:"invoiceImg",label:"发票附件","min-width":"120"},{default:i(t=>[t.row.invoiceImg?(d(),T(z,{key:0,href:t.row.invoiceImg,type:"primary"},{default:i(()=>[r("下载")]),_:2},1032,["href"])):f("",!0)]),_:1}),e(o,{fixed:"right",label:"操作",width:"250"},{default:i(t=>[t.row.orderStatus!==0?(d(),C(E,{key:0},[t.row.invoiceStatus===1?(d(),T(u,{key:0,link:"",type:"primary",onClick:()=>I.value.openInvoiceSet(t.row),style:{"margin-right":"5px"}},{default:i(()=>[r("开票")]),_:2},1032,["onClick"])):f("",!0),e(j,{id:t.row.id,onCallback:n},null,8,["id"]),e(u,{link:"",type:"primary",onClick:$=>k.value.setEdit(t.row)},{default:i(()=>[r("编辑")]),_:2},1032,["onClick"])],64)):f("",!0),e(u,{link:"",type:"danger",onClick:$=>P([t.row.id])},{default:i(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),c("div",te,[e(F,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:w.value,"current-page":m.page,"onUpdate:currentPage":l[0]||(l[0]=t=>m.page=t),"page-size":m.perPage,"onUpdate:pageSize":l[1]||(l[1]=t=>m.perPage=t),onChange:n},null,8,["total","current-page","page-size"])])]),e(q,{ref_key:"editInvoiceRef",ref:k,onCallback:n},null,512),e(G,{ref_key:"invoicingRef",ref:I,onCallback:n},null,512)],64)}}});export{We as default};
