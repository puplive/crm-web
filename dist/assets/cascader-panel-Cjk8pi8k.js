import{d as de,a as ue,D as $t,_ as Se,G as he,az as Qe,ar as et,x as St,s as tt,c as g,W as Z,o as v,b as F,aj as J,h as z,am as ve,i as _,$ as X,n as T,J as re,X as ie,ag as at,t as S,a1 as me,Y as Tt,Z as ne,K as Vt,aF as Fe,aT as qe,at as Pt,p as st,M as ge,ba as Lt,A as Dt,y as Re,z as te,cm as It,B as nt,U as se,ab as lt,E as A,ae as Mt,aJ as _t,ao as Ft,aK as xt,aL as zt,as as Bt,S as Ht,H as ke,e as d,f as At,aI as Kt,v as Ot,ai as qt,aD as Rt,aA as Ut,I as Ue,r as Wt,cn as Zt}from"./index-CEaPxNXb.js";import{E as ot}from"./scrollbar-DvtxjoWr.js";import{E as jt}from"./checkbox-DptI3ONT.js";import{E as Jt}from"./radio-CYeu6mSm.js";import{r as Xt,i as Yt,a as Gt,b as Qt,e as ea}from"./use-form-item-Db4588v5.js";import{c as We,t as ta,b as Ze}from"./select-CdndIaZD.js";import{i as be}from"./isEqual-CZ16SpVS.js";import{i as aa,f as Ce,g as it}from"./aria-KgdLjl5h.js";import{U as we,C as $e}from"./event-BB_Ol6Sd.js";import{u as je,c as Je}from"./arrays-6TrVLtTe.js";import{s as sa}from"./scroll-Ue8QcKtU.js";import{c as rt}from"./cloneDeep-Dc8LRfEz.js";import{E as na,i as la}from"./index-Dq9yeBTN.js";import{u as oa,E as Xe,C as ia}from"./popper-CpPLepmj.js";import{d as ra}from"./tag-C6Ybx2DW.js";var ua=1/0;function ca(e){var a=e==null?0:e.length;return a?Xt(e,ua):[]}var da=de({name:"NodeContent",setup(){return{ns:ue("cascader-node")}},render(){const{ns:e}=this,{node:a,panel:l}=this.$parent,{data:s,label:o}=a,{renderLabelFn:p}=l;return $t("span",{class:e.e("label")},p?p({node:a,data:s}):o)}});const ze=Symbol(),pa=de({name:"ElCascaderNode",components:{ElCheckbox:jt,ElRadio:Jt,NodeContent:da,ElIcon:he,Check:Qe,Loading:et,ArrowRight:St},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const l=tt(ze),s=ue("cascader-node"),o=g(()=>l.isHoverMenu),p=g(()=>l.config.multiple),u=g(()=>l.config.checkStrictly),m=g(()=>{var y;return(y=l.checkedNodes[0])==null?void 0:y.uid}),c=g(()=>e.node.isDisabled),b=g(()=>e.node.isLeaf),C=g(()=>u.value&&!b.value||!c.value),P=g(()=>B(l.expandingNode)),L=g(()=>u.value&&l.checkedNodes.some(B)),B=y=>{var M;const{level:x,uid:j}=e.node;return((M=y==null?void 0:y.pathNodes[x-1])==null?void 0:M.uid)===j},K=()=>{P.value||l.expandNode(e.node)},O=y=>{const{node:M}=e;y!==M.checked&&l.handleCheckChange(M,y)},H=()=>{l.lazyLoad(e.node,()=>{b.value||K()})},V=y=>{o.value&&(q(),!b.value&&a("expand",y))},q=()=>{const{node:y}=e;!C.value||y.loading||(y.loaded?K():H())},D=()=>{o.value&&!b.value||(b.value&&!c.value&&!u.value&&!p.value?I(!0):q())},Y=y=>{u.value?(O(y),e.node.loaded&&K()):I(y)},I=y=>{e.node.loaded?(O(y),!u.value&&K()):H()};return{panel:l,isHoverMenu:o,multiple:p,checkStrictly:u,checkedNodeId:m,isDisabled:c,isLeaf:b,expandable:C,inExpandingPath:P,inCheckedPath:L,ns:s,handleHoverExpand:V,handleExpand:q,handleClick:D,handleCheck:I,handleSelectCheck:Y}}}),fa=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ha=ie("span",null,null,-1);function va(e,a,l,s,o,p){const u=Z("el-checkbox"),m=Z("el-radio"),c=Z("check"),b=Z("el-icon"),C=Z("node-content"),P=Z("loading"),L=Z("arrow-right");return v(),F("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:a[2]||(a[2]=(...B)=>e.handleHoverExpand&&e.handleHoverExpand(...B)),onFocus:a[3]||(a[3]=(...B)=>e.handleHoverExpand&&e.handleHoverExpand(...B)),onClick:a[4]||(a[4]=(...B)=>e.handleClick&&e.handleClick(...B))},[J(" prefix "),e.multiple?(v(),z(u,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:a[0]||(a[0]=ve(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(v(),z(m,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:a[1]||(a[1]=ve(()=>{},["stop"]))},{default:_(()=>[J(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ha]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(v(),z(b,{key:2,class:T(e.ns.e("prefix"))},{default:_(()=>[X(c)]),_:1},8,["class"])):J("v-if",!0),J(" content "),X(C),J(" postfix "),e.isLeaf?J("v-if",!0):(v(),F(re,{key:3},[e.node.loading?(v(),z(b,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:_(()=>[X(P)]),_:1},8,["class"])):(v(),z(b,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:_(()=>[X(L)]),_:1},8,["class"]))],64))],42,fa)}var ma=Se(pa,[["render",va],["__file","node.vue"]]);const ga=de({name:"ElCascaderMenu",components:{Loading:et,ElIcon:he,ElScrollbar:ot,ElCascaderNode:ma},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=Vt(),l=ue("cascader-menu"),{t:s}=at(),o=Yt();let p=null,u=null;const m=tt(ze),c=S(null),b=g(()=>!e.nodes.length),C=g(()=>!m.initialLoaded),P=g(()=>`${o.value}-${e.index}`),L=H=>{p=H.target},B=H=>{if(!(!m.isHoverMenu||!p||!c.value))if(p.contains(H.target)){K();const V=a.vnode.el,{left:q}=V.getBoundingClientRect(),{offsetWidth:D,offsetHeight:Y}=V,I=H.clientX-q,y=p.offsetTop,M=y+p.offsetHeight;c.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${I} ${y} L${D} 0 V${y} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${I} ${M} L${D} ${Y} V${M} Z" />
        `}else u||(u=window.setTimeout(O,m.config.hoverThreshold))},K=()=>{u&&(clearTimeout(u),u=null)},O=()=>{c.value&&(c.value.innerHTML="",K())};return{ns:l,panel:m,hoverZone:c,isEmpty:b,isLoading:C,menuId:P,t:s,handleExpand:L,handleMouseMove:B,clearHoverZone:O}}});function ba(e,a,l,s,o,p){const u=Z("el-cascader-node"),m=Z("loading"),c=Z("el-icon"),b=Z("el-scrollbar");return v(),z(b,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:_(()=>{var C;return[(v(!0),F(re,null,me(e.nodes,P=>(v(),z(u,{key:P.uid,node:P,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(v(),F("div",{key:0,class:T(e.ns.e("empty-text"))},[X(c,{size:"14",class:T(e.ns.is("loading"))},{default:_(()=>[X(m)]),_:1},8,["class"]),Tt(" "+ne(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(v(),F("div",{key:1,class:T(e.ns.e("empty-text"))},ne(e.t("el.cascader.noData")),3)):(C=e.panel)!=null&&C.isHoverMenu?(v(),F("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):J("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ya=Se(ga,[["render",ba],["__file","menu.vue"]]);let ka=0;const Ca=e=>{const a=[e];let{parent:l}=e;for(;l;)a.unshift(l),l=l.parent;return a};class ce{constructor(a,l,s,o=!1){this.data=a,this.config=l,this.parent=s,this.root=o,this.uid=ka++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:u,children:m}=l,c=a[m],b=Ca(this);this.level=o?0:s?s.level+1:1,this.value=a[p],this.label=a[u],this.pathNodes=b,this.pathValues=b.map(C=>C.value),this.pathLabels=b.map(C=>C.label),this.childrenData=c,this.children=(c||[]).map(C=>new ce(C,l,this)),this.loaded=!l.lazy||this.isLeaf||!Fe(c)}get isDisabled(){const{data:a,parent:l,config:s}=this,{disabled:o,checkStrictly:p}=s;return(qe(o)?o(a,this):!!a[o])||!p&&(l==null?void 0:l.isDisabled)}get isLeaf(){const{data:a,config:l,childrenData:s,loaded:o}=this,{lazy:p,leaf:u}=l,m=qe(u)?u(a,this):a[u];return Pt(m)?p&&!o?!1:!(Array.isArray(s)&&s.length):!!m}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(a){const{childrenData:l,children:s}=this,o=new ce(a,this.config,this);return Array.isArray(l)?l.push(a):this.childrenData=[a],s.push(o),o}calcText(a,l){const s=a?this.pathLabels.join(l):this.label;return this.text=s,s}broadcast(a,...l){const s=`onParent${We(a)}`;this.children.forEach(o=>{o&&(o.broadcast(a,...l),o[s]&&o[s](...l))})}emit(a,...l){const{parent:s}=this,o=`onChild${We(a)}`;s&&(s[o]&&s[o](...l),s.emit(a,...l))}onParentCheck(a){this.isDisabled||this.setCheckState(a)}onChildCheck(){const{children:a}=this,l=a.filter(o=>!o.isDisabled),s=l.length?l.every(o=>o.checked):!1;this.setCheckState(s)}setCheckState(a){const l=this.children.length,s=this.children.reduce((o,p)=>{const u=p.checked?1:p.indeterminate?.5:0;return o+u},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&a,this.indeterminate=this.loaded&&s!==l&&s>0}doCheck(a){if(this.checked===a)return;const{checkStrictly:l,multiple:s}=this.config;l||!s?this.checked=a:(this.broadcast("check",a),this.setCheckState(a),this.emit("check"))}}const xe=(e,a)=>e.reduce((l,s)=>(s.isLeaf?l.push(s):(!a&&l.push(s),l=l.concat(xe(s.children,a))),l),[]);class Ye{constructor(a,l){this.config=l;const s=(a||[]).map(o=>new ce(o,this.config));this.nodes=s,this.allNodes=xe(s,!1),this.leafNodes=xe(s,!0)}getNodes(){return this.nodes}getFlattedNodes(a){return a?this.leafNodes:this.allNodes}appendNode(a,l){const s=l?l.appendChild(a):new ce(a,this.config);l||this.nodes.push(s),this.allNodes.push(s),s.isLeaf&&this.leafNodes.push(s)}appendNodes(a,l){a.forEach(s=>this.appendNode(s,l))}getNodeByValue(a,l=!1){return!a&&a!==0?null:this.getFlattedNodes(l).find(o=>be(o.value,a)||be(o.pathValues,a))||null}getSameNode(a){return a&&this.getFlattedNodes(!1).find(({value:s,level:o})=>be(a.value,s)&&a.level===o)||null}}const ut=st({modelValue:{type:ge([Number,String,Array])},options:{type:ge(Array),default:()=>[]},props:{type:ge(Object),default:()=>({})}}),Na={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Lt,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Ea=e=>g(()=>({...Na,...e.props})),Ge=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},wa=e=>{if(!e)return;const a=e.querySelector("input");a?a.click():aa(e)&&e.click()},$a=(e,a)=>{const l=a.slice(0),s=l.map(p=>p.uid),o=e.reduce((p,u)=>{const m=s.indexOf(u.uid);return m>-1&&(p.push(u),l.splice(m,1),s.splice(m,1)),p},[]);return o.push(...l),o},Sa=de({name:"ElCascaderPanel",components:{ElCascaderMenu:ya},props:{...ut,border:{type:Boolean,default:!0},renderLabel:Function},emits:[we,$e,"close","expand-change"],setup(e,{emit:a,slots:l}){let s=!1;const o=ue("cascader"),p=Ea(e);let u=null;const m=S(!0),c=S([]),b=S(null),C=S([]),P=S(null),L=S([]),B=g(()=>p.value.expandTrigger==="hover"),K=g(()=>e.renderLabel||l.default),O=()=>{const{options:r}=e,h=p.value;s=!1,u=new Ye(r,h),C.value=[u.getNodes()],h.lazy&&Fe(e.options)?(m.value=!1,H(void 0,f=>{f&&(u=new Ye(f,h),C.value=[u.getNodes()]),m.value=!0,x(!1,!0)})):x(!1,!0)},H=(r,h)=>{const f=p.value;r=r||new ce({},f,void 0,!0),r.loading=!0;const N=w=>{const E=r,U=E.root?null:E;w&&(u==null||u.appendNodes(w,U)),E.loading=!1,E.loaded=!0,E.childrenData=E.childrenData||[],h&&h(w)};f.lazyLoad(r,N)},V=(r,h)=>{var f;const{level:N}=r,w=C.value.slice(0,N);let E;r.isLeaf?E=r.pathNodes[N-2]:(E=r,w.push(r.children)),((f=P.value)==null?void 0:f.uid)!==(E==null?void 0:E.uid)&&(P.value=r,C.value=w,!h&&a("expand-change",(r==null?void 0:r.pathValues)||[]))},q=(r,h,f=!0)=>{const{checkStrictly:N,multiple:w}=p.value,E=L.value[0];s=!0,!w&&(E==null||E.doCheck(!1)),r.doCheck(h),M(),f&&!w&&!N&&a("close"),!f&&!w&&!N&&D(r)},D=r=>{r&&(r=r.parent,D(r),r&&V(r))},Y=r=>u==null?void 0:u.getFlattedNodes(r),I=r=>{var h;return(h=Y(r))==null?void 0:h.filter(f=>f.checked!==!1)},y=()=>{L.value.forEach(r=>r.doCheck(!1)),M(),C.value=C.value.slice(0,1),P.value=null,a("expand-change",[])},M=()=>{var r;const{checkStrictly:h,multiple:f}=p.value,N=L.value,w=I(!h),E=$a(N,w),U=E.map($=>$.valueByOption);L.value=E,b.value=f?U:(r=U[0])!=null?r:null},x=(r=!1,h=!1)=>{const{modelValue:f}=e,{lazy:N,multiple:w,checkStrictly:E}=p.value,U=!E;if(!(!m.value||s||!h&&be(f,b.value)))if(N&&!r){const ae=je(ca(Je(f))).map(W=>u==null?void 0:u.getNodeByValue(W)).filter(W=>!!W&&!W.loaded&&!W.loading);ae.length?ae.forEach(W=>{H(W,()=>x(!1,h))}):x(!0,h)}else{const $=w?Je(f):[f],ae=je($.map(W=>u==null?void 0:u.getNodeByValue(W,U)));j(ae,h),b.value=rt(f)}},j=(r,h=!0)=>{const{checkStrictly:f}=p.value,N=L.value,w=r.filter($=>!!$&&(f||$.isLeaf)),E=u==null?void 0:u.getSameNode(P.value),U=h&&E||w[0];U?U.pathNodes.forEach($=>V($,!0)):P.value=null,N.forEach($=>$.doCheck(!1)),Re(w).forEach($=>$.doCheck(!0)),L.value=w,se(le)},le=()=>{lt&&c.value.forEach(r=>{const h=r==null?void 0:r.$el;if(h){const f=h.querySelector(`.${o.namespace.value}-scrollbar__wrap`),N=h.querySelector(`.${o.b("node")}.${o.is("active")}`)||h.querySelector(`.${o.b("node")}.in-active-path`);sa(f,N)}})},pe=r=>{const h=r.target,{code:f}=r;switch(f){case A.up:case A.down:{r.preventDefault();const N=f===A.up?-1:1;Ce(it(h,N,`.${o.b("node")}[tabindex="-1"]`));break}case A.left:{r.preventDefault();const N=c.value[Ge(h)-1],w=N==null?void 0:N.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);Ce(w);break}case A.right:{r.preventDefault();const N=c.value[Ge(h)+1],w=N==null?void 0:N.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);Ce(w);break}case A.enter:wa(h);break}};return Dt(ze,Re({config:p,expandingNode:P,checkedNodes:L,isHoverMenu:B,initialLoaded:m,renderLabelFn:K,lazyLoad:H,expandNode:V,handleCheckChange:q})),te([p,()=>e.options],O,{deep:!0,immediate:!0}),te(()=>e.modelValue,()=>{s=!1,x()},{deep:!0}),te(()=>b.value,r=>{be(r,e.modelValue)||(a(we,r),a($e,r))}),It(()=>c.value=[]),nt(()=>!Fe(e.modelValue)&&x()),{ns:o,menuList:c,menus:C,checkedNodes:L,handleKeyDown:pe,handleCheckChange:q,getFlattedNodes:Y,getCheckedNodes:I,clearCheckedNodes:y,calculateCheckedValue:M,scrollToExpandingNode:le}}});function Ta(e,a,l,s,o,p){const u=Z("el-cascader-menu");return v(),F("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:a[0]||(a[0]=(...m)=>e.handleKeyDown&&e.handleKeyDown(...m))},[(v(!0),F(re,null,me(e.menus,(m,c)=>(v(),z(u,{key:c,ref_for:!0,ref:b=>e.menuList[c]=b,index:c,nodes:[...m]},null,8,["index","nodes"]))),128))],34)}var Ne=Se(Sa,[["render",Ta],["__file","index.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const Va=Ne,Pa=st({...ut,size:Mt,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ge(Function),default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ge(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:oa.teleported,tagType:{...ta.type,default:"info"},validateEvent:{type:Boolean,default:!0},..._t}),La={[we]:e=>!0,[$e]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>Ft(e),expandChange:e=>!!e,removeTag:e=>!!e},Da={key:0},Ia=["placeholder","onKeydown"],Ma=["onClick"],_a="ElCascader",Fa=de({name:_a}),xa=de({...Fa,props:Pa,emits:La,setup(e,{expose:a,emit:l}){const s=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:t})=>{const{modifiersData:n,placement:i}=t;["right","left","bottom","top"].includes(i)||(n.arrow.x=35)},requires:["arrow"]}]},p=xt();let u=0,m=0;const c=ue("cascader"),b=ue("input"),{t:C}=at(),{form:P,formItem:L}=Gt(),{valueOnClear:B}=zt(s),K=S(null),O=S(null),H=S(null),V=S(null),q=S(null),D=S(!1),Y=S(!1),I=S(!1),y=S(!1),M=S(""),x=S(""),j=S([]),le=S([]),pe=S([]),r=S(!1),h=g(()=>p.style),f=g(()=>s.disabled||(P==null?void 0:P.disabled)),N=g(()=>s.placeholder||C("el.cascader.placeholder")),w=g(()=>x.value||j.value.length>0||r.value?"":N.value),E=Qt(),U=g(()=>["small"].includes(E.value)?"small":"default"),$=g(()=>!!s.props.multiple),ae=g(()=>!s.filterable||$.value),W=g(()=>$.value?x.value:M.value),ye=g(()=>{var t;return((t=V.value)==null?void 0:t.checkedNodes)||[]}),ct=g(()=>!s.clearable||f.value||I.value||!Y.value?!1:!!ye.value.length),Te=g(()=>{const{showAllLevels:t,separator:n}=s,i=ye.value;return i.length?$.value?"":i[0].calcText(t,n):""}),dt=g(()=>(L==null?void 0:L.validateState)||""),Ve=g({get(){return rt(s.modelValue)},set(t){const n=t||B.value;l(we,n),l($e,n),s.validateEvent&&(L==null||L.validate("change").catch(i=>ea()))}}),pt=g(()=>[c.b(),c.m(E.value),c.is("disabled",f.value),p.class]),ft=g(()=>[b.e("icon"),"icon-arrow-down",c.is("reverse",D.value)]),ht=g(()=>c.is("focus",D.value||y.value)),Be=g(()=>{var t,n;return(n=(t=K.value)==null?void 0:t.popperRef)==null?void 0:n.contentRef}),R=t=>{var n,i,k;f.value||(t=t??!D.value,t!==D.value&&(D.value=t,(i=(n=O.value)==null?void 0:n.input)==null||i.setAttribute("aria-expanded",`${t}`),t?(fe(),se((k=V.value)==null?void 0:k.scrollToExpandingNode)):s.filterable&&Me(),l("visibleChange",t)))},fe=()=>{se(()=>{var t;(t=K.value)==null||t.updatePopper()})},Pe=()=>{I.value=!1},Le=t=>{const{showAllLevels:n,separator:i}=s;return{node:t,key:t.uid,text:t.calcText(n,i),hitState:!1,closable:!f.value&&!t.isDisabled,isCollapseTag:!1}},De=t=>{var n;const i=t.node;i.doCheck(!1),(n=V.value)==null||n.calculateCheckedValue(),l("removeTag",i.valueByOption)},vt=()=>{if(!$.value)return;const t=ye.value,n=[],i=[];if(t.forEach(k=>i.push(Le(k))),le.value=i,t.length){t.slice(0,s.maxCollapseTags).forEach(G=>n.push(Le(G)));const k=t.slice(s.maxCollapseTags),Q=k.length;Q&&(s.collapseTags?n.push({key:-1,text:`+ ${Q}`,closable:!1,isCollapseTag:!0}):k.forEach(G=>n.push(Le(G))))}j.value=n},He=()=>{var t,n;const{filterMethod:i,showAllLevels:k,separator:Q}=s,G=(n=(t=V.value)==null?void 0:t.getFlattedNodes(!s.props.checkStrictly))==null?void 0:n.filter(ee=>ee.isDisabled?!1:(ee.calcText(k,Q),i(ee,W.value)));$.value&&(j.value.forEach(ee=>{ee.hitState=!1}),le.value.forEach(ee=>{ee.hitState=!1})),I.value=!0,pe.value=G,fe()},mt=()=>{var t;let n;I.value&&q.value?n=q.value.$el.querySelector(`.${c.e("suggestion-item")}`):n=(t=V.value)==null?void 0:t.$el.querySelector(`.${c.b("node")}[tabindex="-1"]`),n&&(n.focus(),!I.value&&n.click())},Ie=()=>{var t,n;const i=(t=O.value)==null?void 0:t.input,k=H.value,Q=(n=q.value)==null?void 0:n.$el;if(!(!lt||!i)){if(Q){const G=Q.querySelector(`.${c.e("suggestion-list")}`);G.style.minWidth=`${i.offsetWidth}px`}if(k){const{offsetHeight:G}=k,ee=j.value.length>0?`${Math.max(G+6,u)}px`:`${u}px`;i.style.height=ee,fe()}}},gt=t=>{var n;return(n=V.value)==null?void 0:n.getCheckedNodes(t)},bt=t=>{fe(),l("expandChange",t)},oe=t=>{var n;const i=(n=t.target)==null?void 0:n.value;if(t.type==="compositionend")r.value=!1,se(()=>_e(i));else{const k=i[i.length-1]||"";r.value=!la(k)}},yt=t=>{if(!r.value)switch(t.code){case A.enter:R();break;case A.down:R(!0),se(mt),t.preventDefault();break;case A.esc:D.value===!0&&(t.preventDefault(),t.stopPropagation(),R(!1));break;case A.tab:R(!1);break}},kt=()=>{var t;(t=V.value)==null||t.clearCheckedNodes(),!D.value&&s.filterable&&Me(),R(!1)},Me=()=>{const{value:t}=Te;M.value=t,x.value=t},Ct=t=>{var n,i;const{checked:k}=t;$.value?(n=V.value)==null||n.handleCheckChange(t,!k,!1):(!k&&((i=V.value)==null||i.handleCheckChange(t,!0,!1)),R(!1))},Nt=t=>{const n=t.target,{code:i}=t;switch(i){case A.up:case A.down:{const k=i===A.up?-1:1;Ce(it(n,k,`.${c.e("suggestion-item")}[tabindex="-1"]`));break}case A.enter:n.click();break}},Et=()=>{const t=j.value,n=t[t.length-1];m=x.value?0:m+1,!(!n||!m||s.collapseTags&&t.length>1)&&(n.hitState?De(n):n.hitState=!0)},Ae=t=>{const n=t.target,i=c.e("search-input");n.className===i&&(y.value=!0),l("focus",t)},Ke=t=>{y.value=!1,l("blur",t)},wt=ra(()=>{const{value:t}=W;if(!t)return;const n=s.beforeFilter(t);Bt(n)?n.then(He).catch(()=>{}):n!==!1?He():Pe()},s.debounce),_e=(t,n)=>{!D.value&&R(!0),!(n!=null&&n.isComposing)&&(t?wt():Pe())},Oe=t=>Number.parseFloat(Zt(b.cssVarName("input-height"),t).value)-2;return te(I,fe),te([ye,f],vt),te(j,()=>{se(()=>Ie())}),te(E,async()=>{await se();const t=O.value.input;u=Oe(t)||u,Ie()}),te(Te,Me,{immediate:!0}),nt(()=>{const t=O.value.input,n=Oe(t);u=t.offsetHeight||n,Ht(t,Ie)}),a({getCheckedNodes:gt,cascaderPanelRef:V,togglePopperVisible:R,contentRef:Be}),(t,n)=>(v(),z(d(Xe),{ref_key:"tooltipRef",ref:K,visible:D.value,teleported:t.teleported,"popper-class":[d(c).e("dropdown"),t.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${d(c).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Pe},{default:_(()=>[ke((v(),F("div",{class:T(d(pt)),style:At(d(h)),onClick:n[5]||(n[5]=()=>R(d(ae)?void 0:!0)),onKeydown:yt,onMouseenter:n[6]||(n[6]=i=>Y.value=!0),onMouseleave:n[7]||(n[7]=i=>Y.value=!1)},[X(d(na),{ref_key:"input",ref:O,modelValue:M.value,"onUpdate:modelValue":n[1]||(n[1]=i=>M.value=i),placeholder:d(w),readonly:d(ae),disabled:d(f),"validate-event":!1,size:d(E),class:T(d(ht)),tabindex:d($)&&t.filterable&&!d(f)?-1:void 0,onCompositionstart:oe,onCompositionupdate:oe,onCompositionend:oe,onFocus:Ae,onBlur:Ke,onInput:_e},{suffix:_(()=>[d(ct)?(v(),z(d(he),{key:"clear",class:T([d(b).e("icon"),"icon-circle-close"]),onClick:ve(kt,["stop"])},{default:_(()=>[X(d(Kt))]),_:1},8,["class","onClick"])):(v(),z(d(he),{key:"arrow-down",class:T(d(ft)),onClick:n[0]||(n[0]=ve(i=>R(),["stop"]))},{default:_(()=>[X(d(Ot))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),d($)?(v(),F("div",{key:0,ref_key:"tagWrapper",ref:H,class:T([d(c).e("tags"),d(c).is("validate",!!d(dt))])},[(v(!0),F(re,null,me(j.value,i=>(v(),z(d(Ze),{key:i.key,type:t.tagType,size:d(U),hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:k=>De(i)},{default:_(()=>[i.isCollapseTag===!1?(v(),F("span",Da,ne(i.text),1)):(v(),z(d(Xe),{key:1,disabled:D.value||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:_(()=>[ie("span",null,ne(i.text),1)]),content:_(()=>[ie("div",{class:T(d(c).e("collapse-tags"))},[(v(!0),F(re,null,me(le.value.slice(t.maxCollapseTags),(k,Q)=>(v(),F("div",{key:Q,class:T(d(c).e("collapse-tag"))},[(v(),z(d(Ze),{key:k.key,class:"in-tooltip",type:t.tagType,size:d(U),hit:k.hitState,closable:k.closable,"disable-transitions":"",onClose:G=>De(k)},{default:_(()=>[ie("span",null,ne(k.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),t.filterable&&!d(f)?ke((v(),F("input",{key:0,"onUpdate:modelValue":n[2]||(n[2]=i=>x.value=i),type:"text",class:T(d(c).e("search-input")),placeholder:d(Te)?"":d(N),onInput:n[3]||(n[3]=i=>_e(x.value,i)),onClick:n[4]||(n[4]=ve(i=>R(!0),["stop"])),onKeydown:qt(Et,["delete"]),onCompositionstart:oe,onCompositionupdate:oe,onCompositionend:oe,onFocus:Ae,onBlur:Ke},null,42,Ia)),[[Rt,x.value]]):J("v-if",!0)],2)):J("v-if",!0)],38)),[[d(ia),()=>R(!1),d(Be)]])]),content:_(()=>[ke(X(d(Va),{ref_key:"cascaderPanelRef",ref:V,modelValue:d(Ve),"onUpdate:modelValue":n[8]||(n[8]=i=>Ut(Ve)?Ve.value=i:null),options:t.options,props:s.props,border:!1,"render-label":t.$slots.default,onExpandChange:bt,onClose:n[9]||(n[9]=i=>t.$nextTick(()=>R(!1)))},null,8,["modelValue","options","props","render-label"]),[[Ue,!I.value]]),t.filterable?ke((v(),z(d(ot),{key:0,ref_key:"suggestionPanel",ref:q,tag:"ul",class:T(d(c).e("suggestion-panel")),"view-class":d(c).e("suggestion-list"),onKeydown:Nt},{default:_(()=>[pe.value.length?(v(!0),F(re,{key:0},me(pe.value,i=>(v(),F("li",{key:i.uid,class:T([d(c).e("suggestion-item"),d(c).is("checked",i.checked)]),tabindex:-1,onClick:k=>Ct(i)},[ie("span",null,ne(i.text),1),i.checked?(v(),z(d(he),{key:0},{default:_(()=>[X(d(Qe))]),_:1})):J("v-if",!0)],10,Ma))),128)):Wt(t.$slots,"empty",{key:1},()=>[ie("li",{class:T(d(c).e("empty-text"))},ne(d(C)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ue,I.value]]):J("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Ee=Se(xa,[["__file","cascader.vue"]]);Ee.install=e=>{e.component(Ee.name,Ee)};const za=Ee,Qa=za;export{Qa as E};
