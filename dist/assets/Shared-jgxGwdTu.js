import{d as B,s as F,l as s,o as g,f as x,S as t,P as h,w as i,Q as c,R as P,F as N,W as R,c as U}from"./index-DCymUriE.js";import{E as D}from"./el-pagination-B8PouJoM.js";/* empty css                 */import"./el-tag-DGC2aVaR.js";import"./el-select-HJ0349bq.js";import"./el-scrollbar-ClrM89cs.js";import"./el-popper-DHDkudva.js";import{E as L,a as V}from"./el-table-column-Di21ZrSU.js";import"./el-checkbox-DnNS-a_c.js";import"./el-tooltip-l0sNRNKZ.js";import{E as G}from"./el-link-CVC-wzqc.js";import"./el-button-CGe7P6HV.js";import{T as I}from"./index-CNWTdEvo.js";import{a as m}from"./index-w5wNAvWG.js";/* empty css                   *//* empty css                       *//* empty css                   */import{a as n}from"./request-DQ5XCXvm.js";import{E as M}from"./index-pxthzcV8.js";import{E as Q}from"./index-BMPUIIAk.js";import"./index-K09NX3RV.js";import"./isEqual-DTsO2ngT.js";import"./_initCloneObject-m1lQx9l7.js";import"./index-tMURie_q.js";import"./event-BB_Ol6Sd.js";import"./scroll-DC0HVVqi.js";import"./castArray-B2aWF81D.js";import"./isArrayLikeObject-IEHWKhwp.js";import"./el-form-item-BO1QLts8.js";import"./_baseClone-D6GWRTx2.js";import"./el-date-picker-CxB1hIT5.js";import"./arrays-6TrVLtTe.js";import"./index-BRIPB4uN.js";import"./el-radio-EOaM3hYs.js";/* empty css                          */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CD1uVtb3.js";import"./vnode-fWQkEeHF.js";import"./aria-KgdLjl5h.js";import"./validator-p8lTyf2E.js";const W={class:"s-flex-col",style:{height:"100%"}},$={class:"s-table-operations"},j={class:"s-flex-auto",style:{"min-height":"0"}},q={class:"s-table-pagination"},De=B({__name:"Shared",setup(A){const l=F({page:1,perPage:10}),f=s(0),_=s({}),b=s([]),d=s(null),v=s([]),k=e=>{_.value=e,l.page=1,p()},p=async()=>{m.getList({status:3,...l,..._.value}).then(e=>{e.code===0&&(b.value=e.data.data,f.value=e.data.total)})},w=e=>{m.getClues({id:e}).then(o=>{o.code===0?(n.success("领取成功"),p()):n.error(o.msg)})},C=()=>{let e=d.value.getSelectionRows().map(o=>o.id);if(e.length===0){n.warning("请选择需要领取的线索");return}w(e)},E=()=>{let e=d.value.getSelectionRows().map(o=>o.id);if(e.length===0){n.warning("请选择需要删除的线索");return}M.confirm("确定删除所选线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.del({id:e}).then(o=>{o.code===0?(n.success("删除成功"),p()):n.error(o.msg)})}).catch(()=>{})};m.getSearchField().then(e=>{e.code===0&&(v.value=e.data)});const y=s([]);return(()=>{m.getCustomField().then(e=>{e.code===0&&(y.value=e.data)})})(),p(),(e,o)=>{const u=Q,r=L,S=G,T=V,z=D;return g(),x("div",W,[t(I,{data:v.value,onSearch:k},null,8,["data"]),h("div",$,[t(u,{size:"small",onClick:C},{default:i(()=>[c("领取")]),_:1}),t(u,{size:"small",onClick:E},{default:i(()=>[c("删除")]),_:1})]),h("div",j,[t(T,{ref_key:"tableRef",ref:d,data:b.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:i(()=>[t(r,{type:"selection",width:"42"}),t(r,{prop:"companyName",label:"公司名称",width:"180"},{default:i(a=>[t(S,{href:"/market/clues/info?type=1&id="+a.row.id+"&exhibitionId="+a.row.exhibitionId+"&authUser="+a.row.authUser,type:"primary"},{default:i(()=>[c(P(a.row.companyName),1)]),_:2},1032,["href"])]),_:1}),t(r,{prop:"exhibitionContact",label:"联系方式",width:"180"}),t(r,{prop:"duties",label:"职务"}),t(r,{prop:"phone",label:"电话"}),t(r,{prop:"recordTime",label:"记录时间",width:"180"}),t(r,{prop:"recordText",label:"记录内容"}),t(r,{prop:"authUser",label:"授权人"}),(g(!0),x(N,null,R(y.value,a=>(g(),U(r,{key:a.key,prop:a.key,label:a.name},null,8,["prop","label"]))),128)),t(r,{fixed:"right",label:"操作",width:"120"},{default:i(a=>[t(u,{link:"",type:"primary",size:"small",onClick:J=>w([a.row.id])},{default:i(()=>[c(" 领取 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),h("div",q,[t(z,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:f.value,"current-page":l.page,"onUpdate:currentPage":o[0]||(o[0]=a=>l.page=a),"page-size":l.perPage,"onUpdate:pageSize":o[1]||(o[1]=a=>l.perPage=a),onChange:p},null,8,["total","current-page","page-size"])])])}}});export{De as default};
