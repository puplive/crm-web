import{d as I,s as k,l as m,o as N,f as S,P as _,S as e,w as a,Q as i,a as O,ao as j,F as G,Z as Q,a8 as Z}from"./index-DVHkByco.js";import{E as A}from"./el-dialog-bp7p8zQB.js";import"./el-overlay-C63ZvL_K.js";import{E as H}from"./el-progress-DGvVOWnP.js";import{E as J,a as K}from"./el-radio-BWxioSU6.js";import{E as W}from"./el-pagination-Y47XXVE0.js";import"./el-input-Dfe8Uzhl.js";import"./el-tag-BHjyucA7.js";import"./el-select-DgBIHiZD.js";import"./el-scrollbar-CG_JaPfx.js";import{E as X,a as Y}from"./el-table-89c60yQ4.js";import"./el-checkbox-Cqc95xet.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                        */import{E as ee}from"./el-button-9__Ng1jP.js";import{T as te}from"./index-CfuTKQ2m.js";import{b as v}from"./index-DiCdjWxQ.js";import{u as oe}from"./index-B2z3K2ib.js";import{E as ae}from"./el-message-box-BcM5ZuTJ.js";/* empty css                   */import{E as d}from"./request-kZhpW0Wr.js";import"./index-C-4RkVC5.js";import"./scroll-KUqymI_7.js";import"./vnode-tcDvg3gh.js";import"./typescript-_aKlIHPK.js";import"./cloneDeep-DKPKhDVz.js";import"./isEqual-QQ34r9eu.js";import"./_initCloneObject-CSxpNamp.js";import"./isArrayLikeObject-C7wPhYU0.js";import"./el-date-picker-fOPNftKE.js";import"./arrays-6TrVLtTe.js";/* empty css                          */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./aria-KgdLjl5h.js";import"./validator-BJiU7xXV.js";const le={class:"s-table-operations"},re={class:"s-table-pagination"},Oe=I({__name:"Booth",setup(ie){Q();const w=Z(),b=k({page:1,perPage:10}),C=m(0),h=m({});w.query.id;const c=m([]),E=m(null),x=m([]),n=k({show:!1,file:"",type:1,orderId:0}),z=o=>{h.value=o,b.page=1,f()},f=()=>{v.getList({...b,...h.value}).then(o=>{o.code===0?(c.value=o.data,C.value=o.data.total):c.value=[{}]})},B=o=>{ae.confirm("是否确认要撤销订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.revoke({id:o}).then(t=>{t.code===0?(d.success("撤销成功"),f()):d.error(t.msg)})}).catch(()=>{})},y=()=>{},R=m(null);let p=m([]);const T=o=>{let t=o[0];p.value=[{name:t.name,size:t.size,uid:t.uid,status:"ready",percentage:0,raw:t}]},V=o=>{const t=o.size/1024/1024<3;return t||d.error("文件大小不能超过 3MB!"),t},D=o=>{n.show=!0,n.type=1,n.orderId=o,n.file="",p.value=[]},$=()=>{if(p.value.length===0){d.warning("请选择合同文件");return}let o=new FormData;o.append("upload",p.value[0].raw),oe(o).then(t=>{t.code===0?n.show=!1:d.error(t.msg)})},U=o=>{};return f(),(o,t)=>{const s=ee,l=X,F=Y,L=W,g=J,P=K,M=H,q=A;return N(),S(G,null,[_("div",null,[e(te,{data:x.value,onSearch:z},null,8,["data"]),_("div",le,[e(s,{size:"small",onClick:y},{default:a(()=>[i("批量下载合同")]),_:1}),e(s,{size:"small",onClick:y},{default:a(()=>[i("导出")]),_:1})]),e(F,{ref_key:"tableRef",ref:E,data:c.value,border:"","table-layout":"fixed","max-height":"300","header-row-class-name":"s-table-header"},{default:a(()=>[e(l,{type:"selection",width:"50"}),e(l,{prop:"id",label:"ID",width:"50"}),e(l,{prop:"hallCode",label:"展馆号"}),e(l,{prop:"positionCode",label:"展位号"}),e(l,{prop:"standardPrice",label:"标摊/元"}),e(l,{prop:"specialPrice",label:"特装/元"}),e(l,{prop:"specialUnit",label:"特装/㎡/个"}),e(l,{prop:"length",label:"长"}),e(l,{prop:"width",label:"宽"}),e(l,{prop:"remark",label:"备注"}),e(l,{prop:"exhibitor",label:"参展商"}),e(l,{prop:"createTime",label:"创建时间"}),e(l,{fixed:"right",label:"操作",width:"300"},{default:a(r=>[e(s,{link:"",type:"primary",size:"small",onClick:u=>o.$router.push({name:"OrderBoothDetail",query:{id:r.row.id}})},{default:a(()=>[i("详情")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:u=>o.$router.push({name:"ContractTemplates",query:{id:r.row.id}})},{default:a(()=>[i("签订合同")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:u=>D(r.row.id)},{default:a(()=>[i("上传合同")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:u=>U(r.row.id)},{default:a(()=>[i("录入到款")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:u=>B(r.row.id)},{default:a(()=>[i("撤销")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),_("div",re,[e(L,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:1e3})])]),e(q,{modelValue:n.show,"onUpdate:modelValue":t[3]||(t[3]=r=>n.show=r),title:"上传合同",width:"400"},{footer:a(()=>[e(s,{type:"primary",onClick:$},{default:a(()=>[i("确定")]),_:1}),e(s,{onClick:t[2]||(t[2]=r=>n.show=!1)},{default:a(()=>[i("取消")]),_:1})]),default:a(()=>[e(P,{modelValue:n.type,"onUpdate:modelValue":t[0]||(t[0]=r=>n.type=r)},{default:a(()=>[e(g,{value:1},{default:a(()=>[i("电子合同")]),_:1}),e(g,{value:2},{default:a(()=>[i("纸质合同")]),_:1})]),_:1},8,["modelValue"]),e(M,{ref_key:"uploadRef",ref:R,"auto-upload":!1,limit:1,"before-upload":V,"on-exceed":T,"file-list":O(p),"onUpdate:fileList":t[1]||(t[1]=r=>j(p)?p.value=r:p=r),style:{"margin-top":"10px"}},{default:a(()=>[e(s,{size:"small",type:"primary"},{default:a(()=>[i("点击上传")]),_:1})]),_:1},8,["file-list"])]),_:1},8,["modelValue"])],64)}}});export{Oe as default};
