import{d as I,s as k,l as d,o as N,f as S,P as _,S as e,w as a,Q as i,a as G,aE as O,F as j,Z as Q,a8 as Z}from"./index-BcUC0sDV.js";import{E as A}from"./el-dialog-CutjZf8L.js";import"./el-overlay-9cAl29CD.js";import{E as H}from"./el-progress-Dsr1hyJV.js";import{E as J,a as K}from"./el-radio-CAJOd0xn.js";import{E as W}from"./el-pagination-BA623ZTz.js";import"./el-input-CcUaxfjM.js";import"./el-tag-C8ilQtop.js";import"./el-select-CaF897-I.js";import"./el-scrollbar-CPGzXslm.js";import{E as X,a as Y}from"./el-table-o6ZnMJ6q.js";import"./el-checkbox-C88Dzrkj.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                        */import{E as ee}from"./el-button-VGFtfg9t.js";import{T as te}from"./index-CGtHBQM3.js";import{a as v}from"./index-DHg2I1DM.js";import{u as oe}from"./index-DSOh7pn-.js";import{E as ae}from"./el-message-box-g36UM99r.js";/* empty css                   */import{E as m}from"./request-LfwzVzzV.js";import"./index-tw6LFjf8.js";import"./index-31U4gXR_.js";import"./scroll-BDce9M3E.js";import"./vnode-kX9WXZTf.js";import"./typescript-BxLz-5vR.js";import"./cloneDeep-D7u7y-4j.js";import"./el-form-item-CQBJaBhb.js";import"./_initCloneObject-D14UNdyY.js";import"./isEqual-DmOeXhXa.js";import"./isArrayLikeObject-7jkHxvsY.js";import"./el-date-picker-DW29CK0j.js";import"./arrays-6TrVLtTe.js";/* empty css                          */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./aria-KgdLjl5h.js";import"./validator-vdBA22Mw.js";const le={class:"s-table-operations"},re={class:"s-table-pagination"},je=I({__name:"Goods",setup(ie){Q();const w=Z(),b=k({page:1,perPage:10}),C=d(0),h=d({});w.query.id;const c=d([]),E=d(null),x=d([]),n=k({show:!1,file:"",type:1,orderId:0}),z=o=>{h.value=o,b.page=1,f()},f=()=>{v.getList({...b,...h.value}).then(o=>{o.code===0?(c.value=o.data.data,C.value=o.data.total):c.value=[{}]})},R=o=>{ae.confirm("是否确认要撤销订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.revoke({id:o}).then(t=>{t.code===0?(m.success("撤销成功"),f()):m.error(t.msg)})}).catch(()=>{})},g=()=>{},B=d(null);let p=d([]);const T=o=>{let t=o[0];p.value=[{name:t.name,size:t.size,uid:t.uid,status:"ready",percentage:0,raw:t}]},V=o=>{const t=o.size/1024/1024<3;return t||m.error("文件大小不能超过 3MB!"),t},D=o=>{n.show=!0,n.type=1,n.orderId=o,n.file="",p.value=[]},$=()=>{if(p.value.length===0){m.warning("请选择合同文件");return}let o=new FormData;o.append("upload",p.value[0].raw),oe(o).then(t=>{t.code===0?n.show=!1:m.error(t.msg)})},U=o=>{};return f(),(o,t)=>{const s=ee,l=X,F=Y,L=W,y=J,P=K,M=H,q=A;return N(),S(j,null,[_("div",null,[e(te,{data:x.value,onSearch:z},null,8,["data"]),_("div",le,[e(s,{size:"small",onClick:g},{default:a(()=>[i("批量下载合同")]),_:1}),e(s,{size:"small",onClick:g},{default:a(()=>[i("导出")]),_:1})]),e(F,{ref_key:"tableRef",ref:E,data:c.value,border:"","table-layout":"fixed","max-height":"300","header-row-class-name":"s-table-header"},{default:a(()=>[e(l,{type:"selection",width:"50"}),e(l,{prop:"id",label:"ID",width:"50"}),e(l,{prop:"hallCode",label:"展馆号"}),e(l,{prop:"positionCode",label:"展位号"}),e(l,{prop:"standardPrice",label:"标摊/元"}),e(l,{prop:"specialPrice",label:"特装/元"}),e(l,{prop:"specialUnit",label:"特装/㎡/个"}),e(l,{prop:"length",label:"长"}),e(l,{prop:"width",label:"宽"}),e(l,{prop:"remark",label:"备注"}),e(l,{prop:"exhibitor",label:"参展商"}),e(l,{prop:"createTime",label:"创建时间"}),e(l,{fixed:"right",label:"操作",width:"300"},{default:a(r=>[e(s,{link:"",type:"primary",size:"small",onClick:u=>o.$router.push({name:"OrderBoothDetail",query:{id:r.row.id}})},{default:a(()=>[i("详情")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:u=>o.$router.push({name:"ContractTemplates",query:{id:r.row.id}})},{default:a(()=>[i("签订合同")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:u=>D(r.row.id)},{default:a(()=>[i("上传合同")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:u=>U(r.row.id)},{default:a(()=>[i("录入到款")]),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",size:"small",onClick:u=>R(r.row.id)},{default:a(()=>[i("撤销")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),_("div",re,[e(L,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:1e3})])]),e(q,{modelValue:n.show,"onUpdate:modelValue":t[3]||(t[3]=r=>n.show=r),title:"上传合同",width:"400"},{footer:a(()=>[e(s,{type:"primary",onClick:$},{default:a(()=>[i("确定")]),_:1}),e(s,{onClick:t[2]||(t[2]=r=>n.show=!1)},{default:a(()=>[i("取消")]),_:1})]),default:a(()=>[e(P,{modelValue:n.type,"onUpdate:modelValue":t[0]||(t[0]=r=>n.type=r)},{default:a(()=>[e(y,{value:1},{default:a(()=>[i("电子合同")]),_:1}),e(y,{value:2},{default:a(()=>[i("纸质合同")]),_:1})]),_:1},8,["modelValue"]),e(M,{ref_key:"uploadRef",ref:B,"auto-upload":!1,limit:1,"before-upload":V,"on-exceed":T,"file-list":G(p),"onUpdate:fileList":t[1]||(t[1]=r=>O(p)?p.value=r:p=r),style:{"margin-top":"10px"}},{default:a(()=>[e(s,{size:"small",type:"primary"},{default:a(()=>[i("点击上传")]),_:1})]),_:1},8,["file-list"])]),_:1},8,["modelValue"])],64)}}});export{je as default};
