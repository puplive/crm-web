import{d as I,l as r,o as R,f as N,P as u,R as S,a as q,S as t,w as a,Q as d,F as M,Z as P,a8 as U}from"./index-DGy8YaiM.js";import{E as z}from"./el-dialog-DHh5pbtB.js";import"./el-overlay-BKhi8GxI.js";import{E as A,a as Q,b as Z}from"./el-input-BrZoxqCi.js";import{E as j,a as G}from"./el-table-ChIpBGPs.js";import"./el-checkbox-3VMAPkI5.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-Dv4Quh1c.js";/* empty css                        */import"./el-tag-BH7nPyvM.js";import{E as H}from"./el-button-Bovxw4wD.js";import{a as c}from"./index-BgQhrpTv.js";/* empty css                   */import{E as J}from"./el-message-box-CL97Cg8T.js";import{E as m}from"./request-BAaZbgW9.js";import"./index-BqYhbl5u.js";import"./scroll-cHXkFjnP.js";import"./vnode-CZsncPWw.js";import"./typescript-CKMpzsq3.js";import"./_initCloneObject-kgg4kgWv.js";import"./isArrayLikeObject-C8yChd3w.js";import"./isEqual-C3CT6KsK.js";import"./rules-BWEfMqzk.js";import"./aria-KgdLjl5h.js";import"./validator-glxezYYN.js";const K={class:""},L={class:"s-top_bar",style:{"margin-bottom":"10px"}},O={style:{"margin-right":"20px"}},W={class:"s-table-operations"},X={class:"dialog-footer"},xe=I({__name:"FieldDetail",setup(Y){P();const _=U(),b=_.query.title,v=_.query.id,g=r([]),C=r(null),i=r(!1),h=r("输入名称"),f=r(!1),o=r({id:"",name:"",fieldId:v,pid:""}),y=e=>{f.value=!1,i.value=!0,o.value.id=e.id,o.value.name="",o.value.pid=e.id},w=e=>{f.value=!0,i.value=!0,o.value.id=e.id,o.value.name=e.name},x=()=>{f.value?c.editChild({name:o.value.name,id:o.value.id}).then(e=>{e.code===0?(m.success("编辑成功"),i.value=!1,p()):m.error(e.msg)}):c.addChild({fieldId:o.value.fieldId,name:o.value.name,pid:o.value.id}).then(e=>{e.code===0?(m.success("添加成功"),i.value=!1,p()):m.error(e.msg)})},V=e=>{J.confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{c.del({id:e.id}).then(l=>{l.code===0?(m.success("删除成功"),p()):m.error(l.msg)})}).catch(()=>{})},p=async()=>{c.getChild({fieldId:v}).then(e=>{e.code===0&&(g.value=e.data)})};return p(),(e,l)=>{const s=H,E=j,B=G,F=A,T=Q,$=Z,D=z;return R(),N(M,null,[u("div",K,[u("div",L,[u("span",O,S(q(b)),1),t(s,{type:"",onClick:l[0]||(l[0]=n=>e.$router.go(-1))},{default:a(()=>[d("返回")]),_:1})]),u("div",W,[t(s,{size:"small",icon:"Plus",onClick:l[1]||(l[1]=n=>y({}))},{default:a(()=>[d("新增")]),_:1})]),t(B,{data:g.value,"row-key":"id",border:"","tree-props":{children:"child"},"default-expand-all":""},{default:a(()=>[t(E,{prop:"name",label:"名称"}),t(E,{label:"操作",width:"180px"},{default:a(n=>[t(s,{link:"",type:"primary",onClick:k=>y(n.row)},{default:a(()=>[d("新增")]),_:2},1032,["onClick"]),t(s,{link:"",type:"primary",onClick:k=>w(n.row)},{default:a(()=>[d("编辑")]),_:2},1032,["onClick"]),t(s,{link:"",type:"danger",onClick:k=>V(n.row)},{default:a(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(D,{title:h.value,modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=n=>i.value=n),style:{width:"400px"}},{footer:a(()=>[u("div",X,[t(s,{onClick:l[3]||(l[3]=n=>i.value=!1)},{default:a(()=>[d("取 消")]),_:1}),t(s,{type:"primary",onClick:x},{default:a(()=>[d("确 定")]),_:1})])]),default:a(()=>[t($,{ref_key:"addformRef",ref:C,model:o.value,"label-width":"atuo"},{default:a(()=>[t(T,{label:"",prop:"name"},{default:a(()=>[t(F,{modelValue:o.value.name,"onUpdate:modelValue":l[2]||(l[2]=n=>o.value.name=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],64)}}});export{xe as default};
