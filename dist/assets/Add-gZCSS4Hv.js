import{p as Ne,M as Fe,ac as tt,ad as Be,a as re,t as w,B as ye,z as O,c as x,ae as xe,K as ke,d as j,o as h,b as P,X as _,n as E,e as p,f as J,_ as se,af as lt,F as Ve,R as Ce,ag as Oe,s as at,P as ot,J as R,a1 as X,ah as nt,y as Xe,ai as rt,U as be,A as st,h as I,i as d,H as Te,aj as Re,$ as u,ak as Y,Y as K,Z as Me,m as it,G as Pe,v as ut,I as Ke,al as ct,E as $e,w as Ge,r as dt,a5 as pt,am as ft,W as ht,an as oe,a7 as ce,a2 as mt,a3 as vt}from"./index-BIVLNmWM.js";import{E as gt,a as bt}from"./form-item-BPnJnPCB.js";/* empty css              */import{E as Se}from"./button-B4_Su8G0.js";import{E as _t}from"./progress-AqSdzTQL.js";import{g as Ue,E as yt}from"./image-viewer-D_UwmIrb.js";import{E as kt}from"./date-picker-BzJlvtdH.js";import"./scrollbar-su-oUh5G.js";import{u as Vt,C as Ct,E as Tt}from"./popper-DkX2c3KR.js";import{E as $t}from"./col-CRV_Sc2G.js";/* empty css                    */import{E as Et,a as wt}from"./radio-BistaliL.js";import{d as Mt}from"./tag-D90rsxW8.js";import{E as Pt,a as St}from"./select-DzszLBXX.js";import{b as It,c as Nt,d as Ft,h as Ut,f as At,i as Dt}from"./index-BTyK7fPv.js";import{u as Lt}from"./index-D5eIHG2l.js";/* empty css                */import{u as Ht,E as Ze}from"./index-BhmTsXvH.js";import{u as Bt,a as xt,b as Ot,c as Rt,d as Kt,e as Ye}from"./use-form-item-DosVSSW-.js";import{U as Ie,C as Yt}from"./event-BB_Ol6Sd.js";import{_ as Wt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./castArray-D-_dqhJx.js";import"./_baseClone-DHVsEPrl.js";import"./_initCloneObject-Bxri3k5D.js";import"./cloneDeep-BjVVMhQq.js";import"./isEqual-C-onn2sv.js";import"./scroll-04GwX_o2.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./arrays-6TrVLtTe.js";import"./index-mhxnRT4E.js";import"./focus-trap-D1MtqGvJ.js";const zt=Ne({color:{type:Fe(Object),required:!0},vertical:{type:Boolean,default:!1}});let Ee=!1;function fe(t,o){if(!tt)return;const a=function(e){var i;(i=o.drag)==null||i.call(o,e)},l=function(e){var i;document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",l),document.onselectstart=null,document.ondragstart=null,Ee=!1,(i=o.end)==null||i.call(o,e)},r=function(e){var i;Ee||(e.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",a),document.addEventListener("mouseup",l),document.addEventListener("touchmove",a),document.addEventListener("touchend",l),Ee=!0,(i=o.start)==null||i.call(o,e))};t.addEventListener("mousedown",r),t.addEventListener("touchstart",r)}const qt=t=>{const o=ke(),a=Be(),l=Be();function r(i){i.target!==a.value&&e(i)}function e(i){if(!l.value||!a.value)return;const m=o.vnode.el.getBoundingClientRect(),{clientX:k,clientY:N}=Ue(i);if(t.vertical){let C=N-m.top;C=Math.max(a.value.offsetHeight/2,C),C=Math.min(C,m.height-a.value.offsetHeight/2),t.color.set("alpha",Math.round((C-a.value.offsetHeight/2)/(m.height-a.value.offsetHeight)*100))}else{let C=k-m.left;C=Math.max(a.value.offsetWidth/2,C),C=Math.min(C,m.width-a.value.offsetWidth/2),t.color.set("alpha",Math.round((C-a.value.offsetWidth/2)/(m.width-a.value.offsetWidth)*100))}}return{thumb:a,bar:l,handleDrag:e,handleClick:r}},jt=(t,{bar:o,thumb:a,handleDrag:l})=>{const r=ke(),e=re("color-alpha-slider"),i=w(0),g=w(0),m=w();function k(){if(!a.value||t.vertical)return 0;const U=r.vnode.el,s=t.color.get("alpha");return U?Math.round(s*(U.offsetWidth-a.value.offsetWidth/2)/100):0}function N(){if(!a.value)return 0;const U=r.vnode.el;if(!t.vertical)return 0;const s=t.color.get("alpha");return U?Math.round(s*(U.offsetHeight-a.value.offsetHeight/2)/100):0}function C(){if(t.color&&t.color.value){const{r:U,g:s,b:n}=t.color.toRgb();return`linear-gradient(to right, rgba(${U}, ${s}, ${n}, 0) 0%, rgba(${U}, ${s}, ${n}, 1) 100%)`}return""}function F(){i.value=k(),g.value=N(),m.value=C()}ye(()=>{if(!o.value||!a.value)return;const U={drag:s=>{l(s)},end:s=>{l(s)}};fe(o.value,U),fe(a.value,U),F()}),O(()=>t.color.get("alpha"),()=>F()),O(()=>t.color.value,()=>F());const M=x(()=>[e.b(),e.is("vertical",t.vertical)]),$=x(()=>e.e("bar")),S=x(()=>e.e("thumb")),G=x(()=>({background:m.value})),Z=x(()=>({left:xe(i.value),top:xe(g.value)}));return{rootKls:M,barKls:$,barStyle:G,thumbKls:S,thumbStyle:Z,update:F}},Xt="ElColorAlphaSlider",Gt=j({name:Xt}),Zt=j({...Gt,props:zt,setup(t,{expose:o}){const a=t,{bar:l,thumb:r,handleDrag:e,handleClick:i}=qt(a),{rootKls:g,barKls:m,barStyle:k,thumbKls:N,thumbStyle:C,update:F}=jt(a,{bar:l,thumb:r,handleDrag:e});return o({update:F,bar:l,thumb:r}),(M,$)=>(h(),P("div",{class:E(p(g))},[_("div",{ref_key:"bar",ref:l,class:E(p(m)),style:J(p(k)),onClick:$[0]||($[0]=(...S)=>p(i)&&p(i)(...S))},null,6),_("div",{ref_key:"thumb",ref:r,class:E(p(N)),style:J(p(C))},null,6)],2))}});var Jt=se(Zt,[["__file","alpha-slider.vue"]]);const Qt=j({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const o=re("color-hue-slider"),a=ke(),l=w(),r=w(),e=w(0),i=w(0),g=x(()=>t.color.get("hue"));O(()=>g.value,()=>{F()});function m(M){M.target!==l.value&&k(M)}function k(M){if(!r.value||!l.value)return;const S=a.vnode.el.getBoundingClientRect(),{clientX:G,clientY:Z}=Ue(M);let U;if(t.vertical){let s=Z-S.top;s=Math.min(s,S.height-l.value.offsetHeight/2),s=Math.max(l.value.offsetHeight/2,s),U=Math.round((s-l.value.offsetHeight/2)/(S.height-l.value.offsetHeight)*360)}else{let s=G-S.left;s=Math.min(s,S.width-l.value.offsetWidth/2),s=Math.max(l.value.offsetWidth/2,s),U=Math.round((s-l.value.offsetWidth/2)/(S.width-l.value.offsetWidth)*360)}t.color.set("hue",U)}function N(){if(!l.value)return 0;const M=a.vnode.el;if(t.vertical)return 0;const $=t.color.get("hue");return M?Math.round($*(M.offsetWidth-l.value.offsetWidth/2)/360):0}function C(){if(!l.value)return 0;const M=a.vnode.el;if(!t.vertical)return 0;const $=t.color.get("hue");return M?Math.round($*(M.offsetHeight-l.value.offsetHeight/2)/360):0}function F(){e.value=N(),i.value=C()}return ye(()=>{if(!r.value||!l.value)return;const M={drag:$=>{k($)},end:$=>{k($)}};fe(r.value,M),fe(l.value,M),F()}),{bar:r,thumb:l,thumbLeft:e,thumbTop:i,hueValue:g,handleClick:m,update:F,ns:o}}});function el(t,o,a,l,r,e){return h(),P("div",{class:E([t.ns.b(),t.ns.is("vertical",t.vertical)])},[_("div",{ref:"bar",class:E(t.ns.e("bar")),onClick:o[0]||(o[0]=(...i)=>t.handleClick&&t.handleClick(...i))},null,2),_("div",{ref:"thumb",class:E(t.ns.e("thumb")),style:J({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var tl=se(Qt,[["render",el],["__file","hue-slider.vue"]]);const ll=Ne({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:lt,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:Vt.teleported,predefine:{type:Fe(Array)},validateEvent:{type:Boolean,default:!0},...Bt(["ariaLabel"])}),al={[Ie]:t=>Ve(t)||Ce(t),[Yt]:t=>Ve(t)||Ce(t),activeChange:t=>Ve(t)||Ce(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},Je=Symbol("colorPickerContextKey"),We=function(t,o,a){return[t,o*a/((t=(2-o)*a)<1?t:2-t)||0,t/2]},ol=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},nl=function(t){return typeof t=="string"&&t.includes("%")},ne=function(t,o){ol(t)&&(t="100%");const a=nl(t);return t=Math.min(o,Math.max(0,Number.parseFloat(`${t}`))),a&&(t=Number.parseInt(`${t*o}`,10)/100),Math.abs(t-o)<1e-6?1:t%o/Number.parseFloat(o)},ze={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},_e=t=>{t=Math.min(Math.round(t),255);const o=Math.floor(t/16),a=t%16;return`${ze[o]||o}${ze[a]||a}`},qe=function({r:t,g:o,b:a}){return Number.isNaN(+t)||Number.isNaN(+o)||Number.isNaN(+a)?"":`#${_e(t)}${_e(o)}${_e(a)}`},we={A:10,B:11,C:12,D:13,E:14,F:15},le=function(t){return t.length===2?(we[t[0].toUpperCase()]||+t[0])*16+(we[t[1].toUpperCase()]||+t[1]):we[t[1].toUpperCase()]||+t[1]},rl=function(t,o,a){o=o/100,a=a/100;let l=o;const r=Math.max(a,.01);a*=2,o*=a<=1?a:2-a,l*=r<=1?r:2-r;const e=(a+o)/2,i=a===0?2*l/(r+l):2*o/(a+o);return{h:t,s:i*100,v:e*100}},je=(t,o,a)=>{t=ne(t,255),o=ne(o,255),a=ne(a,255);const l=Math.max(t,o,a),r=Math.min(t,o,a);let e;const i=l,g=l-r,m=l===0?0:g/l;if(l===r)e=0;else{switch(l){case t:{e=(o-a)/g+(o<a?6:0);break}case o:{e=(a-t)/g+2;break}case a:{e=(t-o)/g+4;break}}e/=6}return{h:e*360,s:m*100,v:i*100}},de=function(t,o,a){t=ne(t,360)*6,o=ne(o,100),a=ne(a,100);const l=Math.floor(t),r=t-l,e=a*(1-o),i=a*(1-r*o),g=a*(1-(1-r)*o),m=l%6,k=[a,i,e,e,g,a][m],N=[g,a,a,i,e,e][m],C=[e,e,g,a,a,i][m];return{r:Math.round(k*255),g:Math.round(N*255),b:Math.round(C*255)}};class pe{constructor(o={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const a in o)Oe(o,a)&&(this[a]=o[a]);o.value?this.fromString(o.value):this.doOnChange()}set(o,a){if(arguments.length===1&&typeof o=="object"){for(const l in o)Oe(o,l)&&this.set(l,o[l]);return}this[`_${o}`]=a,this.doOnChange()}get(o){return o==="alpha"?Math.floor(this[`_${o}`]):this[`_${o}`]}toRgb(){return de(this._hue,this._saturation,this._value)}fromString(o){if(!o){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const a=(l,r,e)=>{this._hue=Math.max(0,Math.min(360,l)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,e)),this.doOnChange()};if(o.includes("hsl")){const l=o.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,e)=>e>2?Number.parseFloat(r):Number.parseInt(r,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:r,s:e,v:i}=rl(l[0],l[1],l[2]);a(r,e,i)}}else if(o.includes("hsv")){const l=o.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,e)=>e>2?Number.parseFloat(r):Number.parseInt(r,10));l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3&&a(l[0],l[1],l[2])}else if(o.includes("rgb")){const l=o.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,e)=>e>2?Number.parseFloat(r):Number.parseInt(r,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:r,s:e,v:i}=je(l[0],l[1],l[2]);a(r,e,i)}}else if(o.includes("#")){const l=o.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(l))return;let r,e,i;l.length===3?(r=le(l[0]+l[0]),e=le(l[1]+l[1]),i=le(l[2]+l[2])):(l.length===6||l.length===8)&&(r=le(l.slice(0,2)),e=le(l.slice(2,4)),i=le(l.slice(4,6))),l.length===8?this._alpha=le(l.slice(6))/255*100:(l.length===3||l.length===6)&&(this._alpha=100);const{h:g,s:m,v:k}=je(r,e,i);a(g,m,k)}}compare(o){return Math.abs(o._hue-this._hue)<2&&Math.abs(o._saturation-this._saturation)<1&&Math.abs(o._value-this._value)<1&&Math.abs(o._alpha-this._alpha)<1}doOnChange(){const{_hue:o,_saturation:a,_value:l,_alpha:r,format:e}=this;if(this.enableAlpha)switch(e){case"hsl":{const i=We(o,a/100,l/100);this.value=`hsla(${o}, ${Math.round(i[1]*100)}%, ${Math.round(i[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${o}, ${Math.round(a)}%, ${Math.round(l)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${qe(de(o,a,l))}${_e(r*255/100)}`;break}default:{const{r:i,g,b:m}=de(o,a,l);this.value=`rgba(${i}, ${g}, ${m}, ${this.get("alpha")/100})`}}else switch(e){case"hsl":{const i=We(o,a/100,l/100);this.value=`hsl(${o}, ${Math.round(i[1]*100)}%, ${Math.round(i[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${o}, ${Math.round(a)}%, ${Math.round(l)}%)`;break}case"rgb":{const{r:i,g,b:m}=de(o,a,l);this.value=`rgb(${i}, ${g}, ${m})`;break}default:this.value=qe(de(o,a,l))}}}const sl=j({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(t){const o=re("color-predefine"),{currentColor:a}=at(Je),l=w(e(t.colors,t.color));O(()=>a.value,i=>{const g=new pe;g.fromString(i),l.value.forEach(m=>{m.selected=g.compare(m)})}),ot(()=>{l.value=e(t.colors,t.color)});function r(i){t.color.fromString(t.colors[i])}function e(i,g){return i.map(m=>{const k=new pe;return k.enableAlpha=t.enableAlpha,k.format="rgba",k.fromString(m),k.selected=k.value===g.value,k})}return{rgbaColors:l,handleSelect:r,ns:o}}}),il=["onClick"];function ul(t,o,a,l,r,e){return h(),P("div",{class:E(t.ns.b())},[_("div",{class:E(t.ns.e("colors"))},[(h(!0),P(R,null,X(t.rgbaColors,(i,g)=>(h(),P("div",{key:t.colors[g],class:E([t.ns.e("color-selector"),t.ns.is("alpha",i._alpha<100),{selected:i.selected}]),onClick:m=>t.handleSelect(g)},[_("div",{style:J({backgroundColor:i.value})},null,4)],10,il))),128))],2)],2)}var cl=se(sl,[["render",ul],["__file","predefine.vue"]]);const dl=j({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const o=re("color-svpanel"),a=ke(),l=w(0),r=w(0),e=w("hsl(0, 100%, 50%)"),i=x(()=>{const k=t.color.get("hue"),N=t.color.get("value");return{hue:k,value:N}});function g(){const k=t.color.get("saturation"),N=t.color.get("value"),C=a.vnode.el,{clientWidth:F,clientHeight:M}=C;r.value=k*F/100,l.value=(100-N)*M/100,e.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function m(k){const C=a.vnode.el.getBoundingClientRect(),{clientX:F,clientY:M}=Ue(k);let $=F-C.left,S=M-C.top;$=Math.max(0,$),$=Math.min($,C.width),S=Math.max(0,S),S=Math.min(S,C.height),r.value=$,l.value=S,t.color.set({saturation:$/C.width*100,value:100-S/C.height*100})}return O(()=>i.value,()=>{g()}),ye(()=>{fe(a.vnode.el,{drag:k=>{m(k)},end:k=>{m(k)}}),g()}),{cursorTop:l,cursorLeft:r,background:e,colorValue:i,handleDrag:m,update:g,ns:o}}}),pl=_("div",null,null,-1),fl=[pl];function hl(t,o,a,l,r,e){return h(),P("div",{class:E(t.ns.b()),style:J({backgroundColor:t.background})},[_("div",{class:E(t.ns.e("white"))},null,2),_("div",{class:E(t.ns.e("black"))},null,2),_("div",{class:E(t.ns.e("cursor")),style:J({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},fl,6)],6)}var ml=se(dl,[["render",hl],["__file","sv-panel.vue"]]);const vl=["onKeydown"],gl=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],bl=j({name:"ElColorPicker"}),_l=j({...bl,props:ll,emits:al,setup(t,{expose:o,emit:a}){const l=t,{t:r}=nt(),e=re("color"),{formItem:i}=xt(),g=Ot(),m=Rt(),{inputId:k,isLabeledByFormItem:N}=Kt(l,{formItemContext:i}),C=w(),F=w(),M=w(),$=w(),S=w(),G=w(),{isFocused:Z,handleFocus:U,handleBlur:s}=Ht(S,{beforeBlur(v){var A;return(A=$.value)==null?void 0:A.isFocusInsideContent(v)},afterBlur(){ee(!1),te()}}),n=v=>{if(m.value)return De();U(v)};let T=!0;const f=Xe(new pe({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue})),b=w(!1),H=w(!1),W=w(""),he=x(()=>!l.modelValue&&!H.value?"transparent":me(f,l.showAlpha)),ie=x(()=>!l.modelValue&&!H.value?"":f.value),L=x(()=>N.value?void 0:l.label||l.ariaLabel||r("el.colorpicker.defaultLabel"));rt({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},x(()=>!!l.label));const z=x(()=>N.value?i==null?void 0:i.labelId:void 0),ue=x(()=>[e.b("picker"),e.is("disabled",m.value),e.bm("picker",g.value),e.is("focused",Z.value)]);function me(v,A){if(!(v instanceof pe))throw new TypeError("color should be instance of _color Class");const{r:q,g:Le,b:He}=v.toRgb();return A?`rgba(${q}, ${Le}, ${He}, ${v.get("alpha")/100})`:`rgb(${q}, ${Le}, ${He})`}function ee(v){b.value=v}const ae=Mt(ee,100,{leading:!0});function ve(){m.value||ee(!0)}function ge(){ae(!1),te()}function te(){be(()=>{l.modelValue?f.fromString(l.modelValue):(f.value="",be(()=>{H.value=!1}))})}function c(){m.value||ae(!b.value)}function V(){f.fromString(W.value)}function y(){const v=f.value;a(Ie,v),a("change",v),l.validateEvent&&(i==null||i.validate("change").catch(A=>Ye())),ae(!1),be(()=>{const A=new pe({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue});f.compare(A)||te()})}function B(){ae(!1),a(Ie,null),a("change",null),l.modelValue!==null&&l.validateEvent&&(i==null||i.validate("change").catch(v=>Ye())),te()}function D(v){if(b.value&&(ge(),Z.value)){const A=new FocusEvent("focus",v);s(A)}}function Ae(v){v.preventDefault(),v.stopPropagation(),ee(!1),te()}function Qe(v){switch(v.code){case $e.enter:case $e.space:v.preventDefault(),v.stopPropagation(),ve(),G.value.focus();break;case $e.esc:Ae(v);break}}function et(){S.value.focus()}function De(){S.value.blur()}return ye(()=>{l.modelValue&&(W.value=ie.value)}),O(()=>l.modelValue,v=>{v?v&&v!==f.value&&(T=!1,f.fromString(v)):H.value=!1}),O(()=>ie.value,v=>{W.value=v,T&&a("activeChange",v),T=!0}),O(()=>f.value,()=>{!l.modelValue&&!H.value&&(H.value=!0)}),O(()=>b.value,()=>{be(()=>{var v,A,q;(v=C.value)==null||v.update(),(A=F.value)==null||A.update(),(q=M.value)==null||q.update()})}),st(Je,{currentColor:ie}),o({color:f,show:ve,hide:ge,focus:et,blur:De}),(v,A)=>(h(),I(p(Tt),{ref_key:"popper",ref:$,visible:b.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[p(e).be("picker","panel"),p(e).b("dropdown"),v.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:v.teleported,transition:`${p(e).namespace.value}-zoom-in-top`,persistent:"",onHide:A[2]||(A[2]=q=>ee(!1))},{content:d(()=>[Te((h(),P("div",{onKeydown:Re(Ae,["esc"])},[_("div",{class:E(p(e).be("dropdown","main-wrapper"))},[u(tl,{ref_key:"hue",ref:C,class:"hue-slider",color:p(f),vertical:""},null,8,["color"]),u(ml,{ref_key:"sv",ref:F,color:p(f)},null,8,["color"])],2),v.showAlpha?(h(),I(Jt,{key:0,ref_key:"alpha",ref:M,color:p(f)},null,8,["color"])):Y("v-if",!0),v.predefine?(h(),I(cl,{key:1,ref:"predefine","enable-alpha":v.showAlpha,color:p(f),colors:v.predefine},null,8,["enable-alpha","color","colors"])):Y("v-if",!0),_("div",{class:E(p(e).be("dropdown","btns"))},[_("span",{class:E(p(e).be("dropdown","value"))},[u(p(Ze),{ref_key:"inputRef",ref:G,modelValue:W.value,"onUpdate:modelValue":A[0]||(A[0]=q=>W.value=q),"validate-event":!1,size:"small",onKeyup:Re(V,["enter"]),onBlur:V},null,8,["modelValue","onKeyup"])],2),u(p(Se),{class:E(p(e).be("dropdown","link-btn")),text:"",size:"small",onClick:B},{default:d(()=>[K(Me(p(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),u(p(Se),{plain:"",size:"small",class:E(p(e).be("dropdown","btn")),onClick:y},{default:d(()=>[K(Me(p(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,vl)),[[p(Ct),D]])]),default:d(()=>[_("div",it({id:p(k),ref_key:"triggerRef",ref:S},v.$attrs,{class:p(ue),role:"button","aria-label":p(L),"aria-labelledby":p(z),"aria-description":p(r)("el.colorpicker.description",{color:v.modelValue||""}),"aria-disabled":p(m),tabindex:p(m)?-1:v.tabindex,onKeydown:Qe,onFocus:n,onBlur:A[1]||(A[1]=(...q)=>p(s)&&p(s)(...q))}),[p(m)?(h(),P("div",{key:0,class:E(p(e).be("picker","mask"))},null,2)):Y("v-if",!0),_("div",{class:E(p(e).be("picker","trigger")),onClick:c},[_("span",{class:E([p(e).be("picker","color"),p(e).is("alpha",v.showAlpha)])},[_("span",{class:E(p(e).be("picker","color-inner")),style:J({backgroundColor:p(he)})},[Te(u(p(Pe),{class:E([p(e).be("picker","icon"),p(e).is("icon-arrow-down")])},{default:d(()=>[u(p(ut))]),_:1},8,["class"]),[[Ke,v.modelValue||H.value]]),Te(u(p(Pe),{class:E([p(e).be("picker","empty"),p(e).is("icon-close")])},{default:d(()=>[u(p(ct))]),_:1},8,["class"]),[[Ke,!v.modelValue&&!H.value]])],6)],2)],2)],16,gl)]),_:1},8,["visible","popper-class","teleported","transition"]))}});var yl=se(_l,[["__file","color-picker.vue"]]);const kl=Ge(yl),Vl=Ne({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Fe(String),default:"solid"}}),Cl=j({name:"ElDivider"}),Tl=j({...Cl,props:Vl,setup(t){const o=t,a=re("divider"),l=x(()=>a.cssVar({"border-style":o.borderStyle}));return(r,e)=>(h(),P("div",{class:E([p(a).b(),p(a).m(r.direction)]),style:J(p(l)),role:"separator"},[r.$slots.default&&r.direction!=="vertical"?(h(),P("div",{key:0,class:E([p(a).e("text"),p(a).is(r.contentPosition)])},[dt(r.$slots,"default")],2)):Y("v-if",!0)],6))}});var $l=se(Tl,[["__file","divider.vue"]]);const El=Ge($l),Q=t=>(mt("data-v-74a5cd50"),t=t(),vt(),t),wl=Q(()=>_("span",{class:"title"},"基本信息",-1)),Ml=Q(()=>_("span",{class:"title"},"时间信息",-1)),Pl=Q(()=>_("span",{class:"title"},"图片素材",-1)),Sl={class:"el-image__error"},Il={class:"image-slot"},Nl=Q(()=>_("span",{class:"title"},"展区分类",-1)),Fl=Q(()=>_("span",{class:"title"},"单价设置",-1)),Ul={class:"list"},Al={key:0,for:""},Dl={key:0,for:""},Ll={key:0,for:""},Hl=Q(()=>_("span",{class:"title"},"加收设置",-1)),Bl={class:"list"},xl=Q(()=>_("span",{class:"title"},"折扣设置",-1)),Ol={class:"list"},Rl=Q(()=>_("span",{class:"title"},"付款期限",-1)),Kl={class:"s-flex-center"},Yl=j({__name:"Add",setup(t){const o=pt();let l=ft().query.id;const r=w(null),e=Xe({exhibitionName:"",cityId:"",cityName:"",hallId:"",hallName:"",positionImgType:1,host:[""],arrangeStartTime:"",arrangeEndTime:"",startTime:"",endTime:"",saleEndTime:"",payFirst:"",payFinal:"",position:[{code:"",img:""}],cate:[{name:"",rgb:""}],unitPrice:[{text:"",price:"",num:""}],attachPrice:[{text:"",price:"",priceType:1,changeType:1},{text:"",price:"",priceType:1,changeType:-1}]}),i=w(""),g=w(["",""]),m=w(["",""]),k=w([]),N=w([]);O(g,async(s,n)=>{s&&s[0]&&s[1]?(e.arrangeStartTime=s[0],e.arrangeEndTime=s[1]):(e.arrangeStartTime="",e.arrangeEndTime="")}),O(m,async(s,n)=>{s&&s[0]&&s[1]?(e.startTime=s[0],e.endTime=s[1]):(e.startTime="",e.endTime="")}),l&&It({id:l}).then(s=>{if(s.code===0&&s.data){let n=s.data;e.exhibitionName=n.exhibitionName,e.cityId=n.cityId+"",e.cityName=n.cityName,e.hallId=n.hallId,e.hallName=n.hallName,e.positionImgType=n.positionImgType||1,e.host=n.host,e.arrangeStartTime=n.arrangeStartTime,e.arrangeEndTime=n.arrangeEndTime,g.value=[n.arrangeStartTime,n.arrangeEndTime],m.value=[n.startTime,n.endTime],e.startTime=n.startTime,e.endTime=n.endTime,e.saleEndTime=n.saleEndTime,e.payFirst=n.payFirst,e.payFinal=n.payFinal,e.position=n.position,e.cate=n.cate.length?n.cate:[{name:"",rgb:""}],e.unitPrice=n.unitPrice.length?n.unitPrice:[{text:"",price:"",num:""}];let T=0,f=0;e.attachPrice=n.add.map(b=>(b.change_type==1?T++:f++,{text:b.text,price:b.price,priceType:b.price_type,changeType:b.change_type})),n.discount.forEach(b=>{b.change_type==1?T++:f++,e.attachPrice.push({text:b.text,price:b.price,priceType:b.price_type,changeType:b.change_type})}),T===0&&e.attachPrice.push({text:"",price:"",priceType:1,changeType:1}),f===0&&e.attachPrice.push({text:"",price:"",priceType:1,changeType:-1})}}),Nt().then(s=>{s.code===0&&s.data.length>0&&(k.value=s.data)});const C=s=>{e.cityName=k.value.filter(n=>n.id==s)[0].cityName,N.value=[],e.hallId="",e.hallName=""};O(()=>e.cityId,async(s,n)=>{$()}),O(()=>e.hallId,async(s,n)=>{M()});const F=s=>{e.hallName=N.value.filter(n=>n.id==s)[0].hallName},M=()=>{e.hallId&&Ft({hallId:e.hallId}).then(s=>{s.code===0&&(i.value=s.data.url||"")})},$=()=>{e.cityId&&Ut({id:e.cityId}).then(s=>{s.code===0&&s.data.length>0&&(N.value=s.data)})},S=s=>s.size/1024/1024>3?(ce.error("文件大小不能超过 3MB!"),!1):!0,G=s=>{let n=new FormData;return n.append("upload",s.file),new Promise((T,f)=>{Lt(n).then(b=>{b.code===0?T(b.data):f(b)})})},Z=()=>{r.value.validate(s=>{s&&U()})},U=()=>{let s={};for(let n in e)if(e[n]!==void 0)if(n==="position"){let T=e[n].filter(f=>f.img);s[n]=T}else if(n==="cate"){let T=e[n].filter(f=>f.name&&f.rgb);s[n]=T}else if(n==="unitPrice"){let T=e[n].filter(f=>f.text&&f.price&&f.num);s[n]=T}else if(n==="attachPrice"){let T=e[n].filter(f=>f.text&&f.price);s[n]=T}else if(n==="host"){let T=e[n].filter(f=>f);s[n]=T}else s[n]=e[n];l?(s.id=l,At(s).then(n=>{n.code===0?(ce.success("保存成功"),o.back()):ce.error(n.msg)})):Dt(s).then(n=>{n.code===0?(ce.success("保存成功"),o.back()):ce.error(n.msg)})};return(s,n)=>{const T=El,f=Ze,b=bt,H=Pt,W=St,he=Et,ie=wt,L=Se,z=$t,ue=kt,me=yt,ee=_t,ae=ht("Picture"),ve=Pe,ge=kl,te=gt;return h(),I(te,{ref_key:"formRef",ref:r,model:e,"label-width":"auto",style:{width:"800px",margin:"0 auto"},class:"add-exhibition"},{default:d(()=>[u(T,{"content-position":"left"},{default:d(()=>[wl]),_:1}),u(z,{span:20,offset:2},{default:d(()=>[u(b,{label:"展会名称"},{default:d(()=>[u(f,{modelValue:e.exhibitionName,"onUpdate:modelValue":n[0]||(n[0]=c=>e.exhibitionName=c)},null,8,["modelValue"])]),_:1}),u(b,{label:"所在城市"},{default:d(()=>[u(W,{modelValue:e.cityId,"onUpdate:modelValue":n[1]||(n[1]=c=>e.cityId=c),filterable:"",placeholder:"",onChange:C},{default:d(()=>[(h(!0),P(R,null,X(k.value,c=>(h(),I(H,{key:c.id,label:c.cityName,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(b,{label:"所在展馆"},{default:d(()=>[u(W,{modelValue:e.hallId,"onUpdate:modelValue":n[2]||(n[2]=c=>e.hallId=c),placeholder:"",onChange:F},{default:d(()=>[(h(!0),P(R,null,X(N.value,c=>(h(),I(H,{key:c.id,label:c.hallName,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(b,{label:"展位图类型"},{default:d(()=>[u(ie,{modelValue:e.positionImgType,"onUpdate:modelValue":n[3]||(n[3]=c=>e.positionImgType=c)},{default:d(()=>[u(he,{value:1},{default:d(()=>[K("已有展位图上传")]),_:1}),u(he,{value:2},{default:d(()=>[K("在线自定义展位")]),_:1})]),_:1},8,["modelValue"])]),_:1}),(h(!0),P(R,null,X(e.host,(c,V)=>(h(),I(b,{key:V,label:V>0?" ":"主办单位",prop:"form.host."+V},{default:d(()=>[u(f,{modelValue:e.host[V],"onUpdate:modelValue":y=>e.host[V]=y},{append:d(()=>[V===0?(h(),I(L,{key:0,icon:"Plus",onClick:n[4]||(n[4]=()=>{e.host.push("")})})):(h(),I(L,{key:1,icon:"Minus",onClick:oe(()=>{e.host.splice(V,1)},["prevent"])},null,8,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"]))),128))]),_:1}),u(T,{"content-position":"left"},{default:d(()=>[Ml]),_:1}),u(z,{span:20,offset:2},{default:d(()=>[u(b,{label:"布展日期"},{default:d(()=>[u(ue,{modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=c=>g.value=c),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"至","start-placeholder":"","end-placeholder":"","disabled-date":c=>e.startTime?new Date(e.startTime).getTime()-1e3*60*60*24<c.getTime():!1},null,8,["modelValue","disabled-date"])]),_:1}),u(b,{label:"开展日期"},{default:d(()=>[u(ue,{modelValue:m.value,"onUpdate:modelValue":n[6]||(n[6]=c=>m.value=c),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"至","start-placeholder":"","end-placeholder":"","disabled-date":c=>e.arrangeEndTime?c.getTime()<new Date(e.arrangeEndTime).getTime():!1},null,8,["modelValue","disabled-date"])]),_:1}),u(b,{label:"销售截止日期"},{default:d(()=>[u(ue,{modelValue:e.saleEndTime,"onUpdate:modelValue":n[7]||(n[7]=c=>e.saleEndTime=c),"value-format":"YYYY-MM-DD",type:"date",placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),u(T,{"content-position":"left"},{default:d(()=>[Pl]),_:1}),u(z,{span:20,offset:2},{default:d(()=>[u(b,{label:"招展平面图"},{default:d(()=>[u(me,{src:i.value,"preview-src-list":[i.value],fit:"contain",style:{width:"100px",height:"100px"}},{error:d(()=>[_("div",Sl,Me(i.value==""?"暂无图片":"加载失败"),1)]),_:1},8,["src","preview-src-list"])]),_:1}),u(b,{label:"展位图"},{default:d(()=>[(h(!0),P(R,null,X(e.position,(c,V)=>(h(),P("div",{key:V,style:{display:"flex","align-items":"center","margin-bottom":"10px"}},[u(f,{modelValue:c.code,"onUpdate:modelValue":y=>c.code=y,placeholder:"展馆号",style:{"max-width":"220px"}},{append:d(()=>[V===0?(h(),I(L,{key:0,icon:"Plus",onClick:n[8]||(n[8]=()=>{e.position.push({code:"",img:""})})})):(h(),I(L,{key:1,icon:"Minus",onClick:oe(()=>{e.position.splice(V,1)},["prevent"])},null,8,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"]),u(ee,{style:{"margin-left":"10px",display:"inline-flex","align-items":"center","justify-content":"center"},class:"","show-file-list":!1,"on-success":(y,B,D)=>{e.position[V].img=y.url},"before-upload":S,"http-request":G,accept:"image/*"},{default:d(()=>[u(L,{link:"",type:"primary"},{default:d(()=>[K("上传图片")]),_:1})]),_:2},1032,["on-success"]),c.img?(h(),I(me,{key:0,src:c.img,"preview-src-list":[c.img],fit:"cover",style:{width:"32px",height:"32px","margin-left":"10px"}},{error:d(()=>[_("div",Il,[u(ve,null,{default:d(()=>[u(ae)]),_:1})])]),_:2},1032,["src","preview-src-list"])):Y("",!0)]))),128))]),_:1})]),_:1}),e.positionImgType==2?(h(),P(R,{key:0},[u(T,{"content-position":"left"},{default:d(()=>[Nl]),_:1}),u(z,{span:20,offset:2},{default:d(()=>[(h(!0),P(R,null,X(e.cate,(c,V)=>(h(),I(b,{label:" "},{default:d(()=>[u(f,{modelValue:c.name,"onUpdate:modelValue":y=>c.name=y,placeholder:"请输入展区分类",style:{"max-width":"220px"}},{append:d(()=>[V===0?(h(),I(L,{key:0,icon:"Plus",onClick:n[9]||(n[9]=()=>{e.cate.push({name:"",rgb:""})})})):(h(),I(L,{key:1,icon:"Minus",onClick:oe(()=>{e.cate.splice(V,1)},["prevent"])},null,8,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"]),u(ge,{style:{"margin-left":"10px"},modelValue:c.rgb,"onUpdate:modelValue":y=>c.rgb=y},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})],64)):Y("",!0),u(T,{"content-position":"left"},{default:d(()=>[Fl]),_:1}),u(z,{span:20,offset:2},{default:d(()=>[(h(!0),P(R,null,X(e.unitPrice,(c,V)=>(h(),I(b,{label:" "},{default:d(()=>[_("div",Ul,[_("div",null,[V===0?(h(),P("label",Al,"标题")):Y("",!0),u(f,{modelValue:c.text,"onUpdate:modelValue":y=>c.text=y,placeholder:"请输入标题"},null,8,["modelValue","onUpdate:modelValue"])]),_("div",null,[V===0?(h(),P("label",Dl,"单价")):Y("",!0),u(b,{label:"",prop:`unitPrice[${V}].price`,rules:[{validator:(y,B,D)=>{console.log(B),B===""?D():B<1?D(new Error("单价大于0")):D()},trigger:"blur"}]},{default:d(()=>[u(f,{modelValue:c.price,"onUpdate:modelValue":y=>c.price=y,placeholder:"请输入单价",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_("div",null,[V===0?(h(),P("label",Ll,"计价基数")):Y("",!0),u(b,{label:"",prop:`unitPrice[${V}].num`,rules:[{validator:(y,B,D)=>{B===""?D():B<1?D(new Error("计价基数大于等于1")):D()},trigger:"blur"}]},{default:d(()=>[u(f,{modelValue:c.num,"onUpdate:modelValue":y=>c.num=y,placeholder:"请输入计价基数",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),V===0?(h(),I(L,{key:0,type:"info",plain:"",icon:"Plus",onClick:n[10]||(n[10]=()=>{e.unitPrice.push({text:"",price:"",num:""})})})):(h(),I(L,{key:1,type:"info",plain:"",icon:"Minus",onClick:oe(()=>{e.unitPrice.splice(V,1)},["prevent"])},null,8,["onClick"]))])]),_:2},1024))),256))]),_:1}),u(T,{"content-position":"left"},{default:d(()=>[Hl]),_:1}),u(z,{span:20,offset:2},{default:d(()=>[(h(!0),P(R,null,X(e.attachPrice,(c,V)=>(h(),P(R,{key:V},[c.changeType===1?(h(),I(b,{key:0,label:"加收"},{default:d(()=>[_("div",Bl,[_("div",null,[u(f,{modelValue:c.text,"onUpdate:modelValue":y=>c.text=y,placeholder:"例如：双开口"},null,8,["modelValue","onUpdate:modelValue"])]),_("div",null,[u(b,{label:"",prop:`attachPrice[${V}].price`,rules:[{validator:(y,B,D)=>{B===""?D():B<1?D(new Error(c.priceType==1?"比例大于0":"金额大于0")):D()},trigger:"blur"}]},{default:d(()=>[u(f,{type:"number",modelValue:c.price,"onUpdate:modelValue":y=>c.price=y,placeholder:c.priceType==1?"设置比例":"设置金额"},{append:d(()=>[u(W,{modelValue:c.priceType,"onUpdate:modelValue":y=>c.priceType=y,placeholder:"",style:{width:"60px"}},{default:d(()=>[u(H,{label:"%",value:1}),u(H,{label:"￥",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),V===e.attachPrice.findIndex(y=>y.changeType===1)?(h(),I(L,{key:0,type:"info",plain:"",icon:"Plus",onClick:n[11]||(n[11]=()=>{e.attachPrice.push({text:"",price:"",priceType:1,changeType:1})})})):(h(),I(L,{key:1,type:"info",plain:"",icon:"Minus",onClick:oe(()=>{e.attachPrice.splice(V,1)},["prevent"])},null,8,["onClick"]))])]),_:2},1024)):Y("",!0)],64))),128))]),_:1}),u(T,{"content-position":"left"},{default:d(()=>[xl]),_:1}),u(z,{span:20,offset:2},{default:d(()=>[(h(!0),P(R,null,X(e.attachPrice,(c,V)=>(h(),P(R,{key:V},[c.changeType===-1?(h(),I(b,{key:0,label:"折扣"},{default:d(()=>[_("div",Ol,[_("div",null,[u(f,{modelValue:c.text,"onUpdate:modelValue":y=>c.text=y,placeholder:"例如：提前预定"},null,8,["modelValue","onUpdate:modelValue"])]),_("div",null,[u(b,{label:"",prop:`attachPrice[${V}].price`,rules:[{validator:(y,B,D)=>{B===""?D():B<1?D(new Error(c.priceType==1?"比例大于0":"金额大于0")):D()},trigger:"blur"}]},{default:d(()=>[u(f,{type:"number",modelValue:c.price,"onUpdate:modelValue":y=>c.price=y,placeholder:c.priceType==1?"设置比例":"设置金额"},{append:d(()=>[u(W,{modelValue:c.priceType,"onUpdate:modelValue":y=>c.priceType=y,placeholder:"",style:{width:"60px"}},{default:d(()=>[u(H,{label:"%",value:1}),u(H,{label:"￥",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),V===e.attachPrice.findIndex(y=>y.changeType===-1)?(h(),I(L,{key:0,type:"info",plain:"",icon:"Plus",onClick:n[12]||(n[12]=()=>{e.attachPrice.push({text:"",price:"",priceType:1,changeType:-1})})})):(h(),I(L,{key:1,type:"info",plain:"",icon:"Minus",onClick:oe(()=>{e.attachPrice.splice(V,1)},["prevent"])},null,8,["onClick"]))])]),_:2},1024)):Y("",!0)],64))),128))]),_:1}),u(T,{"content-position":"left"},{default:d(()=>[Rl]),_:1}),u(z,{span:20,offset:2},{default:d(()=>[u(b,{label:"一期款",prop:"payFirst"},{default:d(()=>[u(f,{type:"number",modelValue:e.payFirst,"onUpdate:modelValue":n[13]||(n[13]=c=>e.payFirst=c)},{prepend:d(()=>[K("合同签订后")]),append:d(()=>[K("个自然日")]),_:1},8,["modelValue"])]),_:1}),u(b,{label:"尾款及全款",prop:"payFirst"},{default:d(()=>[u(f,{type:"number",modelValue:e.payFinal,"onUpdate:modelValue":n[14]||(n[14]=c=>e.payFinal=c)},{prepend:d(()=>[K("合同签订后")]),append:d(()=>[K("个自然日")]),_:1},8,["modelValue"])]),_:1})]),_:1}),_("div",Kl,[u(L,{type:"primary",onClick:Z},{default:d(()=>[K("保存")]),_:1}),u(L,{onClick:n[15]||(n[15]=c=>s.$router.go(-1))},{default:d(()=>[K("取消")]),_:1})])]),_:1},8,["model"])}}}),Va=Wt(Yl,[["__scopeId","data-v-74a5cd50"]]);export{Va as default};
