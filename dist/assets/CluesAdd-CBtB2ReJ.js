import{d as pe,u as fe,A as Dl,aj as nl,ac as ol,q as Ml,k as sl,e as $,O as J,o as c,f as L,X as Q,c as _,a8 as ge,w as b,S as T,n as H,F as K,P as te,a4 as ul,l as S,W as G,Q as ye,R as ne,E as Il,ak as He,al as je,ae as Bl,j as rl,I as ke,am as Ul,x as zl,s as Ze,v as ee,an as Hl,y as dl,M as ce,a0 as il,a2 as Al,ao as ql,a9 as Ol,ap as Rl,aq as xl,ad as Kl,C as Ee,a as i,g as Wl,ar as jl,p as Zl,a5 as Gl,as as Xl,at as Yl,D as Ge,r as Jl,Z as Ql,a7 as ea}from"./index-DuO5qCOl.js";import{E as la,a as aa}from"./el-form-item-Cu1KkJ1t.js";/* empty css                 */import{u as ta,E as Xe,C as na}from"./el-popper-BHkirKhh.js";import{d as oa}from"./el-tag-D6qwnJNq.js";import{E as cl,a as sa}from"./el-checkbox-rjeuqtkv.js";import{E as pl,a as ua}from"./el-radio-DuQPwZZa.js";import{E as vl}from"./el-scrollbar-vJTALLEq.js";/* empty css                          */import{f as ra,g as da,a as ia,b as ca,e as pa}from"./el-button-BF6LotWW.js";import{c as Ye,t as va,b as Je,E as fa,a as ha}from"./el-select-CbMMSZu0.js";import{a as ae}from"./index-vHLTxjU5.js";import{c as Qe}from"./index-98E9g1IR.js";import{_ as re}from"./rules-BWEfMqzk.js";/* empty css                   */import{E as W,a as Ve}from"./request-BhcMgum5.js";import{E as fl,i as ma}from"./index-D0AcFqj2.js";import{E as ya}from"./index-DsHhOPYe.js";import{_ as Fe,E as be,u as ga,d as ka}from"./index-00qRAo0A.js";import{i as Ce}from"./isEqual-BLHZt2FS.js";import{i as ba,f as _e,g as hl}from"./aria-KgdLjl5h.js";import{U as Se,C as Te}from"./event-BB_Ol6Sd.js";import{u as el,c as ll}from"./arrays-6TrVLtTe.js";import{s as Ca}from"./scroll-Cg5HvfrT.js";import{c as ml}from"./cloneDeep-wyYb54UJ.js";import{_ as Na}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./castArray-BQFRVikh.js";import"./_baseClone-CDORlhWC.js";import"./_initCloneObject-f8GnqyNx.js";var Ea=1/0;function Va(e){var a=e==null?0:e.length;return a?ra(e,Ea):[]}var _a=pe({name:"NodeContent",setup(){return{ns:fe("cascader-node")}},render(){const{ns:e}=this,{node:a,panel:o}=this.$parent,{data:s,label:t}=a,{renderLabelFn:y}=o;return Dl("span",{class:e.e("label")},y?y({node:a,data:s}):t)}});const qe=Symbol(),$a=pe({name:"ElCascaderNode",components:{ElCheckbox:cl,ElRadio:pl,NodeContent:_a,ElIcon:be,Check:nl,Loading:ol,ArrowRight:Ml},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const o=sl(qe),s=fe("cascader-node"),t=$(()=>o.isHoverMenu),y=$(()=>o.config.multiple),v=$(()=>o.config.checkStrictly),k=$(()=>{var V;return(V=o.checkedNodes[0])==null?void 0:V.uid}),p=$(()=>e.node.isDisabled),N=$(()=>e.node.isLeaf),w=$(()=>v.value&&!N.value||!p.value),I=$(()=>q(o.expandingNode)),z=$(()=>v.value&&o.checkedNodes.some(q)),q=V=>{var B;const{level:A,uid:j}=e.node;return((B=V==null?void 0:V.pathNodes[A-1])==null?void 0:B.uid)===j},R=()=>{I.value||o.expandNode(e.node)},x=V=>{const{node:B}=e;V!==B.checked&&o.handleCheckChange(B,V)},O=()=>{o.lazyLoad(e.node,()=>{N.value||R()})},g=V=>{t.value&&(h(),!N.value&&a("expand",V))},h=()=>{const{node:V}=e;!w.value||V.loading||(V.loaded?R():O())},C=()=>{t.value&&!N.value||(N.value&&!p.value&&!v.value&&!y.value?M(!0):h())},D=V=>{v.value?(x(V),e.node.loaded&&R()):M(V)},M=V=>{e.node.loaded?(x(V),!v.value&&R()):O()};return{panel:o,isHoverMenu:t,multiple:y,checkStrictly:v,checkedNodeId:k,isDisabled:p,isLeaf:N,expandable:w,inExpandingPath:I,inCheckedPath:z,ns:s,handleHoverExpand:g,handleExpand:h,handleClick:C,handleCheck:M,handleSelectCheck:D}}}),wa=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Sa=te("span",null,null,-1);function Ta(e,a,o,s,t,y){const v=J("el-checkbox"),k=J("el-radio"),p=J("check"),N=J("el-icon"),w=J("node-content"),I=J("loading"),z=J("arrow-right");return c(),L("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:H([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:a[2]||(a[2]=(...q)=>e.handleHoverExpand&&e.handleHoverExpand(...q)),onFocus:a[3]||(a[3]=(...q)=>e.handleHoverExpand&&e.handleHoverExpand(...q)),onClick:a[4]||(a[4]=(...q)=>e.handleClick&&e.handleClick(...q))},[Q(" prefix "),e.multiple?(c(),_(v,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:a[0]||(a[0]=ge(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(c(),_(k,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:a[1]||(a[1]=ge(()=>{},["stop"]))},{default:b(()=>[Q(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Sa]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(c(),_(N,{key:2,class:H(e.ns.e("prefix"))},{default:b(()=>[T(p)]),_:1},8,["class"])):Q("v-if",!0),Q(" content "),T(w),Q(" postfix "),e.isLeaf?Q("v-if",!0):(c(),L(K,{key:3},[e.node.loading?(c(),_(N,{key:0,class:H([e.ns.is("loading"),e.ns.e("postfix")])},{default:b(()=>[T(I)]),_:1},8,["class"])):(c(),_(N,{key:1,class:H(["arrow-right",e.ns.e("postfix")])},{default:b(()=>[T(z)]),_:1},8,["class"]))],64))],42,wa)}var Fa=Fe($a,[["render",Ta],["__file","node.vue"]]);const Pa=pe({name:"ElCascaderMenu",components:{Loading:ol,ElIcon:be,ElScrollbar:vl,ElCascaderNode:Fa},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=Il(),o=fe("cascader-menu"),{t:s}=ul(),t=da();let y=null,v=null;const k=sl(qe),p=S(null),N=$(()=>!e.nodes.length),w=$(()=>!k.initialLoaded),I=$(()=>`${t.value}-${e.index}`),z=O=>{y=O.target},q=O=>{if(!(!k.isHoverMenu||!y||!p.value))if(y.contains(O.target)){R();const g=a.vnode.el,{left:h}=g.getBoundingClientRect(),{offsetWidth:C,offsetHeight:D}=g,M=O.clientX-h,V=y.offsetTop,B=V+y.offsetHeight;p.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${M} ${V} L${C} 0 V${V} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${M} ${B} L${C} ${D} V${B} Z" />
        `}else v||(v=window.setTimeout(x,k.config.hoverThreshold))},R=()=>{v&&(clearTimeout(v),v=null)},x=()=>{p.value&&(p.value.innerHTML="",R())};return{ns:o,panel:k,hoverZone:p,isEmpty:N,isLoading:w,menuId:I,t:s,handleExpand:z,handleMouseMove:q,clearHoverZone:x}}});function La(e,a,o,s,t,y){const v=J("el-cascader-node"),k=J("loading"),p=J("el-icon"),N=J("el-scrollbar");return c(),_(N,{key:e.menuId,tag:"ul",role:"menu",class:H(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:b(()=>{var w;return[(c(!0),L(K,null,G(e.nodes,I=>(c(),_(v,{key:I.uid,node:I,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(c(),L("div",{key:0,class:H(e.ns.e("empty-text"))},[T(p,{size:"14",class:H(e.ns.is("loading"))},{default:b(()=>[T(k)]),_:1},8,["class"]),ye(" "+ne(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(c(),L("div",{key:1,class:H(e.ns.e("empty-text"))},ne(e.t("el.cascader.noData")),3)):(w=e.panel)!=null&&w.isHoverMenu?(c(),L("svg",{key:2,ref:"hoverZone",class:H(e.ns.e("hover-zone"))},null,2)):Q("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Da=Fe(Pa,[["render",La],["__file","menu.vue"]]);let Ma=0;const Ia=e=>{const a=[e];let{parent:o}=e;for(;o;)a.unshift(o),o=o.parent;return a};class he{constructor(a,o,s,t=!1){this.data=a,this.config=o,this.parent=s,this.root=t,this.uid=Ma++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:y,label:v,children:k}=o,p=a[k],N=Ia(this);this.level=t?0:s?s.level+1:1,this.value=a[y],this.label=a[v],this.pathNodes=N,this.pathValues=N.map(w=>w.value),this.pathLabels=N.map(w=>w.label),this.childrenData=p,this.children=(p||[]).map(w=>new he(w,o,this)),this.loaded=!o.lazy||this.isLeaf||!He(p)}get isDisabled(){const{data:a,parent:o,config:s}=this,{disabled:t,checkStrictly:y}=s;return(je(t)?t(a,this):!!a[t])||!y&&(o==null?void 0:o.isDisabled)}get isLeaf(){const{data:a,config:o,childrenData:s,loaded:t}=this,{lazy:y,leaf:v}=o,k=je(v)?v(a,this):a[v];return Bl(k)?y&&!t?!1:!(Array.isArray(s)&&s.length):!!k}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(a){const{childrenData:o,children:s}=this,t=new he(a,this.config,this);return Array.isArray(o)?o.push(a):this.childrenData=[a],s.push(t),t}calcText(a,o){const s=a?this.pathLabels.join(o):this.label;return this.text=s,s}broadcast(a,...o){const s=`onParent${Ye(a)}`;this.children.forEach(t=>{t&&(t.broadcast(a,...o),t[s]&&t[s](...o))})}emit(a,...o){const{parent:s}=this,t=`onChild${Ye(a)}`;s&&(s[t]&&s[t](...o),s.emit(a,...o))}onParentCheck(a){this.isDisabled||this.setCheckState(a)}onChildCheck(){const{children:a}=this,o=a.filter(t=>!t.isDisabled),s=o.length?o.every(t=>t.checked):!1;this.setCheckState(s)}setCheckState(a){const o=this.children.length,s=this.children.reduce((t,y)=>{const v=y.checked?1:y.indeterminate?.5:0;return t+v},0);this.checked=this.loaded&&this.children.filter(t=>!t.isDisabled).every(t=>t.loaded&&t.checked)&&a,this.indeterminate=this.loaded&&s!==o&&s>0}doCheck(a){if(this.checked===a)return;const{checkStrictly:o,multiple:s}=this.config;o||!s?this.checked=a:(this.broadcast("check",a),this.setCheckState(a),this.emit("check"))}}const Ae=(e,a)=>e.reduce((o,s)=>(s.isLeaf?o.push(s):(!a&&o.push(s),o=o.concat(Ae(s.children,a))),o),[]);class al{constructor(a,o){this.config=o;const s=(a||[]).map(t=>new he(t,this.config));this.nodes=s,this.allNodes=Ae(s,!1),this.leafNodes=Ae(s,!0)}getNodes(){return this.nodes}getFlattedNodes(a){return a?this.leafNodes:this.allNodes}appendNode(a,o){const s=o?o.appendChild(a):new he(a,this.config);o||this.nodes.push(s),this.allNodes.push(s),s.isLeaf&&this.leafNodes.push(s)}appendNodes(a,o){a.forEach(s=>this.appendNode(s,o))}getNodeByValue(a,o=!1){return!a&&a!==0?null:this.getFlattedNodes(o).find(t=>Ce(t.value,a)||Ce(t.pathValues,a))||null}getSameNode(a){return a&&this.getFlattedNodes(!1).find(({value:s,level:t})=>Ce(a.value,s)&&a.level===t)||null}}const yl=rl({modelValue:{type:ke([Number,String,Array])},options:{type:ke(Array),default:()=>[]},props:{type:ke(Object),default:()=>({})}}),Ba={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Ul,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Ua=e=>$(()=>({...Ba,...e.props})),tl=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},za=e=>{if(!e)return;const a=e.querySelector("input");a?a.click():ba(e)&&e.click()},Ha=(e,a)=>{const o=a.slice(0),s=o.map(y=>y.uid),t=e.reduce((y,v)=>{const k=s.indexOf(v.uid);return k>-1&&(y.push(v),o.splice(k,1),s.splice(k,1)),y},[]);return t.push(...o),t},Aa=pe({name:"ElCascaderPanel",components:{ElCascaderMenu:Da},props:{...yl,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Se,Te,"close","expand-change"],setup(e,{emit:a,slots:o}){let s=!1;const t=fe("cascader"),y=Ua(e);let v=null;const k=S(!0),p=S([]),N=S(null),w=S([]),I=S(null),z=S([]),q=$(()=>y.value.expandTrigger==="hover"),R=$(()=>e.renderLabel||o.default),x=()=>{const{options:d}=e,E=y.value;s=!1,v=new al(d,E),w.value=[v.getNodes()],E.lazy&&He(e.options)?(k.value=!1,O(void 0,n=>{n&&(v=new al(n,E),w.value=[v.getNodes()]),k.value=!0,A(!1,!0)})):A(!1,!0)},O=(d,E)=>{const n=y.value;d=d||new he({},n,void 0,!0),d.loading=!0;const m=f=>{const P=d,X=P.root?null:P;f&&(v==null||v.appendNodes(f,X)),P.loading=!1,P.loaded=!0,P.childrenData=P.childrenData||[],E&&E(f)};n.lazyLoad(d,m)},g=(d,E)=>{var n;const{level:m}=d,f=w.value.slice(0,m);let P;d.isLeaf?P=d.pathNodes[m-2]:(P=d,f.push(d.children)),((n=I.value)==null?void 0:n.uid)!==(P==null?void 0:P.uid)&&(I.value=d,w.value=f,!E&&a("expand-change",(d==null?void 0:d.pathValues)||[]))},h=(d,E,n=!0)=>{const{checkStrictly:m,multiple:f}=y.value,P=z.value[0];s=!0,!f&&(P==null||P.doCheck(!1)),d.doCheck(E),B(),n&&!f&&!m&&a("close"),!n&&!f&&!m&&C(d)},C=d=>{d&&(d=d.parent,C(d),d&&g(d))},D=d=>v==null?void 0:v.getFlattedNodes(d),M=d=>{var E;return(E=D(d))==null?void 0:E.filter(n=>n.checked!==!1)},V=()=>{z.value.forEach(d=>d.doCheck(!1)),B(),w.value=w.value.slice(0,1),I.value=null,a("expand-change",[])},B=()=>{var d;const{checkStrictly:E,multiple:n}=y.value,m=z.value,f=M(!E),P=Ha(m,f),X=P.map(U=>U.valueByOption);z.value=P,N.value=n?X:(d=X[0])!=null?d:null},A=(d=!1,E=!1)=>{const{modelValue:n}=e,{lazy:m,multiple:f,checkStrictly:P}=y.value,X=!P;if(!(!k.value||s||!E&&Ce(n,N.value)))if(m&&!d){const ie=el(Va(ll(n))).map(Y=>v==null?void 0:v.getNodeByValue(Y)).filter(Y=>!!Y&&!Y.loaded&&!Y.loading);ie.length?ie.forEach(Y=>{O(Y,()=>A(!1,E))}):A(!0,E)}else{const U=f?ll(n):[n],ie=el(U.map(Y=>v==null?void 0:v.getNodeByValue(Y,X)));j(ie,E),N.value=ml(n)}},j=(d,E=!0)=>{const{checkStrictly:n}=y.value,m=z.value,f=d.filter(U=>!!U&&(n||U.isLeaf)),P=v==null?void 0:v.getSameNode(I.value),X=E&&P||f[0];X?X.pathNodes.forEach(U=>g(U,!0)):I.value=null,m.forEach(U=>U.doCheck(!1)),Ze(f).forEach(U=>U.doCheck(!0)),z.value=f,ce(ue)},ue=()=>{il&&p.value.forEach(d=>{const E=d==null?void 0:d.$el;if(E){const n=E.querySelector(`.${t.namespace.value}-scrollbar__wrap`),m=E.querySelector(`.${t.b("node")}.${t.is("active")}`)||E.querySelector(`.${t.b("node")}.in-active-path`);Ca(n,m)}})},de=d=>{const E=d.target,{code:n}=d;switch(n){case W.up:case W.down:{d.preventDefault();const m=n===W.up?-1:1;_e(hl(E,m,`.${t.b("node")}[tabindex="-1"]`));break}case W.left:{d.preventDefault();const m=p.value[tl(E)-1],f=m==null?void 0:m.$el.querySelector(`.${t.b("node")}[aria-expanded="true"]`);_e(f);break}case W.right:{d.preventDefault();const m=p.value[tl(E)+1],f=m==null?void 0:m.$el.querySelector(`.${t.b("node")}[tabindex="-1"]`);_e(f);break}case W.enter:za(E);break}};return zl(qe,Ze({config:y,expandingNode:I,checkedNodes:z,isHoverMenu:q,initialLoaded:k,renderLabelFn:R,lazyLoad:O,expandNode:g,handleCheckChange:h})),ee([y,()=>e.options],x,{deep:!0,immediate:!0}),ee(()=>e.modelValue,()=>{s=!1,A()},{deep:!0}),ee(()=>N.value,d=>{Ce(d,e.modelValue)||(a(Se,d),a(Te,d))}),Hl(()=>p.value=[]),dl(()=>!He(e.modelValue)&&A()),{ns:t,menuList:p,menus:w,checkedNodes:z,handleKeyDown:de,handleCheckChange:h,getFlattedNodes:D,getCheckedNodes:M,clearCheckedNodes:V,calculateCheckedValue:B,scrollToExpandingNode:ue}}});function qa(e,a,o,s,t,y){const v=J("el-cascader-menu");return c(),L("div",{class:H([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:a[0]||(a[0]=(...k)=>e.handleKeyDown&&e.handleKeyDown(...k))},[(c(!0),L(K,null,G(e.menus,(k,p)=>(c(),_(v,{key:p,ref_for:!0,ref:N=>e.menuList[p]=N,index:p,nodes:[...k]},null,8,["index","nodes"]))),128))],34)}var $e=Fe(Aa,[["render",qa],["__file","index.vue"]]);$e.install=e=>{e.component($e.name,$e)};const Oa=$e,Ra=rl({...yl,size:Al,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ke(Function),default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ke(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:ta.teleported,tagType:{...va.type,default:"info"},validateEvent:{type:Boolean,default:!0},...ql}),xa={[Se]:e=>!0,[Te]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>Ol(e),expandChange:e=>!!e,removeTag:e=>!!e},Ka={key:0},Wa=["placeholder","onKeydown"],ja=["onClick"],Za="ElCascader",Ga=pe({name:Za}),Xa=pe({...Ga,props:Ra,emits:xa,setup(e,{expose:a,emit:o}){const s=e,t={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:l})=>{const{modifiersData:u,placement:r}=l;["right","left","bottom","top"].includes(r)||(u.arrow.x=35)},requires:["arrow"]}]},y=Rl();let v=0,k=0;const p=fe("cascader"),N=fe("input"),{t:w}=ul(),{form:I,formItem:z}=ia(),{valueOnClear:q}=xl(s),R=S(null),x=S(null),O=S(null),g=S(null),h=S(null),C=S(!1),D=S(!1),M=S(!1),V=S(!1),B=S(""),A=S(""),j=S([]),ue=S([]),de=S([]),d=S(!1),E=$(()=>y.style),n=$(()=>s.disabled||(I==null?void 0:I.disabled)),m=$(()=>s.placeholder||w("el.cascader.placeholder")),f=$(()=>A.value||j.value.length>0||d.value?"":m.value),P=ca(),X=$(()=>["small"].includes(P.value)?"small":"default"),U=$(()=>!!s.props.multiple),ie=$(()=>!s.filterable||U.value),Y=$(()=>U.value?A.value:B.value),Ne=$(()=>{var l;return((l=g.value)==null?void 0:l.checkedNodes)||[]}),gl=$(()=>!s.clearable||n.value||M.value||!D.value?!1:!!Ne.value.length),Pe=$(()=>{const{showAllLevels:l,separator:u}=s,r=Ne.value;return r.length?U.value?"":r[0].calcText(l,u):""}),kl=$(()=>(z==null?void 0:z.validateState)||""),Le=$({get(){return ml(s.modelValue)},set(l){const u=l||q.value;o(Se,u),o(Te,u),s.validateEvent&&(z==null||z.validate("change").catch(r=>pa()))}}),bl=$(()=>[p.b(),p.m(P.value),p.is("disabled",n.value),y.class]),Cl=$(()=>[N.e("icon"),"icon-arrow-down",p.is("reverse",C.value)]),Nl=$(()=>p.is("focus",C.value||V.value)),Oe=$(()=>{var l,u;return(u=(l=R.value)==null?void 0:l.popperRef)==null?void 0:u.contentRef}),Z=l=>{var u,r,F;n.value||(l=l??!C.value,l!==C.value&&(C.value=l,(r=(u=x.value)==null?void 0:u.input)==null||r.setAttribute("aria-expanded",`${l}`),l?(me(),ce((F=g.value)==null?void 0:F.scrollToExpandingNode)):s.filterable&&Ue(),o("visibleChange",l)))},me=()=>{ce(()=>{var l;(l=R.value)==null||l.updatePopper()})},De=()=>{M.value=!1},Me=l=>{const{showAllLevels:u,separator:r}=s;return{node:l,key:l.uid,text:l.calcText(u,r),hitState:!1,closable:!n.value&&!l.isDisabled,isCollapseTag:!1}},Ie=l=>{var u;const r=l.node;r.doCheck(!1),(u=g.value)==null||u.calculateCheckedValue(),o("removeTag",r.valueByOption)},El=()=>{if(!U.value)return;const l=Ne.value,u=[],r=[];if(l.forEach(F=>r.push(Me(F))),ue.value=r,l.length){l.slice(0,s.maxCollapseTags).forEach(le=>u.push(Me(le)));const F=l.slice(s.maxCollapseTags),oe=F.length;oe&&(s.collapseTags?u.push({key:-1,text:`+ ${oe}`,closable:!1,isCollapseTag:!0}):F.forEach(le=>u.push(Me(le))))}j.value=u},Re=()=>{var l,u;const{filterMethod:r,showAllLevels:F,separator:oe}=s,le=(u=(l=g.value)==null?void 0:l.getFlattedNodes(!s.props.checkStrictly))==null?void 0:u.filter(se=>se.isDisabled?!1:(se.calcText(F,oe),r(se,Y.value)));U.value&&(j.value.forEach(se=>{se.hitState=!1}),ue.value.forEach(se=>{se.hitState=!1})),M.value=!0,de.value=le,me()},Vl=()=>{var l;let u;M.value&&h.value?u=h.value.$el.querySelector(`.${p.e("suggestion-item")}`):u=(l=g.value)==null?void 0:l.$el.querySelector(`.${p.b("node")}[tabindex="-1"]`),u&&(u.focus(),!M.value&&u.click())},Be=()=>{var l,u;const r=(l=x.value)==null?void 0:l.input,F=O.value,oe=(u=h.value)==null?void 0:u.$el;if(!(!il||!r)){if(oe){const le=oe.querySelector(`.${p.e("suggestion-list")}`);le.style.minWidth=`${r.offsetWidth}px`}if(F){const{offsetHeight:le}=F,se=j.value.length>0?`${Math.max(le+6,v)}px`:`${v}px`;r.style.height=se,me()}}},_l=l=>{var u;return(u=g.value)==null?void 0:u.getCheckedNodes(l)},$l=l=>{me(),o("expandChange",l)},ve=l=>{var u;const r=(u=l.target)==null?void 0:u.value;if(l.type==="compositionend")d.value=!1,ce(()=>ze(r));else{const F=r[r.length-1]||"";d.value=!ma(F)}},wl=l=>{if(!d.value)switch(l.code){case W.enter:Z();break;case W.down:Z(!0),ce(Vl),l.preventDefault();break;case W.esc:C.value===!0&&(l.preventDefault(),l.stopPropagation(),Z(!1));break;case W.tab:Z(!1);break}},Sl=()=>{var l;(l=g.value)==null||l.clearCheckedNodes(),!C.value&&s.filterable&&Ue(),Z(!1)},Ue=()=>{const{value:l}=Pe;B.value=l,A.value=l},Tl=l=>{var u,r;const{checked:F}=l;U.value?(u=g.value)==null||u.handleCheckChange(l,!F,!1):(!F&&((r=g.value)==null||r.handleCheckChange(l,!0,!1)),Z(!1))},Fl=l=>{const u=l.target,{code:r}=l;switch(r){case W.up:case W.down:{const F=r===W.up?-1:1;_e(hl(u,F,`.${p.e("suggestion-item")}[tabindex="-1"]`));break}case W.enter:u.click();break}},Pl=()=>{const l=j.value,u=l[l.length-1];k=A.value?0:k+1,!(!u||!k||s.collapseTags&&l.length>1)&&(u.hitState?Ie(u):u.hitState=!0)},xe=l=>{const u=l.target,r=p.e("search-input");u.className===r&&(V.value=!0),o("focus",l)},Ke=l=>{V.value=!1,o("blur",l)},Ll=oa(()=>{const{value:l}=Y;if(!l)return;const u=s.beforeFilter(l);Kl(u)?u.then(Re).catch(()=>{}):u!==!1?Re():De()},s.debounce),ze=(l,u)=>{!C.value&&Z(!0),!(u!=null&&u.isComposing)&&(l?Ll():De())},We=l=>Number.parseFloat(ka(N.cssVarName("input-height"),l).value)-2;return ee(M,me),ee([Ne,n],El),ee(j,()=>{ce(()=>Be())}),ee(P,async()=>{await ce();const l=x.value.input;v=We(l)||v,Be()}),ee(Pe,Ue,{immediate:!0}),dl(()=>{const l=x.value.input,u=We(l);v=l.offsetHeight||u,ga(l,Be)}),a({getCheckedNodes:_l,cascaderPanelRef:g,togglePopperVisible:Z,contentRef:Oe}),(l,u)=>(c(),_(i(Xe),{ref_key:"tooltipRef",ref:R,visible:C.value,teleported:l.teleported,"popper-class":[i(p).e("dropdown"),l.popperClass],"popper-options":t,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${i(p).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:De},{default:b(()=>[Ee((c(),L("div",{class:H(i(bl)),style:Wl(i(E)),onClick:u[5]||(u[5]=()=>Z(i(ie)?void 0:!0)),onKeydown:wl,onMouseenter:u[6]||(u[6]=r=>D.value=!0),onMouseleave:u[7]||(u[7]=r=>D.value=!1)},[T(i(fl),{ref_key:"input",ref:x,modelValue:B.value,"onUpdate:modelValue":u[1]||(u[1]=r=>B.value=r),placeholder:i(f),readonly:i(ie),disabled:i(n),"validate-event":!1,size:i(P),class:H(i(Nl)),tabindex:i(U)&&l.filterable&&!i(n)?-1:void 0,onCompositionstart:ve,onCompositionupdate:ve,onCompositionend:ve,onFocus:xe,onBlur:Ke,onInput:ze},{suffix:b(()=>[i(gl)?(c(),_(i(be),{key:"clear",class:H([i(N).e("icon"),"icon-circle-close"]),onClick:ge(Sl,["stop"])},{default:b(()=>[T(i(jl))]),_:1},8,["class","onClick"])):(c(),_(i(be),{key:"arrow-down",class:H(i(Cl)),onClick:u[0]||(u[0]=ge(r=>Z(),["stop"]))},{default:b(()=>[T(i(Zl))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),i(U)?(c(),L("div",{key:0,ref_key:"tagWrapper",ref:O,class:H([i(p).e("tags"),i(p).is("validate",!!i(kl))])},[(c(!0),L(K,null,G(j.value,r=>(c(),_(i(Je),{key:r.key,type:l.tagType,size:i(X),hit:r.hitState,closable:r.closable,"disable-transitions":"",onClose:F=>Ie(r)},{default:b(()=>[r.isCollapseTag===!1?(c(),L("span",Ka,ne(r.text),1)):(c(),_(i(Xe),{key:1,disabled:C.value||!l.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:b(()=>[te("span",null,ne(r.text),1)]),content:b(()=>[te("div",{class:H(i(p).e("collapse-tags"))},[(c(!0),L(K,null,G(ue.value.slice(l.maxCollapseTags),(F,oe)=>(c(),L("div",{key:oe,class:H(i(p).e("collapse-tag"))},[(c(),_(i(Je),{key:F.key,class:"in-tooltip",type:l.tagType,size:i(X),hit:F.hitState,closable:F.closable,"disable-transitions":"",onClose:le=>Ie(F)},{default:b(()=>[te("span",null,ne(F.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),l.filterable&&!i(n)?Ee((c(),L("input",{key:0,"onUpdate:modelValue":u[2]||(u[2]=r=>A.value=r),type:"text",class:H(i(p).e("search-input")),placeholder:i(Pe)?"":i(m),onInput:u[3]||(u[3]=r=>ze(A.value,r)),onClick:u[4]||(u[4]=ge(r=>Z(!0),["stop"])),onKeydown:Gl(Pl,["delete"]),onCompositionstart:ve,onCompositionupdate:ve,onCompositionend:ve,onFocus:xe,onBlur:Ke},null,42,Wa)),[[Xl,A.value]]):Q("v-if",!0)],2)):Q("v-if",!0)],38)),[[i(na),()=>Z(!1),i(Oe)]])]),content:b(()=>[Ee(T(i(Oa),{ref_key:"cascaderPanelRef",ref:g,modelValue:i(Le),"onUpdate:modelValue":u[8]||(u[8]=r=>Yl(Le)?Le.value=r:null),options:l.options,props:s.props,border:!1,"render-label":l.$slots.default,onExpandChange:$l,onClose:u[9]||(u[9]=r=>l.$nextTick(()=>Z(!1)))},null,8,["modelValue","options","props","render-label"]),[[Ge,!M.value]]),l.filterable?Ee((c(),_(i(vl),{key:0,ref_key:"suggestionPanel",ref:h,tag:"ul",class:H(i(p).e("suggestion-panel")),"view-class":i(p).e("suggestion-list"),onKeydown:Fl},{default:b(()=>[de.value.length?(c(!0),L(K,{key:0},G(de.value,r=>(c(),L("li",{key:r.uid,class:H([i(p).e("suggestion-item"),i(p).is("checked",r.checked)]),tabindex:-1,onClick:F=>Tl(r)},[te("span",null,ne(r.text),1),r.checked?(c(),_(i(be),{key:0},{default:b(()=>[T(i(nl))]),_:1})):Q("v-if",!0)],10,ja))),128)):Jl(l.$slots,"empty",{key:1},()=>[te("li",{class:H(i(p).e("empty-text"))},ne(i(w)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ge,M.value]]):Q("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var we=Fe(Xa,[["__file","cascader.vue"]]);we.install=e=>{e.component(we.name,we)};const Ya=we,Ja=Ya,Qa={class:"",style:{"margin-bottom":"20px"}},et={style:{width:"500px"}},lt={style:{"margin-top":"20px","text-align":"right"}},at=pe({__name:"CluesAdd",setup(e){const a=Ql(),o=ea();console.log(o);const s=S(null),t=S({companyName:"",contactName:"",contactTel:"",country:"",province:"",city:"",address:"",companyBrand:[""],customField:[]}),y=S([]),v=S([]),k=S([]),p=S(""),N=S(""),w=S(""),I=S([]),z=()=>{s.value.validate(g=>{g&&(o.name==="CluesEdit"?ae.edit({id:o.query.id,...t.value}).then(h=>{h.code===0?(Ve.success("编辑成功"),a.go(-1)):Ve.error(h.msg)}):ae.add(t.value).then(h=>{h.code===0?(Ve.success("保存成功"),a.go(-1)):Ve.error(h.msg)}))})},q=()=>{ae.getCountry().then(g=>{g.code===0&&(y.value=g.data,o.name!=="CluesEdit"&&(p.value="CHN"))})},R=()=>{ae.getProvince({countryCode:p.value}).then(g=>{g.code===0&&(v.value=g.data)})},x=()=>{ae.getCity({provinceCode:N.value}).then(g=>{g.code===0&&(k.value=g.data)})};ee(()=>p.value,g=>{let h=y.value.find(C=>C.code==g);t.value.country=h&&h.name||"",R()}),ee(()=>N.value,g=>{let h=v.value.find(C=>C.code==g);t.value.province=h&&h.name||"",x()}),ee(()=>w.value,g=>{let h=k.value.find(C=>C.code==g);t.value.city=h&&h.name||""});const O=()=>{ae.getCustomField().then(g=>{g.code===0&&(I.value=g.data,g.data.forEach(h=>{t.value.customField.push({[h.key]:Qe[h.type].value})}))})};return q(),O(),o.name==="CluesEdit"&&ae.getData({id:o.query.id}).then(g=>{g.code===0&&(t.value=g.data,ae.getCountry().then(h=>{h.code===0&&(y.value=h.data,p.value=y.value.find(C=>C.name==t.value.country).code,ae.getProvince({countryCode:p.value}).then(C=>{C.code===0&&(v.value=C.data,N.value=v.value.find(D=>D.name==t.value.province).code,ae.getCity({provinceCode:N.value}).then(D=>{D.code===0&&(k.value=D.data,w.value=k.value.find(M=>M.name==t.value.city).code)}))}))}))}),(g,h)=>{const C=fl,D=la,M=ha,V=fa,B=ya,A=pl,j=ua,ue=cl,de=sa,d=Ja,E=aa;return c(),L(K,null,[te("div",Qa,[te("span",null,ne(i(o).name==="CluesEdit"?"编辑":"新建")+"销售线索",1)]),te("div",et,[T(E,{ref_key:"formRef",ref:s,model:t.value,"label-width":"auto"},{default:b(()=>[T(D,{label:"企业名称",prop:"companyName",rules:i(re).required},{default:b(()=>[T(C,{modelValue:t.value.companyName,"onUpdate:modelValue":h[0]||(h[0]=n=>t.value.companyName=n)},null,8,["modelValue"])]),_:1},8,["rules"]),T(D,{label:"联系人",prop:"contactName",rules:i(re).required},{default:b(()=>[T(C,{modelValue:t.value.contactName,"onUpdate:modelValue":h[1]||(h[1]=n=>t.value.contactName=n)},null,8,["modelValue"])]),_:1},8,["rules"]),T(D,{label:"联系电话",prop:"contactTel",rules:i(re).phone},{default:b(()=>[T(C,{modelValue:t.value.contactTel,"onUpdate:modelValue":h[2]||(h[2]=n=>t.value.contactTel=n)},null,8,["modelValue"])]),_:1},8,["rules"]),T(D,{label:"国家",prop:"country",rules:i(re).select},{default:b(()=>[T(V,{modelValue:p.value,"onUpdate:modelValue":h[3]||(h[3]=n=>p.value=n)},{default:b(()=>[(c(!0),L(K,null,G(y.value,n=>(c(),_(M,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),T(D,{label:"省份",prop:"province",rules:i(re).select},{default:b(()=>[T(V,{modelValue:N.value,"onUpdate:modelValue":h[4]||(h[4]=n=>N.value=n)},{default:b(()=>[(c(!0),L(K,null,G(v.value,n=>(c(),_(M,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),T(D,{label:"城市",prop:"city",rules:i(re).select},{default:b(()=>[T(V,{modelValue:w.value,"onUpdate:modelValue":h[5]||(h[5]=n=>w.value=n)},{default:b(()=>[(c(!0),L(K,null,G(k.value,n=>(c(),_(M,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),T(D,{label:"详细地址",prop:"address",rules:i(re).required},{default:b(()=>[T(C,{type:"textarea",modelValue:t.value.address,"onUpdate:modelValue":h[6]||(h[6]=n=>t.value.address=n)},null,8,["modelValue"])]),_:1},8,["rules"]),(c(!0),L(K,null,G(t.value.companyBrand,(n,m)=>(c(),_(D,{key:m,label:m===0?"品牌":" ",prop:`companyBrand[${m}]`,rules:i(re).required},{default:b(()=>[T(C,{modelValue:t.value.companyBrand[m],"onUpdate:modelValue":f=>t.value.companyBrand[m]=f},{append:b(()=>[m===0?(c(),_(B,{key:0,onClick:h[7]||(h[7]=f=>t.value.companyBrand.push("")),icon:"Plus"})):(c(),_(B,{key:1,onClick:f=>t.value.companyBrand.splice(m,1),icon:"Minus"},null,8,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"]))),128)),(c(!0),L(K,null,G(I.value,(n,m)=>(c(),_(D,{key:n.key,label:n.name,prop:`customField[${m}][${n.key}]`,rules:n.isRequired?i(Qe)[n.type].rules:[]},{default:b(()=>[n.type===1?(c(),_(C,{key:0,modelValue:t.value.customField[m][n.key],"onUpdate:modelValue":f=>t.value.customField[m][n.key]=f,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])):n.type===2?(c(),_(C,{key:1,modelValue:t.value.customField[m][n.key],"onUpdate:modelValue":f=>t.value.customField[m][n.key]=f,modelModifiers:{trim:!0},type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):n.type===3?(c(),_(V,{key:2,modelValue:t.value.customField[m][n.key],"onUpdate:modelValue":f=>t.value.customField[m][n.key]=f},{default:b(()=>[(c(!0),L(K,null,G(n.data||[],f=>(c(),_(M,{key:f.id,label:f.name,value:f.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):n.type===4?(c(),_(j,{key:3,modelValue:t.value.customField[m][n.key],"onUpdate:modelValue":f=>t.value.customField[m][n.key]=f},{default:b(()=>[(c(!0),L(K,null,G(n.data||[],f=>(c(),_(A,{key:f.id,value:f.id},{default:b(()=>[ye(ne(f.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):n.type===5?(c(),_(de,{key:4,modelValue:t.value.customField[m][n.key],"onUpdate:modelValue":f=>t.value.customField[m][n.key]=f},{default:b(()=>[(c(!0),L(K,null,G(n.data||[],f=>(c(),_(ue,{key:f.id,value:f.id,name:"type"},{default:b(()=>[ye(ne(f.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):n.type===6?(c(),_(d,{key:5,clearable:"",style:{width:"100%"},modelValue:t.value.customField[m][n.key],"onUpdate:modelValue":f=>t.value.customField[m][n.key]=f,options:n.data,props:{value:"id",label:"name",children:"child",checkStrictly:!0}},null,8,["modelValue","onUpdate:modelValue","options"])):n.type===7?(c(),_(d,{key:6,clearable:"",style:{width:"100%"},modelValue:t.value.customField[m][n.key],"onUpdate:modelValue":f=>t.value.customField[m][n.key]=f,options:n.data,props:{value:"id",label:"name",children:"child",checkStrictly:!0,multiple:!0}},null,8,["modelValue","onUpdate:modelValue","options"])):Q("",!0)]),_:2},1032,["label","prop","rules"]))),128)),te("div",lt,[T(B,{type:"primary",onClick:z,size:"small"},{default:b(()=>[ye("保存")]),_:1}),T(B,{type:"default",onClick:h[8]||(h[8]=n=>g.$router.go(-1)),size:"small"},{default:b(()=>[ye("取消")]),_:1})])]),_:1},8,["model"])])],64)}}}),Lt=Na(at,[["__scopeId","data-v-40a61ba7"]]);export{Lt as default};
