import{p as j,ap as H,d as B,a as L,z as A,A as Q,o as f,b as k,r as P,n as u,e,_ as O,K as Y,q as ee,t as b,s as te,B as se,C as ae,c as y,y as le,aj as V,X as a,f as X,h as F,i as n,aq as oe,G as R,$ as o,az as ne,ak as re,Z as G,Y as E,w as ie,g as ue,a5 as ce,W as pe,a2 as de,a3 as me,a7 as z}from"./index-Burj71Mz.js";import{E as ve}from"./row-D5DOP6Dc.js";import{g as _e,E as fe}from"./progress-9maJgk35.js";/* empty css                    */import{E as he,a as ye}from"./radio-CepCdyd7.js";import{E as Se}from"./button-Bh1aP2J2.js";import{E as ge}from"./col-DNRh0W3C.js";import{c as Ee,g as we}from"./index-D6cOPOhz.js";import{d as Ce}from"./fileZip-B0DVYBQ_.js";/* empty css                */import{C as Z}from"./event-BB_Ol6Sd.js";import{u as be}from"./index-BRW4hph6.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-tjLgBssR.js";import"./cloneDeep-DY_oMc42.js";import"./_baseClone-ag1-RHwQ.js";import"./_initCloneObject-DkUEurvZ.js";import"./isEqual-BP9o_BCC.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./vnode-B8ooRqKJ.js";const ke=j({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),$e={[Z]:(h,I)=>[h,I].every(H)},xe=B({name:"ElSteps"}),Be=B({...xe,props:ke,emits:$e,setup(h,{emit:I}){const s=h,r=L("steps"),{children:c,addChild:S,removeChild:l}=be(Y(),"ElStep");return A(c,()=>{c.value.forEach((p,d)=>{p.setIndex(d)})}),Q("ElSteps",{props:s,steps:c,addStep:S,removeStep:l}),A(()=>s.active,(p,d)=>{I(Z,p,d)}),(p,d)=>(f(),k("div",{class:u([e(r).b(),e(r).m(p.simple?"simple":p.direction)])},[P(p.$slots,"default")],2))}});var Ne=O(Be,[["__file","steps.vue"]]);const Ve=j({title:{type:String,default:""},icon:{type:ee},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Fe=B({name:"ElStep"}),ze=B({...Fe,props:Ve,setup(h){const I=h,s=L("step"),r=b(-1),c=b({}),S=b(""),l=te("ElSteps"),p=Y();se(()=>{A([()=>l.props.active,()=>l.props.processStatus,()=>l.props.finishStatus],([t])=>{M(t)},{immediate:!0})}),ae(()=>{l.removeStep(N.uid)});const d=y(()=>I.status||S.value),W=y(()=>{const t=l.steps.value[r.value-1];return t?t.currentStatus:"wait"}),i=y(()=>l.props.alignCenter),_=y(()=>l.props.direction==="vertical"),m=y(()=>l.props.simple),C=y(()=>l.steps.value.length),v=y(()=>{var t;return((t=l.steps.value[C.value-1])==null?void 0:t.uid)===(p==null?void 0:p.uid)}),g=y(()=>m.value?"":l.props.space),x=y(()=>[s.b(),s.is(m.value?"simple":l.props.direction),s.is("flex",v.value&&!g.value&&!i.value),s.is("center",i.value&&!_.value&&!m.value)]),D=y(()=>{const t={flexBasis:H(g.value)?`${g.value}px`:g.value?g.value:`${100/(C.value-(i.value?0:1))}%`};return _.value||v.value&&(t.maxWidth=`${100/C.value}%`),t}),T=t=>{r.value=t},U=t=>{const $=t==="wait",q={transitionDelay:`${$?"-":""}${150*r.value}ms`},K=t===l.props.processStatus||$?0:100;q.borderWidth=K&&!m.value?"1px":0,q[l.props.direction==="vertical"?"height":"width"]=`${K}%`,c.value=q},M=t=>{t>r.value?S.value=l.props.finishStatus:t===r.value&&W.value!=="error"?S.value=l.props.processStatus:S.value="wait";const $=l.steps.value[r.value-1];$&&$.calcProgress(S.value)},N=le({uid:p.uid,currentStatus:d,setIndex:T,calcProgress:U});return l.addStep(N),(t,$)=>(f(),k("div",{style:X(e(D)),class:u(e(x))},[V(" icon & line "),a("div",{class:u([e(s).e("head"),e(s).is(e(d))])},[e(m)?V("v-if",!0):(f(),k("div",{key:0,class:u(e(s).e("line"))},[a("i",{class:u(e(s).e("line-inner")),style:X(c.value)},null,6)],2)),a("div",{class:u([e(s).e("icon"),e(s).is(t.icon||t.$slots.icon?"icon":"text")])},[P(t.$slots,"icon",{},()=>[t.icon?(f(),F(e(R),{key:0,class:u(e(s).e("icon-inner"))},{default:n(()=>[(f(),F(oe(t.icon)))]),_:1},8,["class"])):e(d)==="success"?(f(),F(e(R),{key:1,class:u([e(s).e("icon-inner"),e(s).is("status")])},{default:n(()=>[o(e(ne))]),_:1},8,["class"])):e(d)==="error"?(f(),F(e(R),{key:2,class:u([e(s).e("icon-inner"),e(s).is("status")])},{default:n(()=>[o(e(re))]),_:1},8,["class"])):e(m)?V("v-if",!0):(f(),k("div",{key:3,class:u(e(s).e("icon-inner"))},G(r.value+1),3))])],2)],2),V(" title & description "),a("div",{class:u(e(s).e("main"))},[a("div",{class:u([e(s).e("title"),e(s).is(e(d))])},[P(t.$slots,"title",{},()=>[E(G(t.title),1)])],2),e(m)?(f(),k("div",{key:0,class:u(e(s).e("arrow"))},null,2)):(f(),k("div",{key:1,class:u([e(s).e("description"),e(s).is(e(d))])},[P(t.$slots,"description",{},()=>[E(G(t.description),1)])],2))],2)],6))}});var J=O(ze,[["__file","item.vue"]]);const Pe=ie(Ne,{Step:J}),Re=ue(J),w=h=>(de("data-v-f3979533"),h=h(),me(),h),We=w(()=>a("div",null,null,-1)),De=w(()=>a("dt",null,"一、请按最新的数据模版格式导入最新的数据",-1)),Te=w(()=>a("dt",null,"二、请选择数据重复时的处理方式",-1)),Ue=w(()=>a("dt",null,"三、上传需要导入的Xls 文件",-1)),Me=w(()=>a("p",null,"1.模板中的表头名称不可更改，表头不能删除。",-1)),qe=w(()=>a("p",null,"2.数据必填字段必须录入",-1)),Ge=w(()=>a("p",null,"3.相应数据必须填写所有人",-1)),Ae=w(()=>a("p",null,"4.每次导入最大条数100000，导入文件大小最大20Mb",-1)),Ke=w(()=>a("p",null,"5.客户查重规则：【客户姓名】重复 客户：客户名称 or 客户：邮箱 or 客户：手 机",-1)),Xe={style:{"text-align":"center"}},je=B({__name:"CluesImport",setup(h){const I=ce();b(0),b([]);const s=b(1),r=b(!1),c=b(),S=i=>i.size/1024/1024>20?(z.error("文件大小不能超过 20MB!"),!1):!0,l=i=>{r.value=!0;let _=new FormData;return _.append("file",i.file),_.append("type",s.value),new Promise((m,C)=>{Ee(_).then(v=>{v.code===0?(z.success("上传成功"),m(v.data),I.back()):(C(v),z.error(v.msg),c.value.clearFiles()),r.value=!1}).catch(v=>{C(v),z.error("上传失败"),c.value.clearFiles(),r.value=!1})})},p=i=>{c.value.clearFiles();const _=i[0];_.uid=_e(),c.value.handleStart(_)},d=()=>{we().then(i=>{i.code===0&&Ce(i.data.url,i.data.name)})},W=()=>{c.value.submit()};return(i,_)=>{const m=Re,C=Pe,v=ge,g=Se,x=he,D=ye,T=fe,U=pe("WarningFilled"),M=R,N=ve;return f(),k("div",null,[We,a("div",null,[o(v,{md:{span:12,offset:6},style:{"margin-bottom":"20px"}},{default:n(()=>[o(C,{style:{width:"100%"},active:2,"align-center":""},{default:n(()=>[o(m,{title:"上传文件"}),o(m,{title:"导入数据"}),o(m,{title:"导入结果"})]),_:1})]),_:1}),o(N,null,{default:n(()=>[o(v,{span:12,class:"l"},{default:n(()=>[a("dl",null,[De,a("dd",null,[o(g,{type:"primary",onClick:d},{default:n(()=>[E("下载数据模板")]),_:1})])]),a("dl",null,[Te,a("dd",null,[o(D,{modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=t=>s.value=t)},{default:n(()=>[o(x,{label:"忽略",value:1,style:{width:"100%"}},{default:n(()=>[E("导入新数据，跳过重复数据")]),_:1}),o(x,{label:"覆盖",value:2,style:{width:"100%"}},{default:n(()=>[E("去重")]),_:1}),o(x,{label:"新增",value:3,style:{width:"100%"}},{default:n(()=>[E("覆盖数据库已存在的数据")]),_:1})]),_:1},8,["modelValue"])])]),a("dl",null,[Ue,a("dd",null,[o(T,{ref_key:"uploadRef",ref:c,"before-upload":S,"http-request":l,limit:1,"on-exceed":p,type:"drag",accept:".xls,.xlsx","auto-upload":!1},{default:n(()=>[o(g,{type:"primary"},{default:n(()=>[E("选择文件")]),_:1})]),_:1},512)])])]),_:1}),o(v,{span:12,class:"r"},{default:n(()=>[a("p",null,[o(M,null,{default:n(()=>[o(U)]),_:1}),E("注意事项")]),Me,qe,Ge,Ae,Ke]),_:1})]),_:1}),a("div",Xe,[o(g,{type:"primary",onClick:W},{default:n(()=>[E("导入")]),_:1})])])])}}}),mt=Ie(je,[["__scopeId","data-v-f3979533"]]);export{mt as default};
