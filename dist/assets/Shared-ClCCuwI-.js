import{d as S,s as T,l as p,o as z,f as B,S as e,P as h,w as r,Q as m,R as P}from"./index-BnnnK_YI.js";import{E as N}from"./el-pagination-Cj9T_khR.js";/* empty css                 */import"./el-tag-DksfI-x9.js";/* empty css                  */import"./el-scrollbar-D3VZCHtT.js";import{E as R,a as U}from"./el-table-column-BWSclO2l.js";import"./el-checkbox-9FcrlSCf.js";import"./el-tooltip-l0sNRNKZ.js";import{E as D}from"./el-link-DL3ZTdMf.js";import"./el-button-D6xHPO3A.js";import{T as L}from"./index-CCV_fsNh.js";import{a as c}from"./index-Ce9ZylsI.js";/* empty css                   *//* empty css                       *//* empty css                   */import{a as s}from"./request-DhRpxnTY.js";import{E as V}from"./index-7hJybXhx.js";import{E as F}from"./index-DucyUmQv.js";import"./index-C0TB7Dbb.js";import"./index-ClxgrGYT.js";import"./index-nQ1hFZTo.js";import"./typescript-CS6VS-lD.js";import"./event-BB_Ol6Sd.js";import"./isEqual-DQirXHc5.js";import"./_initCloneObject-DNKOYgS9.js";import"./scroll-CjGXt2xZ.js";import"./castArray-DfA7nsC2.js";import"./isArrayLikeObject-BfGwdoSH.js";/* empty css                     *//* empty css                                                              *//* empty css                       *//* empty css                 *//* empty css                          */import"./index-CXMUnDXQ.js";import"./_baseClone-DJAZlgpx.js";import"./index-mQz5lFU6.js";import"./index--nQxpy5t.js";import"./arrays-6TrVLtTe.js";import"./index-B4rGlqPP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BRZqMuae.js";import"./vnode-Dm6k9IV6.js";import"./aria-KgdLjl5h.js";import"./validator-BZ2loiMZ.js";const G={class:"s-flex-col",style:{height:"100%"}},I={class:"s-table-operations"},M={class:"s-flex-auto",style:{"min-height":"0"}},Q={class:"s-table-pagination"},Lt=S({__name:"Shared",setup($){const l=T({page:1,perPage:10}),f=p(0),g=p({}),_=p([]),d=p(null),b=p([]),v=t=>{g.value=t,l.page=1,n()},n=async()=>{c.getList({status:3,...l,...g.value}).then(t=>{t.code===0&&(_.value=t.data.data,f.value=t.data.total)})},w=t=>{c.getClues({id:t}).then(o=>{o.code===0?(s.success("领取成功"),n()):s.error(o.msg)})},x=()=>{let t=d.value.getSelectionRows().map(o=>o.id);if(t.length===0){s.warning("请选择需要领取的线索");return}w(t)},y=()=>{let t=d.value.getSelectionRows().map(o=>o.id);if(t.length===0){s.warning("请选择需要删除的线索");return}V.confirm("确定删除所选线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{c.del({id:t}).then(o=>{o.code===0?(s.success("删除成功"),n()):s.error(o.msg)})}).catch(()=>{})};return c.getSearchField().then(t=>{t.code===0&&(b.value=t.data)}),n(),(t,o)=>{const u=F,i=R,E=D,C=U,k=N;return z(),B("div",G,[e(L,{data:b.value,onSearch:v},null,8,["data"]),h("div",I,[e(u,{size:"small",onClick:x},{default:r(()=>[m("领取")]),_:1}),e(u,{size:"small",onClick:y},{default:r(()=>[m("删除")]),_:1})]),h("div",M,[e(C,{ref_key:"tableRef",ref:d,data:_.value,border:"","table-layout":"fixed",height:"100%","show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:r(()=>[e(i,{type:"selection",width:"42"}),e(i,{prop:"companyName",label:"公司名称",width:"180"},{default:r(a=>[e(E,{href:"/market/clues/info?type=1&id="+a.row.id+"&exhibitionId="+a.row.exhibitionId+"&authUser="+a.row.authUser,type:"primary"},{default:r(()=>[m(P(a.row.companyName),1)]),_:2},1032,["href"])]),_:1}),e(i,{prop:"exhibitionContact",label:"联系方式",width:"180"}),e(i,{prop:"duties",label:"职务"}),e(i,{prop:"phone",label:"电话"}),e(i,{prop:"recordTime",label:"记录时间",width:"180"}),e(i,{prop:"recordText",label:"记录内容"}),e(i,{prop:"authUser",label:"授权人"}),e(i,{fixed:"right",label:"操作",width:"120"},{default:r(a=>[e(u,{link:"",type:"primary",size:"small",onClick:j=>w([a.row.id])},{default:r(()=>[m(" 领取 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),h("div",Q,[e(k,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:f.value,"current-page":l.page,"onUpdate:currentPage":o[0]||(o[0]=a=>l.page=a),"page-size":l.perPage,"onUpdate:pageSize":o[1]||(o[1]=a=>l.perPage=a),onChange:n},null,8,["total","current-page","page-size"])])])}}});export{Lt as default};
