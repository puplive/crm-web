import{d as q,l as w,o as b,f as E,P as t,S as e,w as l,F as U,W as D,Q as m,c as j,R as p,_ as P,$ as M,e as K,s as X,a as B,Z as Y,a7 as ee}from"./index-F9QIZpl4.js";import{E as le}from"./el-dialog-CsoKM1SO.js";/* empty css                   */import{E as te,a as oe}from"./el-tab-pane-BexzNSqx.js";/* empty css                     */import{E as ae,a as se}from"./el-table-column-DspaQhOS.js";import"./el-checkbox-BPc_gAFH.js";import"./el-tooltip-l0sNRNKZ.js";import{a as de}from"./el-scrollbar-pbkOUS7j.js";import"./el-tag-BfL1dDGg.js";import"./el-button-TEngkHeb.js";/* empty css                 *//* empty css                 *//* empty css                  */import{c as T,b as G,g as ne,d as ie,e as re}from"./index-BK6lXFk_.js";/* empty css                   */import{a as g}from"./request-BYi_Abda.js";import{E as ue}from"./index-DtRfdYvD.js";import{a as pe,E as ce}from"./index--0-wC6Rl.js";import{E as O}from"./index-C6QA_pUU.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as me}from"./index-BtrRJ4H7.js";import{E as _e,a as fe}from"./index-C169urea.js";import{E as ve,a as be}from"./index-DG_sdTtQ.js";import"./index-FoDl7pCX.js";import"./index-C5z8j5H4.js";import"./scroll-B0Hfy5Ls.js";import"./vnode-DIE62JHo.js";import"./refs-CRC1M4ll.js";import"./event-BB_Ol6Sd.js";import"./typescript-dhNqpO9x.js";import"./index-DIR09DJR.js";import"./_initCloneObject-Dw-py65Z.js";import"./isArrayLikeObject-CCZg05jR.js";import"./isEqual-COh6LovZ.js";import"./castArray-DpqosLXt.js";import"./_baseClone-nR8gpNM8.js";const W=h=>(P("data-v-8ad272b4"),h=h(),M(),h),he={class:"follow-up"},ye=W(()=>t("div",{class:"title"},"跟进记录",-1)),ge={class:"form"},we={class:"item"},Ie=W(()=>t("label",null,"跟进状态",-1)),Ee={class:"record"},xe={class:"list"},ke=q({__name:"FollowUp",props:["clueId"],setup(h){const k=h,x=w(""),_=w(0),V=w(0),C=w(""),F=()=>{G.add({clueId:k.clueId,text:x.value,status:_.value,contactId:V.value,contactName:C.value}).then(u=>{console.log(u),u.code===0?(g.success("跟进记录添加成功"),N()):g.error(u.msg)})},n=w([]),N=()=>{G.getList({clueId:k.clueId}).then(u=>{u.code===0&&(n.vue=u.data)})};N();const $=w([]);return T.getList({clueId:k.clueId}).then(u=>{u.code===0&&($.value=u.data)}),(u,y)=>{const S=ue,f=pe,r=ce,o=O,a=de;return b(),E("div",he,[ye,t("div",ge,[e(S,{type:"textarea",placeholder:"请输入跟进内容",modelValue:x.value,"onUpdate:modelValue":y[0]||(y[0]=s=>x.value=s)},null,8,["modelValue"]),t("div",we,[Ie,e(r,{modelValue:_.value,"onUpdate:modelValue":y[1]||(y[1]=s=>_.value=s),placeholder:"跟进状态"},{default:l(()=>[e(f,{label:"未跟进",value:0}),e(f,{label:"电话邀约",value:1}),e(f,{label:"客户拜访",value:2}),e(f,{label:"初步方案",value:3}),e(f,{label:"停滞",value:4})]),_:1},8,["modelValue"]),e(r,{modelValue:V.value,"onUpdate:modelValue":y[2]||(y[2]=s=>V.value=s),placeholder:"联系人",onChange:y[3]||(y[3]=s=>{if(s===0)C.value.value="";else{let v=$.value.find(c=>c.id===s);C.value.value=v?v.name:""}})},{default:l(()=>[e(f,{label:"请选择",value:0}),(b(!0),E(U,null,D($.value,s=>(b(),j(f,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(o,{type:"primary",onClick:F},{default:l(()=>[m("提交")]),_:1})])]),t("div",Ee,[e(a,null,{default:l(()=>[t("ul",xe,[(b(!0),E(U,null,D(n.value,(s,v)=>(b(),E("li",{key:v},p(s.text),1))),128))])]),_:1})])])}}}),Ve=Q(ke,[["__scopeId","data-v-8ad272b4"]]),R=h=>(P("data-v-ce53c0ff"),h=h(),M(),h),Ce={class:"clues-info"},Ne={class:"clues-info-header"},$e={class:"clues-info-header-left"},Se={class:"p1"},Te={class:"p2"},Fe={class:"clues-info-header-right"},Le={class:"clues-info-content"},Ue={class:"clues-info-left"},Ae={style:{}},Be={class:"title-bar"},De=R(()=>t("label",{for:""},"公司信息",-1)),Re={key:0},ze={key:1},Ge={key:2},qe=R(()=>t("p",{style:{padding:"10px 0"}},"展位订单",-1)),je=R(()=>t("p",{style:{padding:"10px 0","margin-top":"10px"}},"物料订单",-1)),Pe={class:"clues-info-right"},Me=q({__name:"CluesInfo",setup(h){const k=Y(),x=ee(),_=x.query.id,V=x.query.exhibitionId,C=x.query.authUser,F=w(1),n=w({customField:[]}),N=w([]);ne().then(o=>{o.code===0&&(N.value=o.data)});const $=K(()=>{let o=[];for(let a in n.value.customFieldTrans){let s=n.value.customFieldTrans[a],v=N.value.find(c=>c.key===a);o.push({key:a,value:s,type:v?v.type:1,name:v?v.name:""})}return o}),u=[{date:"2016-05-03",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-02",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-04",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-01",name:"Tom",address:"No. 189, Grove St, Los Angeles"}];ie({id:_}).then(o=>{o.code===0&&(n.value=o.data)});const y=()=>{re({id:[_]}).then(o=>{o.code===0?(g.success("删除成功"),setTimeout(()=>{k.go(-1)},1e3)):g.error(o.msg)})},S=w({});me({clueId:_,exhibitionId:V}).then(o=>{o.code===0&&(S.value=o.data)});const f=()=>{T.getList({clueId:_}).then(o=>{o.code===0&&(r.list=o.data)})};f();const r=X({show:!1,list:[],form:{clueId:_,name:"",duties:"",type:0,mobile:"",tel:"",email:"",wechat:"",status:1},setAdd:()=>{r.show=!0,r.form={clueId:_,name:"",duties:"",type:0,mobile:"",tel:"",email:"",wechat:"",status:1}},add:()=>{T.add(r.form).then(o=>{o.code===0?(g.success("添加成功"),r.show=!1,f()):g.error(o.msg)})},edit:o=>{T.edit(o).then(a=>{a.code===0?g.success("修改成功"):(g.error(a.msg),f())})},del:o=>{T.del({id:o}).then(a=>{a.code===0?(g.success("删除成功"),f()):g.error(a.msg)})}});return(o,a)=>{const s=_e,v=fe,c=O,I=ve,d=ae,L=se,z=be,A=te,Z=oe,H=le;return b(),E(U,null,[t("div",Ce,[t("div",Ne,[t("div",$e,[t("div",Se,p(n.value.companyName),1),t("div",Te,[t("span",null,"所属展商："+p(n.value.companyName),1),t("span",null,[m("新展商： "),e(v,{modelValue:S.value.isNew,"onUpdate:modelValue":a[0]||(a[0]=i=>S.value.isNew=i)},{default:l(()=>[e(s,{value:!0,style:{"margin-right":"10px"}},{default:l(()=>[m("是")]),_:1}),e(s,{value:!1},{default:l(()=>[m("否")]),_:1})]),_:1},8,["modelValue"])]),t("span",null,"客户经理："+p(B(C)),1)])]),t("div",Fe,[e(c,{type:"primary",size:"small"},{default:l(()=>[m("退展")]),_:1}),e(c,{type:"primary",size:"small"},{default:l(()=>[m("转他人")]),_:1})])]),t("div",Le,[t("div",Ue,[e(Z,{modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=i=>F.value=i),type:"border-card",class:"demo-tabs",style:{height:"100%"}},{default:l(()=>[e(A,{label:"资料",name:1},{default:l(()=>[t("div",Ae,[e(z,{ref_key:"form",ref:n,"label-width":"auto"},{default:l(()=>[t("div",Be,[De,e(c,{type:"default",onClick:a[1]||(a[1]=i=>o.$router.push({name:"CluesEdit",query:{id:B(_)}})),size:"small"},{default:l(()=>[m("编辑")]),_:1}),e(c,{type:"default",onClick:y,size:"small"},{default:l(()=>[m("删除")]),_:1})]),e(I,{label:"企业名称"},{default:l(()=>[t("span",null,p(n.value.companyName),1)]),_:1}),e(I,{label:"联系人"},{default:l(()=>[t("span",null,p(n.value.contactName),1)]),_:1}),e(I,{label:"国家"},{default:l(()=>[t("span",null,p(n.value.country),1)]),_:1}),e(I,{label:"省份"},{default:l(()=>[t("span",null,p(n.value.province),1)]),_:1}),e(I,{label:"城市"},{default:l(()=>[t("span",null,p(n.value.city),1)]),_:1}),e(I,{label:"详细地址",prop:"address"},{default:l(()=>[t("span",null,p(n.value.address),1)]),_:1}),e(I,{label:"企业品牌",prop:""},{default:l(()=>[t("span",null,p(n.value.companyBrand&&n.value.companyBrand.length>0?n.value.companyBrand.join(","):""),1)]),_:1}),(b(!0),E(U,null,D($.value,(i,J)=>(b(),j(I,{key:i.key,label:i.name},{default:l(()=>[i.type===5?(b(),E("span",Re,p(i.value.join("，")),1)):i.type===7?(b(),E("span",ze,p(i.value.join("，")),1)):(b(),E("span",Ge,p(i.value),1))]),_:2},1032,["label"]))),128)),e(I,{label:"参展联系人",prop:""},{default:l(()=>[e(c,{size:"small",onClick:r.setAdd},{default:l(()=>[m("添加")]),_:1},8,["onClick"])]),_:1}),e(L,{border:"",data:r.list,"show-overflow-tooltip":"","header-row-class-name":"s-table-header"},{default:l(()=>[e(d,{prop:"name",label:"姓名"}),e(d,{prop:"duties",label:"职务"}),e(d,{prop:"type",label:"类别"}),e(d,{prop:"mobile",label:"手机号"}),e(d,{prop:"tel",label:"电话"}),e(d,{prop:"email",label:"邮箱"}),e(d,{prop:"wechat",label:"微信"}),e(d,{prop:"status",label:"在职状态"}),e(d,{prop:"isExhibitionContact",label:"展会联系人"}),e(d,{label:"操作",fixed:"right"},{default:l(i=>[e(c,{type:"text",size:"small",onClick:J=>r.del(i.row.id)},{default:l(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},512)])]),_:1}),e(A,{label:"订单",name:2},{default:l(()=>[t("div",null,[e(c,{type:"primary"},{default:l(()=>[m("签订合同")]),_:1})]),qe,e(L,{data:u,border:"","show-overflow-tooltip":""},{default:l(()=>[e(d,{prop:"date",label:"Date",width:"180"}),e(d,{prop:"name",label:"Name",width:"180"}),e(d,{prop:"address",label:"Address"})]),_:1}),je,e(L,{data:u,border:"","show-overflow-tooltip":""},{default:l(()=>[e(d,{prop:"date",label:"Date",width:"180"}),e(d,{prop:"name",label:"Name",width:"180"}),e(d,{prop:"address",label:"Address"})]),_:1})]),_:1}),e(A,{label:"合同",name:3},{default:l(()=>[e(L,{data:u,border:"","show-overflow-tooltip":""},{default:l(()=>[e(d,{prop:"date",label:"Date",width:"180"}),e(d,{prop:"name",label:"Name",width:"180"}),e(d,{prop:"address",label:"Address"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",Pe,[e(Ve,{clueId:B(_)},null,8,["clueId"])])])]),e(H,{title:"添加联系人",modelValue:r.show,"onUpdate:modelValue":a[4]||(a[4]=i=>r.show=i),width:"500px"},{footer:l(()=>[e(c,{type:"default",onClick:a[3]||(a[3]=i=>r.show=!1)},{default:l(()=>[m("取消")]),_:1}),e(c,{type:"primary",onClick:r.add},{default:l(()=>[m("添加")]),_:1},8,["onClick"])]),default:l(()=>[e(z,{model:r.form,"label-width":"80px"},null,8,["model"])]),_:1},8,["modelValue"])],64)}}}),Nl=Q(Me,[["__scopeId","data-v-ce53c0ff"]]);export{Nl as default};
