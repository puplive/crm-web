import{d as ce,u as ve,A as Dl,au as nl,ac as ol,q as Il,k as sl,e as E,O as J,o as c,f as L,W as Q,c as V,a9 as ge,w as k,S as w,n as z,F as K,P as ae,a5 as ul,l as _,V as G,Q as ye,R as oe,E as Ml,av as ze,aw as We,ax as Bl,j as rl,I as ke,ay as Ul,x as zl,s as Ze,v as ee,az as Al,y as dl,M as ie,a1 as il,a3 as Hl,aA as Ol,ab as ql,ar as xl,aB as Rl,ad as Kl,C as Ve,a as p,g as Wl,aC as Zl,p as jl,a6 as Gl,aD as Xl,aE as Yl,D as je,r as Jl,Z as Ql,a8 as ea,_ as la,$ as aa}from"./index-DGy8YaiM.js";import{E as cl,i as ta,a as na,b as oa}from"./el-input-BrZoxqCi.js";import{a as pl,u as sa,E as Ge,C as ua}from"./el-scrollbar-Dv4Quh1c.js";import{d as ra}from"./el-tag-BH7nPyvM.js";import{E as vl,a as da}from"./el-checkbox-3VMAPkI5.js";import{E as fl,a as ia}from"./el-radio-BXvHkyqA.js";/* empty css                          */import{U as we,C as Se,u as ca,b as pa,E as va}from"./el-button-Bovxw4wD.js";import{c as Xe,t as fa,b as Ye,E as ha,a as ma}from"./el-select-D6u5iXFb.js";import{a as me}from"./index-xHqj9K7m.js";import{c as Je}from"./index-BgQhrpTv.js";import{_ as re}from"./rules-BWEfMqzk.js";/* empty css                   */import{E as Qe}from"./request-BAaZbgW9.js";import{E as W,u as ya,b as ga}from"./typescript-CKMpzsq3.js";import{e as ka,_ as Te,E as be,f as ba,d as Ca}from"./index-BqYhbl5u.js";import{i as Ce}from"./isEqual-C3CT6KsK.js";import{i as Na,f as Ee,g as hl}from"./aria-KgdLjl5h.js";import{u as el,c as ll}from"./arrays-6TrVLtTe.js";import{s as Va}from"./scroll-cHXkFjnP.js";import{c as ml}from"./cloneDeep-BFRveJc9.js";import{_ as Ea}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_initCloneObject-kgg4kgWv.js";var _a=1/0;function $a(e){var t=e==null?0:e.length;return t?ka(e,_a):[]}var wa=ce({name:"NodeContent",setup(){return{ns:ve("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:o}=this.$parent,{data:l,label:u}=t,{renderLabelFn:y}=o;return Dl("span",{class:e.e("label")},y?y({node:t,data:l}):u)}});const He=Symbol(),Sa=ce({name:"ElCascaderNode",components:{ElCheckbox:vl,ElRadio:fl,NodeContent:wa,ElIcon:be,Check:nl,Loading:ol,ArrowRight:Il},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const o=sl(He),l=ve("cascader-node"),u=E(()=>o.isHoverMenu),y=E(()=>o.config.multiple),f=E(()=>o.config.checkStrictly),g=E(()=>{var N;return(N=o.checkedNodes[0])==null?void 0:N.uid}),h=E(()=>e.node.isDisabled),C=E(()=>e.node.isLeaf),$=E(()=>f.value&&!C.value||!h.value),B=E(()=>O(o.expandingNode)),U=E(()=>f.value&&o.checkedNodes.some(O)),O=N=>{var A;const{level:H,uid:Z}=e.node;return((A=N==null?void 0:N.pathNodes[H-1])==null?void 0:A.uid)===Z},q=()=>{B.value||o.expandNode(e.node)},x=N=>{const{node:A}=e;N!==A.checked&&o.handleCheckChange(A,N)},b=()=>{o.lazyLoad(e.node,()=>{C.value||q()})},m=N=>{u.value&&(T(),!C.value&&t("expand",N))},T=()=>{const{node:N}=e;!$.value||N.loading||(N.loaded?q():b())},S=()=>{u.value&&!C.value||(C.value&&!h.value&&!f.value&&!y.value?I(!0):T())},R=N=>{f.value?(x(N),e.node.loaded&&q()):I(N)},I=N=>{e.node.loaded?(x(N),!f.value&&q()):b()};return{panel:o,isHoverMenu:u,multiple:y,checkStrictly:f,checkedNodeId:g,isDisabled:h,isLeaf:C,expandable:$,inExpandingPath:B,inCheckedPath:U,ns:l,handleHoverExpand:m,handleExpand:T,handleClick:S,handleCheck:I,handleSelectCheck:R}}}),Ta=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Fa=ae("span",null,null,-1);function Pa(e,t,o,l,u,y){const f=J("el-checkbox"),g=J("el-radio"),h=J("check"),C=J("el-icon"),$=J("node-content"),B=J("loading"),U=J("arrow-right");return c(),L("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:z([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...O)=>e.handleHoverExpand&&e.handleHoverExpand(...O)),onFocus:t[3]||(t[3]=(...O)=>e.handleHoverExpand&&e.handleHoverExpand(...O)),onClick:t[4]||(t[4]=(...O)=>e.handleClick&&e.handleClick(...O))},[Q(" prefix "),e.multiple?(c(),V(f,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ge(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(c(),V(g,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ge(()=>{},["stop"]))},{default:k(()=>[Q(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Fa]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(c(),V(C,{key:2,class:z(e.ns.e("prefix"))},{default:k(()=>[w(h)]),_:1},8,["class"])):Q("v-if",!0),Q(" content "),w($),Q(" postfix "),e.isLeaf?Q("v-if",!0):(c(),L(K,{key:3},[e.node.loading?(c(),V(C,{key:0,class:z([e.ns.is("loading"),e.ns.e("postfix")])},{default:k(()=>[w(B)]),_:1},8,["class"])):(c(),V(C,{key:1,class:z(["arrow-right",e.ns.e("postfix")])},{default:k(()=>[w(U)]),_:1},8,["class"]))],64))],42,Ta)}var La=Te(Sa,[["render",Pa],["__file","node.vue"]]);const Da=ce({name:"ElCascaderMenu",components:{Loading:ol,ElIcon:be,ElScrollbar:pl,ElCascaderNode:La},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Ml(),o=ve("cascader-menu"),{t:l}=ul(),u=ba();let y=null,f=null;const g=sl(He),h=_(null),C=E(()=>!e.nodes.length),$=E(()=>!g.initialLoaded),B=E(()=>`${u.value}-${e.index}`),U=b=>{y=b.target},O=b=>{if(!(!g.isHoverMenu||!y||!h.value))if(y.contains(b.target)){q();const m=t.vnode.el,{left:T}=m.getBoundingClientRect(),{offsetWidth:S,offsetHeight:R}=m,I=b.clientX-T,N=y.offsetTop,A=N+y.offsetHeight;h.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${I} ${N} L${S} 0 V${N} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${I} ${A} L${S} ${R} V${A} Z" />
        `}else f||(f=window.setTimeout(x,g.config.hoverThreshold))},q=()=>{f&&(clearTimeout(f),f=null)},x=()=>{h.value&&(h.value.innerHTML="",q())};return{ns:o,panel:g,hoverZone:h,isEmpty:C,isLoading:$,menuId:B,t:l,handleExpand:U,handleMouseMove:O,clearHoverZone:x}}});function Ia(e,t,o,l,u,y){const f=J("el-cascader-node"),g=J("loading"),h=J("el-icon"),C=J("el-scrollbar");return c(),V(C,{key:e.menuId,tag:"ul",role:"menu",class:z(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:k(()=>{var $;return[(c(!0),L(K,null,G(e.nodes,B=>(c(),V(f,{key:B.uid,node:B,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(c(),L("div",{key:0,class:z(e.ns.e("empty-text"))},[w(h,{size:"14",class:z(e.ns.is("loading"))},{default:k(()=>[w(g)]),_:1},8,["class"]),ye(" "+oe(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(c(),L("div",{key:1,class:z(e.ns.e("empty-text"))},oe(e.t("el.cascader.noData")),3)):($=e.panel)!=null&&$.isHoverMenu?(c(),L("svg",{key:2,ref:"hoverZone",class:z(e.ns.e("hover-zone"))},null,2)):Q("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Ma=Te(Da,[["render",Ia],["__file","menu.vue"]]);let Ba=0;const Ua=e=>{const t=[e];let{parent:o}=e;for(;o;)t.unshift(o),o=o.parent;return t};class fe{constructor(t,o,l,u=!1){this.data=t,this.config=o,this.parent=l,this.root=u,this.uid=Ba++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:y,label:f,children:g}=o,h=t[g],C=Ua(this);this.level=u?0:l?l.level+1:1,this.value=t[y],this.label=t[f],this.pathNodes=C,this.pathValues=C.map($=>$.value),this.pathLabels=C.map($=>$.label),this.childrenData=h,this.children=(h||[]).map($=>new fe($,o,this)),this.loaded=!o.lazy||this.isLeaf||!ze(h)}get isDisabled(){const{data:t,parent:o,config:l}=this,{disabled:u,checkStrictly:y}=l;return(We(u)?u(t,this):!!t[u])||!y&&(o==null?void 0:o.isDisabled)}get isLeaf(){const{data:t,config:o,childrenData:l,loaded:u}=this,{lazy:y,leaf:f}=o,g=We(f)?f(t,this):t[f];return Bl(g)?y&&!u?!1:!(Array.isArray(l)&&l.length):!!g}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:o,children:l}=this,u=new fe(t,this.config,this);return Array.isArray(o)?o.push(t):this.childrenData=[t],l.push(u),u}calcText(t,o){const l=t?this.pathLabels.join(o):this.label;return this.text=l,l}broadcast(t,...o){const l=`onParent${Xe(t)}`;this.children.forEach(u=>{u&&(u.broadcast(t,...o),u[l]&&u[l](...o))})}emit(t,...o){const{parent:l}=this,u=`onChild${Xe(t)}`;l&&(l[u]&&l[u](...o),l.emit(t,...o))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,o=t.filter(u=>!u.isDisabled),l=o.length?o.every(u=>u.checked):!1;this.setCheckState(l)}setCheckState(t){const o=this.children.length,l=this.children.reduce((u,y)=>{const f=y.checked?1:y.indeterminate?.5:0;return u+f},0);this.checked=this.loaded&&this.children.filter(u=>!u.isDisabled).every(u=>u.loaded&&u.checked)&&t,this.indeterminate=this.loaded&&l!==o&&l>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:o,multiple:l}=this.config;o||!l?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Ae=(e,t)=>e.reduce((o,l)=>(l.isLeaf?o.push(l):(!t&&o.push(l),o=o.concat(Ae(l.children,t))),o),[]);class al{constructor(t,o){this.config=o;const l=(t||[]).map(u=>new fe(u,this.config));this.nodes=l,this.allNodes=Ae(l,!1),this.leafNodes=Ae(l,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,o){const l=o?o.appendChild(t):new fe(t,this.config);o||this.nodes.push(l),this.allNodes.push(l),l.isLeaf&&this.leafNodes.push(l)}appendNodes(t,o){t.forEach(l=>this.appendNode(l,o))}getNodeByValue(t,o=!1){return!t&&t!==0?null:this.getFlattedNodes(o).find(u=>Ce(u.value,t)||Ce(u.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:l,level:u})=>Ce(t.value,l)&&t.level===u)||null}}const yl=rl({modelValue:{type:ke([Number,String,Array])},options:{type:ke(Array),default:()=>[]},props:{type:ke(Object),default:()=>({})}}),za={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Ul,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Aa=e=>E(()=>({...za,...e.props})),tl=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Ha=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():Na(e)&&e.click()},Oa=(e,t)=>{const o=t.slice(0),l=o.map(y=>y.uid),u=e.reduce((y,f)=>{const g=l.indexOf(f.uid);return g>-1&&(y.push(f),o.splice(g,1),l.splice(g,1)),y},[]);return u.push(...o),u},qa=ce({name:"ElCascaderPanel",components:{ElCascaderMenu:Ma},props:{...yl,border:{type:Boolean,default:!0},renderLabel:Function},emits:[we,Se,"close","expand-change"],setup(e,{emit:t,slots:o}){let l=!1;const u=ve("cascader"),y=Aa(e);let f=null;const g=_(!0),h=_([]),C=_(null),$=_([]),B=_(null),U=_([]),O=E(()=>y.value.expandTrigger==="hover"),q=E(()=>e.renderLabel||o.default),x=()=>{const{options:i}=e,n=y.value;l=!1,f=new al(i,n),$.value=[f.getNodes()],n.lazy&&ze(e.options)?(g.value=!1,b(void 0,r=>{r&&(f=new al(r,n),$.value=[f.getNodes()]),g.value=!0,H(!1,!0)})):H(!1,!0)},b=(i,n)=>{const r=y.value;i=i||new fe({},r,void 0,!0),i.loading=!0;const v=D=>{const P=i,X=P.root?null:P;D&&(f==null||f.appendNodes(D,X)),P.loading=!1,P.loaded=!0,P.childrenData=P.childrenData||[],n&&n(D)};r.lazyLoad(i,v)},m=(i,n)=>{var r;const{level:v}=i,D=$.value.slice(0,v);let P;i.isLeaf?P=i.pathNodes[v-2]:(P=i,D.push(i.children)),((r=B.value)==null?void 0:r.uid)!==(P==null?void 0:P.uid)&&(B.value=i,$.value=D,!n&&t("expand-change",(i==null?void 0:i.pathValues)||[]))},T=(i,n,r=!0)=>{const{checkStrictly:v,multiple:D}=y.value,P=U.value[0];l=!0,!D&&(P==null||P.doCheck(!1)),i.doCheck(n),A(),r&&!D&&!v&&t("close"),!r&&!D&&!v&&S(i)},S=i=>{i&&(i=i.parent,S(i),i&&m(i))},R=i=>f==null?void 0:f.getFlattedNodes(i),I=i=>{var n;return(n=R(i))==null?void 0:n.filter(r=>r.checked!==!1)},N=()=>{U.value.forEach(i=>i.doCheck(!1)),A(),$.value=$.value.slice(0,1),B.value=null,t("expand-change",[])},A=()=>{var i;const{checkStrictly:n,multiple:r}=y.value,v=U.value,D=I(!n),P=Oa(v,D),X=P.map(M=>M.valueByOption);U.value=P,C.value=r?X:(i=X[0])!=null?i:null},H=(i=!1,n=!1)=>{const{modelValue:r}=e,{lazy:v,multiple:D,checkStrictly:P}=y.value,X=!P;if(!(!g.value||l||!n&&Ce(r,C.value)))if(v&&!i){const de=el($a(ll(r))).map(Y=>f==null?void 0:f.getNodeByValue(Y)).filter(Y=>!!Y&&!Y.loaded&&!Y.loading);de.length?de.forEach(Y=>{b(Y,()=>H(!1,n))}):H(!0,n)}else{const M=D?ll(r):[r],de=el(M.map(Y=>f==null?void 0:f.getNodeByValue(Y,X)));Z(de,n),C.value=ml(r)}},Z=(i,n=!0)=>{const{checkStrictly:r}=y.value,v=U.value,D=i.filter(M=>!!M&&(r||M.isLeaf)),P=f==null?void 0:f.getSameNode(B.value),X=n&&P||D[0];X?X.pathNodes.forEach(M=>m(M,!0)):B.value=null,v.forEach(M=>M.doCheck(!1)),Ze(D).forEach(M=>M.doCheck(!0)),U.value=D,ie(se)},se=()=>{il&&h.value.forEach(i=>{const n=i==null?void 0:i.$el;if(n){const r=n.querySelector(`.${u.namespace.value}-scrollbar__wrap`),v=n.querySelector(`.${u.b("node")}.${u.is("active")}`)||n.querySelector(`.${u.b("node")}.in-active-path`);Va(r,v)}})},ue=i=>{const n=i.target,{code:r}=i;switch(r){case W.up:case W.down:{i.preventDefault();const v=r===W.up?-1:1;Ee(hl(n,v,`.${u.b("node")}[tabindex="-1"]`));break}case W.left:{i.preventDefault();const v=h.value[tl(n)-1],D=v==null?void 0:v.$el.querySelector(`.${u.b("node")}[aria-expanded="true"]`);Ee(D);break}case W.right:{i.preventDefault();const v=h.value[tl(n)+1],D=v==null?void 0:v.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`);Ee(D);break}case W.enter:Ha(n);break}};return zl(He,Ze({config:y,expandingNode:B,checkedNodes:U,isHoverMenu:O,initialLoaded:g,renderLabelFn:q,lazyLoad:b,expandNode:m,handleCheckChange:T})),ee([y,()=>e.options],x,{deep:!0,immediate:!0}),ee(()=>e.modelValue,()=>{l=!1,H()},{deep:!0}),ee(()=>C.value,i=>{Ce(i,e.modelValue)||(t(we,i),t(Se,i))}),Al(()=>h.value=[]),dl(()=>!ze(e.modelValue)&&H()),{ns:u,menuList:h,menus:$,checkedNodes:U,handleKeyDown:ue,handleCheckChange:T,getFlattedNodes:R,getCheckedNodes:I,clearCheckedNodes:N,calculateCheckedValue:A,scrollToExpandingNode:se}}});function xa(e,t,o,l,u,y){const f=J("el-cascader-menu");return c(),L("div",{class:z([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...g)=>e.handleKeyDown&&e.handleKeyDown(...g))},[(c(!0),L(K,null,G(e.menus,(g,h)=>(c(),V(f,{key:h,ref_for:!0,ref:C=>e.menuList[h]=C,index:h,nodes:[...g]},null,8,["index","nodes"]))),128))],34)}var _e=Te(qa,[["render",xa],["__file","index.vue"]]);_e.install=e=>{e.component(_e.name,_e)};const Ra=_e,Ka=rl({...yl,size:Hl,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ke(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ke(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:sa.teleported,tagType:{...fa.type,default:"info"},validateEvent:{type:Boolean,default:!0},...Ol}),Wa={[we]:e=>!0,[Se]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>ql(e),expandChange:e=>!!e,removeTag:e=>!!e},Za={key:0},ja=["placeholder","onKeydown"],Ga=["onClick"],Xa="ElCascader",Ya=ce({name:Xa}),Ja=ce({...Ya,props:Ka,emits:Wa,setup(e,{expose:t,emit:o}){const l=e,u={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:s,placement:d}=a;["right","left","bottom","top"].includes(d)||(s.arrow.x=35)},requires:["arrow"]}]},y=xl();let f=0,g=0;const h=ve("cascader"),C=ve("input"),{t:$}=ul(),{form:B,formItem:U}=ca(),{valueOnClear:O}=Rl(l),q=_(null),x=_(null),b=_(null),m=_(null),T=_(null),S=_(!1),R=_(!1),I=_(!1),N=_(!1),A=_(""),H=_(""),Z=_([]),se=_([]),ue=_([]),i=_(!1),n=E(()=>y.style),r=E(()=>l.disabled||(B==null?void 0:B.disabled)),v=E(()=>l.placeholder||$("el.cascader.placeholder")),D=E(()=>H.value||Z.value.length>0||i.value?"":v.value),P=pa(),X=E(()=>["small"].includes(P.value)?"small":"default"),M=E(()=>!!l.props.multiple),de=E(()=>!l.filterable||M.value),Y=E(()=>M.value?H.value:A.value),Ne=E(()=>{var a;return((a=m.value)==null?void 0:a.checkedNodes)||[]}),gl=E(()=>!l.clearable||r.value||I.value||!R.value?!1:!!Ne.value.length),Fe=E(()=>{const{showAllLevels:a,separator:s}=l,d=Ne.value;return d.length?M.value?"":d[0].calcText(a,s):""}),kl=E(()=>(U==null?void 0:U.validateState)||""),Pe=E({get(){return ml(l.modelValue)},set(a){const s=a||O.value;o(we,s),o(Se,s),l.validateEvent&&(U==null||U.validate("change").catch(d=>Ca()))}}),bl=E(()=>[h.b(),h.m(P.value),h.is("disabled",r.value),y.class]),Cl=E(()=>[C.e("icon"),"icon-arrow-down",h.is("reverse",S.value)]),Nl=E(()=>h.is("focus",S.value||N.value)),Oe=E(()=>{var a,s;return(s=(a=q.value)==null?void 0:a.popperRef)==null?void 0:s.contentRef}),j=a=>{var s,d,F;r.value||(a=a??!S.value,a!==S.value&&(S.value=a,(d=(s=x.value)==null?void 0:s.input)==null||d.setAttribute("aria-expanded",`${a}`),a?(he(),ie((F=m.value)==null?void 0:F.scrollToExpandingNode)):l.filterable&&Be(),o("visibleChange",a)))},he=()=>{ie(()=>{var a;(a=q.value)==null||a.updatePopper()})},Le=()=>{I.value=!1},De=a=>{const{showAllLevels:s,separator:d}=l;return{node:a,key:a.uid,text:a.calcText(s,d),hitState:!1,closable:!r.value&&!a.isDisabled,isCollapseTag:!1}},Ie=a=>{var s;const d=a.node;d.doCheck(!1),(s=m.value)==null||s.calculateCheckedValue(),o("removeTag",d.valueByOption)},Vl=()=>{if(!M.value)return;const a=Ne.value,s=[],d=[];if(a.forEach(F=>d.push(De(F))),se.value=d,a.length){a.slice(0,l.maxCollapseTags).forEach(le=>s.push(De(le)));const F=a.slice(l.maxCollapseTags),te=F.length;te&&(l.collapseTags?s.push({key:-1,text:`+ ${te}`,closable:!1,isCollapseTag:!0}):F.forEach(le=>s.push(De(le))))}Z.value=s},qe=()=>{var a,s;const{filterMethod:d,showAllLevels:F,separator:te}=l,le=(s=(a=m.value)==null?void 0:a.getFlattedNodes(!l.props.checkStrictly))==null?void 0:s.filter(ne=>ne.isDisabled?!1:(ne.calcText(F,te),d(ne,Y.value)));M.value&&(Z.value.forEach(ne=>{ne.hitState=!1}),se.value.forEach(ne=>{ne.hitState=!1})),I.value=!0,ue.value=le,he()},El=()=>{var a;let s;I.value&&T.value?s=T.value.$el.querySelector(`.${h.e("suggestion-item")}`):s=(a=m.value)==null?void 0:a.$el.querySelector(`.${h.b("node")}[tabindex="-1"]`),s&&(s.focus(),!I.value&&s.click())},Me=()=>{var a,s;const d=(a=x.value)==null?void 0:a.input,F=b.value,te=(s=T.value)==null?void 0:s.$el;if(!(!il||!d)){if(te){const le=te.querySelector(`.${h.e("suggestion-list")}`);le.style.minWidth=`${d.offsetWidth}px`}if(F){const{offsetHeight:le}=F,ne=Z.value.length>0?`${Math.max(le+6,f)}px`:`${f}px`;d.style.height=ne,he()}}},_l=a=>{var s;return(s=m.value)==null?void 0:s.getCheckedNodes(a)},$l=a=>{he(),o("expandChange",a)},pe=a=>{var s;const d=(s=a.target)==null?void 0:s.value;if(a.type==="compositionend")i.value=!1,ie(()=>Ue(d));else{const F=d[d.length-1]||"";i.value=!ta(F)}},wl=a=>{if(!i.value)switch(a.code){case W.enter:j();break;case W.down:j(!0),ie(El),a.preventDefault();break;case W.esc:S.value===!0&&(a.preventDefault(),a.stopPropagation(),j(!1));break;case W.tab:j(!1);break}},Sl=()=>{var a;(a=m.value)==null||a.clearCheckedNodes(),!S.value&&l.filterable&&Be(),j(!1)},Be=()=>{const{value:a}=Fe;A.value=a,H.value=a},Tl=a=>{var s,d;const{checked:F}=a;M.value?(s=m.value)==null||s.handleCheckChange(a,!F,!1):(!F&&((d=m.value)==null||d.handleCheckChange(a,!0,!1)),j(!1))},Fl=a=>{const s=a.target,{code:d}=a;switch(d){case W.up:case W.down:{const F=d===W.up?-1:1;Ee(hl(s,F,`.${h.e("suggestion-item")}[tabindex="-1"]`));break}case W.enter:s.click();break}},Pl=()=>{const a=Z.value,s=a[a.length-1];g=H.value?0:g+1,!(!s||!g||l.collapseTags&&a.length>1)&&(s.hitState?Ie(s):s.hitState=!0)},xe=a=>{const s=a.target,d=h.e("search-input");s.className===d&&(N.value=!0),o("focus",a)},Re=a=>{N.value=!1,o("blur",a)},Ll=ra(()=>{const{value:a}=Y;if(!a)return;const s=l.beforeFilter(a);Kl(s)?s.then(qe).catch(()=>{}):s!==!1?qe():Le()},l.debounce),Ue=(a,s)=>{!S.value&&j(!0),!(s!=null&&s.isComposing)&&(a?Ll():Le())},Ke=a=>Number.parseFloat(ga(C.cssVarName("input-height"),a).value)-2;return ee(I,he),ee([Ne,r],Vl),ee(Z,()=>{ie(()=>Me())}),ee(P,async()=>{await ie();const a=x.value.input;f=Ke(a)||f,Me()}),ee(Fe,Be,{immediate:!0}),dl(()=>{const a=x.value.input,s=Ke(a);f=a.offsetHeight||s,ya(a,Me)}),t({getCheckedNodes:_l,cascaderPanelRef:m,togglePopperVisible:j,contentRef:Oe}),(a,s)=>(c(),V(p(Ge),{ref_key:"tooltipRef",ref:q,visible:S.value,teleported:a.teleported,"popper-class":[p(h).e("dropdown"),a.popperClass],"popper-options":u,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${p(h).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Le},{default:k(()=>[Ve((c(),L("div",{class:z(p(bl)),style:Wl(p(n)),onClick:s[5]||(s[5]=()=>j(p(de)?void 0:!0)),onKeydown:wl,onMouseenter:s[6]||(s[6]=d=>R.value=!0),onMouseleave:s[7]||(s[7]=d=>R.value=!1)},[w(p(cl),{ref_key:"input",ref:x,modelValue:A.value,"onUpdate:modelValue":s[1]||(s[1]=d=>A.value=d),placeholder:p(D),readonly:p(de),disabled:p(r),"validate-event":!1,size:p(P),class:z(p(Nl)),tabindex:p(M)&&a.filterable&&!p(r)?-1:void 0,onCompositionstart:pe,onCompositionupdate:pe,onCompositionend:pe,onFocus:xe,onBlur:Re,onInput:Ue},{suffix:k(()=>[p(gl)?(c(),V(p(be),{key:"clear",class:z([p(C).e("icon"),"icon-circle-close"]),onClick:ge(Sl,["stop"])},{default:k(()=>[w(p(Zl))]),_:1},8,["class","onClick"])):(c(),V(p(be),{key:"arrow-down",class:z(p(Cl)),onClick:s[0]||(s[0]=ge(d=>j(),["stop"]))},{default:k(()=>[w(p(jl))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),p(M)?(c(),L("div",{key:0,ref_key:"tagWrapper",ref:b,class:z([p(h).e("tags"),p(h).is("validate",!!p(kl))])},[(c(!0),L(K,null,G(Z.value,d=>(c(),V(p(Ye),{key:d.key,type:a.tagType,size:p(X),hit:d.hitState,closable:d.closable,"disable-transitions":"",onClose:F=>Ie(d)},{default:k(()=>[d.isCollapseTag===!1?(c(),L("span",Za,oe(d.text),1)):(c(),V(p(Ge),{key:1,disabled:S.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:k(()=>[ae("span",null,oe(d.text),1)]),content:k(()=>[ae("div",{class:z(p(h).e("collapse-tags"))},[(c(!0),L(K,null,G(se.value.slice(a.maxCollapseTags),(F,te)=>(c(),L("div",{key:te,class:z(p(h).e("collapse-tag"))},[(c(),V(p(Ye),{key:F.key,class:"in-tooltip",type:a.tagType,size:p(X),hit:F.hitState,closable:F.closable,"disable-transitions":"",onClose:le=>Ie(F)},{default:k(()=>[ae("span",null,oe(F.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),a.filterable&&!p(r)?Ve((c(),L("input",{key:0,"onUpdate:modelValue":s[2]||(s[2]=d=>H.value=d),type:"text",class:z(p(h).e("search-input")),placeholder:p(Fe)?"":p(v),onInput:s[3]||(s[3]=d=>Ue(H.value,d)),onClick:s[4]||(s[4]=ge(d=>j(!0),["stop"])),onKeydown:Gl(Pl,["delete"]),onCompositionstart:pe,onCompositionupdate:pe,onCompositionend:pe,onFocus:xe,onBlur:Re},null,42,ja)),[[Xl,H.value]]):Q("v-if",!0)],2)):Q("v-if",!0)],38)),[[p(ua),()=>j(!1),p(Oe)]])]),content:k(()=>[Ve(w(p(Ra),{ref_key:"cascaderPanelRef",ref:m,modelValue:p(Pe),"onUpdate:modelValue":s[8]||(s[8]=d=>Yl(Pe)?Pe.value=d:null),options:a.options,props:l.props,border:!1,"render-label":a.$slots.default,onExpandChange:$l,onClose:s[9]||(s[9]=d=>a.$nextTick(()=>j(!1)))},null,8,["modelValue","options","props","render-label"]),[[je,!I.value]]),a.filterable?Ve((c(),V(p(pl),{key:0,ref_key:"suggestionPanel",ref:T,tag:"ul",class:z(p(h).e("suggestion-panel")),"view-class":p(h).e("suggestion-list"),onKeydown:Fl},{default:k(()=>[ue.value.length?(c(!0),L(K,{key:0},G(ue.value,d=>(c(),L("li",{key:d.uid,class:z([p(h).e("suggestion-item"),p(h).is("checked",d.checked)]),tabindex:-1,onClick:F=>Tl(d)},[ae("span",null,oe(d.text),1),d.checked?(c(),V(p(be),{key:0},{default:k(()=>[w(p(nl))]),_:1})):Q("v-if",!0)],10,Ga))),128)):Jl(a.$slots,"empty",{key:1},()=>[ae("li",{class:z(p(h).e("empty-text"))},oe(p($)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[je,I.value]]):Q("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var $e=Te(Ja,[["__file","cascader.vue"]]);$e.install=e=>{e.component($e.name,$e)};const Qa=$e,et=Qa,lt=e=>(la("data-v-fa78eae0"),e=e(),aa(),e),at=lt(()=>ae("div",{class:"",style:{"margin-bottom":"20px"}},[ae("span",null,"新建销售线索")],-1)),tt={style:{width:"500px"}},nt={style:{"margin-top":"20px","text-align":"right"}},ot=ce({__name:"CluesAdd",setup(e){const t=Ql();ea();const o=_(null),l=_({companyName:"",contactName:"",contactTel:"",country:"",province:"",city:"",address:"",companyBrand:[""],customField:[]}),u=_([]),y=_([]),f=_([]),g=_(""),h=_(""),C=_(""),$=_([]),B=()=>{console.log(l.value),o.value.validate(b=>{b&&me.add(l.value).then(m=>{m.code===0?(Qe.success("保存成功"),t.go(-1)):Qe.error(m.msg)})})},U=()=>{me.getCountry().then(b=>{b.code===0&&(u.value=b.data,g.value="CHN")})},O=()=>{me.getProvince({countryCode:g.value}).then(b=>{b.code===0&&(y.value=b.data)})},q=()=>{me.getCity({provinceCode:h.value}).then(b=>{b.code===0&&(f.value=b.data)})};ee(()=>g.value,b=>{let m=u.value.find(T=>T.code==b);l.value.country=m&&m.name||"",O()}),ee(()=>h.value,b=>{let m=y.value.find(T=>T.code==b);l.value.province=m&&m.name||"",q()}),ee(()=>C.value,b=>{let m=f.value.find(T=>T.code==b);l.value.city=m&&m.name||""});const x=()=>{me.getCustomField().then(b=>{b.code===0&&($.value=b.data,b.data.forEach(m=>{l.value.customField.push({[m.key]:Je[m.type].value})}),l.value.customField[4].custom11=[["1"],["1","1-2"],["1","1-2","1-2-1"],["1","1-1","1-1-2"]])})};return U(),x(),(b,m)=>{const T=cl,S=na,R=ma,I=ha,N=va,A=fl,H=ia,Z=vl,se=da,ue=et,i=oa;return c(),L(K,null,[at,ae("div",tt,[w(i,{ref_key:"formRef",ref:o,model:l.value,"label-width":"auto"},{default:k(()=>[w(S,{label:"企业名称",prop:"companyName",rules:p(re).required},{default:k(()=>[w(T,{modelValue:l.value.companyName,"onUpdate:modelValue":m[0]||(m[0]=n=>l.value.companyName=n)},null,8,["modelValue"])]),_:1},8,["rules"]),w(S,{label:"联系人",prop:"contactName",rules:p(re).required},{default:k(()=>[w(T,{modelValue:l.value.contactName,"onUpdate:modelValue":m[1]||(m[1]=n=>l.value.contactName=n)},null,8,["modelValue"])]),_:1},8,["rules"]),w(S,{label:"联系电话",prop:"contactTel",rules:p(re).phone},{default:k(()=>[w(T,{modelValue:l.value.contactTel,"onUpdate:modelValue":m[2]||(m[2]=n=>l.value.contactTel=n)},null,8,["modelValue"])]),_:1},8,["rules"]),w(S,{label:"国家",prop:"country",rules:p(re).select},{default:k(()=>[w(I,{modelValue:g.value,"onUpdate:modelValue":m[3]||(m[3]=n=>g.value=n)},{default:k(()=>[(c(!0),L(K,null,G(u.value,n=>(c(),V(R,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),w(S,{label:"省份",prop:"province",rules:p(re).select},{default:k(()=>[w(I,{modelValue:h.value,"onUpdate:modelValue":m[4]||(m[4]=n=>h.value=n)},{default:k(()=>[(c(!0),L(K,null,G(y.value,n=>(c(),V(R,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),w(S,{label:"城市",prop:"city",rules:p(re).select},{default:k(()=>[w(I,{modelValue:C.value,"onUpdate:modelValue":m[5]||(m[5]=n=>C.value=n)},{default:k(()=>[(c(!0),L(K,null,G(f.value,n=>(c(),V(R,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),w(S,{label:"详细地址",prop:"address",rules:p(re).required},{default:k(()=>[w(T,{type:"textarea",modelValue:l.value.address,"onUpdate:modelValue":m[6]||(m[6]=n=>l.value.address=n)},null,8,["modelValue"])]),_:1},8,["rules"]),(c(!0),L(K,null,G(l.value.companyBrand,(n,r)=>(c(),V(S,{key:r,label:r===0?"品牌":" ",prop:`companyBrand[${r}]`,rules:p(re).required},{default:k(()=>[w(T,{modelValue:l.value.companyBrand[r],"onUpdate:modelValue":v=>l.value.companyBrand[r]=v},{append:k(()=>[r===0?(c(),V(N,{key:0,onClick:m[7]||(m[7]=v=>l.value.companyBrand.push("")),icon:"Plus"})):(c(),V(N,{key:1,onClick:v=>l.value.companyBrand.splice(r,1),icon:"Minus"},null,8,["onClick"]))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"]))),128)),(c(!0),L(K,null,G($.value,(n,r)=>(c(),V(S,{key:n.key,label:n.name,prop:`customField[${r}][${n.key}]`,rules:n.isRequired?p(Je)[n.type].rules:[]},{default:k(()=>[n.type===1?(c(),V(T,{key:0,modelValue:l.value.customField[r][n.key],"onUpdate:modelValue":v=>l.value.customField[r][n.key]=v,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])):n.type===2?(c(),V(T,{key:1,modelValue:l.value.customField[r][n.key],"onUpdate:modelValue":v=>l.value.customField[r][n.key]=v,modelModifiers:{trim:!0},type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):n.type===3?(c(),V(I,{key:2,modelValue:l.value.customField[r][n.key],"onUpdate:modelValue":v=>l.value.customField[r][n.key]=v},{default:k(()=>[(c(!0),L(K,null,G(n.data||[],v=>(c(),V(R,{key:v.id,label:v.name,value:v.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):n.type===4?(c(),V(H,{key:3,modelValue:l.value.customField[r][n.key],"onUpdate:modelValue":v=>l.value.customField[r][n.key]=v},{default:k(()=>[(c(!0),L(K,null,G(n.data||[],v=>(c(),V(A,{key:v.id,value:v.id},{default:k(()=>[ye(oe(v.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):n.type===5?(c(),V(se,{key:4,modelValue:l.value.customField[r][n.key],"onUpdate:modelValue":v=>l.value.customField[r][n.key]=v},{default:k(()=>[(c(!0),L(K,null,G(n.data||[],v=>(c(),V(Z,{key:v.id,value:v.id,name:"type"},{default:k(()=>[ye(oe(v.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):n.type===6?(c(),V(ue,{key:5,clearable:"",style:{width:"100%"},modelValue:l.value.customField[r][n.key],"onUpdate:modelValue":v=>l.value.customField[r][n.key]=v,options:n.data,props:{value:"id",label:"name",children:"child",checkStrictly:!0}},null,8,["modelValue","onUpdate:modelValue","options"])):n.type===7?(c(),V(ue,{key:6,clearable:"",style:{width:"100%"},modelValue:l.value.customField[r][n.key],"onUpdate:modelValue":v=>l.value.customField[r][n.key]=v,options:n.data,props:{value:"id",label:"name",children:"child",checkStrictly:!0,multiple:!0}},null,8,["modelValue","onUpdate:modelValue","options"])):Q("",!0)]),_:2},1032,["label","prop","rules"]))),128)),ae("div",nt,[w(N,{type:"primary",onClick:B,size:"small"},{default:k(()=>[ye("保存")]),_:1}),w(N,{type:"default",onClick:m[8]||(m[8]=n=>b.$router.go(-1)),size:"small"},{default:k(()=>[ye("取消")]),_:1})])]),_:1},8,["model"])])],64)}}}),Tt=Ea(ot,[["__scopeId","data-v-fa78eae0"]]);export{Tt as default};
