import{d as K,l as f,s as W,o as w,f as B,P as E,S as e,w as a,Q as p,F as D,V as X,a as Y,Z as ee,a8 as te,M as F,c as le}from"./index-lc_JfiCV.js";import{E as oe}from"./el-dialog-BOS0JD9U.js";import"./el-overlay-kQgvbfoS.js";import{b as ae,E as ie,a as re,c as ne}from"./el-input-BX9TAKJ6.js";import{E as se}from"./el-row-BQdFDnKy.js";import{E as de}from"./el-col-79PjLYqF.js";import"./el-tag-C6FJhHXC.js";import{a as pe,E as ue}from"./el-select-CH-e7RMx.js";import"./el-scrollbar-WKuk5KR8.js";import{E as me}from"./el-pagination-BIbbOqJY.js";import{E as ce,a as fe}from"./el-table-column-FQKdNA0S.js";import"./el-checkbox-MkzDAGTR.js";import"./el-tooltip-l0sNRNKZ.js";import{E as be}from"./el-progress-BA_zjtfJ.js";import{T as he}from"./index-B0gOdcgW.js";import{r as b}from"./request-CS7K_x_s.js";/* empty css                   */import{E as ge}from"./el-message-box-BZl_YAtx.js";import{E as d}from"./index-CtW1sF07.js";import"./index-DQGdtWxG.js";import"./vnode-BKgERuUO.js";import"./isEqual-B6yOdm1l.js";import"./isArrayLikeObject-Dv7yRgfI.js";import"./cloneDeep-ZeGO1O9j.js";import"./el-date-picker-DUZvl_VS.js";import"./arrays-6TrVLtTe.js";import"./el-radio-DqPLe_rZ.js";/* empty css                          */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./aria-KgdLjl5h.js";import"./validator-Bzr9u_ut.js";const h="/web/v1",_e=s=>b({url:h+"/exhibition/position/getList",method:"get",params:s}),ve=s=>b({url:h+"/exhibition/position/add",method:"post",data:s}),xe=s=>b({url:h+"/exhibition/position/edit",method:"post",data:s}),Ee=s=>b({url:h+"/exhibition/position/delete",method:"post",data:s}),Ve=s=>b({url:h+"/exhibition/position/import",method:"post",data:s}),ye=s=>b({url:h+"/exhibition/position/export",method:"post",data:s}),Ce="/web/v1",we=()=>b({url:Ce+"/exhibitor/info/getList",method:"get"}),ke={class:"s-table-operations"},Ue={class:"s-table-pagination"},Pe={class:"dialog-footer"},nt=K({__name:"Manage",setup(s){ee();const g=te().query.id,V=f([]),k=f(null),v=f(null),m=f(!1),y=f(!1),o=W({id:"",exhibitionId:g,hallCode:"",positionCode:"",standardPrice:0,specialPrice:0,specialUnit:1,length:0,width:0,remark:"",exhibitor:""}),T={hallCode:[{required:!0,message:"请输入大厅号",trigger:"blur"}],positionCode:[{required:!0,message:"请输入位置号",trigger:"blur"}],standardPrice:[{required:!0,message:"请输入标准展位单价",trigger:"blur"},{validator:(l,t,i)=>{t<=0?i(new Error("不能小于0")):i()}}],specialPrice:[{required:!0,message:"请输入特装展位单价",trigger:"blur"},{validator:(l,t,i)=>{t<=0?i(new Error("不能小于0")):i()}}],specialUnit:[{required:!0,message:"请选择单位",trigger:"blur"}],length:[{required:!0,message:"请输入长度",trigger:"blur"},{validator:(l,t,i)=>{t<=0?i(new Error("必须大于0")):i()}}],width:[{required:!0,message:"请输入宽度",trigger:"blur"},{validator:(l,t,i)=>{t<=0?i(new Error("必须大于0")):i()}}],exhibitor:[{required:!0,message:"请选择展商",trigger:"blur"}]};let U=f([]);we().then(l=>{l.code===0&&(U.value=l.data)});const I=f([{label:"企业名称",key:"1",type:"input",value:""},{label:"2",key:"2",type:"select",value:"",options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"}]},{label:"3",key:"3",type:"date",value:""}]),_=()=>{_e({exhibitionId:g}).then(l=>{l.code===0?V.value=l.data:V.value=[]})},R=async l=>{y.value=!0,m.value=!0,await F(),v.value.resetFields(),o.hallCode=l.hallCode,o.positionCode=l.positionCode,o.standardPrice=l.standardPrice,o.specialPrice=l.specialPrice,o.specialUnit=l.specialUnit.indexOf("个")>-1?2:1,o.length=l.length,o.width=l.width,o.remark=l.remark,o.exhibitor=l.exhibitor,o.id=l.id},S=()=>{let l=k.value.getSelectionRows().map(t=>t.id);if(l.length===0){d.warning("请选择需要删除的数据");return}P(l)},P=l=>{ge.confirm("此操作将永久删除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Ee({id:l}).then(t=>{t.code===0?(d.success("删除成功"),_()):d.error(t.msg)})}).catch(()=>{})},L=async()=>{y.value=!1,m.value=!0,await F(),v.value.resetFields()},M=()=>{v.value.validate(l=>{if(l)if(y.value)xe(o).then(i=>{i.code===0?(d.success("编辑成功"),m.value=!1,_()):d.error(i.msg)});else{let{id:t,...i}=o;ve(i).then(x=>{x.code===0?(d.success("新增成功"),m.value=!1,_()):d.error(x.msg)})}else return!1})},$=()=>{ye({exhibitionId:g}).then(l=>{l.code===0?(window.open(l.data.url,"_self"),d.success("导出成功")):d.error(l.msg)})},N=l=>{const t=l.size/1024/1024<2;return t||d.error("文件大小不能超过 2MB!"),t},O=l=>{const t=new FormData;t.append("file",l),t.append("exhibitionId",g),Ve(t).then(i=>{i.code===0?(d.success("导入成功"),_()):d.error(i.msg)})},A=l=>{console.log(l)};return g&&_(),(l,t)=>{const i=ae,x=be,n=ce,Q=fe,Z=me,c=ie,u=re,C=pe,q=ue,z=de,j=se,G=ne,H=oe;return w(),B(D,null,[E("div",null,[e(he,{data:I.value,onSearch:A},null,8,["data"]),E("div",ke,[e(i,{size:"small",onClick:L},{default:a(()=>[p("新增")]),_:1}),e(x,{style:{display:"flex","margin-left":"10px","margin-right":"10px"},"show-file-list":!1,"before-upload":N,"http-request":O},{default:a(()=>[e(i,{size:"small"},{default:a(()=>[p("导入")]),_:1})]),_:1}),e(i,{size:"small",onClick:$},{default:a(()=>[p("导出")]),_:1}),e(i,{size:"small",onClick:S},{default:a(()=>[p("删除")]),_:1})]),e(Q,{ref_key:"tableRef",ref:k,data:V.value,border:"","table-layout":"fixed","max-height":"300","header-row-class-name":"s-table-header"},{default:a(()=>[e(n,{type:"selection",width:"50"}),e(n,{prop:"id",label:"ID",width:"50"}),e(n,{prop:"hallCode",label:"展馆号"}),e(n,{prop:"positionCode",label:"展位号"}),e(n,{prop:"standardPrice",label:"标摊/元"}),e(n,{prop:"specialPrice",label:"特装/元"}),e(n,{prop:"specialUnit",label:"特装/㎡/个"}),e(n,{prop:"length",label:"长"}),e(n,{prop:"width",label:"宽"}),e(n,{prop:"remark",label:"备注"}),e(n,{prop:"exhibitor",label:"参展商"}),e(n,{prop:"createTime",label:"创建时间"}),e(n,{fixed:"right",label:"操作",width:"120"},{default:a(r=>[e(i,{link:"",type:"primary",size:"small",onClick:J=>R(r.row)},{default:a(()=>[p("编辑")]),_:2},1032,["onClick"]),e(i,{link:"",type:"primary",size:"small",onClick:J=>P([r.row.id])},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),E("div",Ue,[e(Z,{layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50],total:1e3})])]),e(H,{modelValue:m.value,"onUpdate:modelValue":t[10]||(t[10]=r=>m.value=r),title:"新增展位信息",width:"500",draggable:""},{footer:a(()=>[E("div",Pe,[e(i,{onClick:t[9]||(t[9]=r=>m.value=!1)},{default:a(()=>[p("取消")]),_:1}),e(i,{type:"primary",onClick:M},{default:a(()=>[p("确定")]),_:1})])]),default:a(()=>[e(G,{ref_key:"formRef",ref:v,model:o,rules:T,"label-width":"auto"},{default:a(()=>[e(u,{label:"展馆号",prop:"hallCode"},{default:a(()=>[e(c,{modelValue:o.hallCode,"onUpdate:modelValue":t[0]||(t[0]=r=>o.hallCode=r),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(u,{label:"展位号",prop:"positionCode"},{default:a(()=>[e(c,{modelValue:o.positionCode,"onUpdate:modelValue":t[1]||(t[1]=r=>o.positionCode=r),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(u,{label:"标准展位",prop:"standardPrice"},{default:a(()=>[e(c,{modelValue:o.standardPrice,"onUpdate:modelValue":t[2]||(t[2]=r=>o.standardPrice=r),autocomplete:"off",type:"number"},{append:a(()=>[p("元/个")]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"特装展位",prop:"specialPrice"},{default:a(()=>[e(c,{modelValue:o.specialPrice,"onUpdate:modelValue":t[4]||(t[4]=r=>o.specialPrice=r),autocomplete:"off",type:"number"},{append:a(()=>[e(q,{modelValue:o.specialUnit,"onUpdate:modelValue":t[3]||(t[3]=r=>o.specialUnit=r),placeholder:"请选择",style:{width:"120px"}},{default:a(()=>[e(C,{label:"元/㎡",value:1}),e(C,{label:"元/个",value:2})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(j,null,{default:a(()=>[e(z,{span:12},{default:a(()=>[e(u,{label:"长",prop:"length"},{default:a(()=>[e(c,{modelValue:o.length,"onUpdate:modelValue":t[5]||(t[5]=r=>o.length=r),autocomplete:"off",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(z,{span:12},{default:a(()=>[e(u,{label:"宽",prop:"width"},{default:a(()=>[e(c,{modelValue:o.width,"onUpdate:modelValue":t[6]||(t[6]=r=>o.width=r),autocomplete:"off",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"备注"},{default:a(()=>[e(c,{modelValue:o.remark,"onUpdate:modelValue":t[7]||(t[7]=r=>o.remark=r),autocomplete:"off",type:"textarea"},null,8,["modelValue"])]),_:1}),e(u,{label:"参展商",prop:"exhibitor"},{default:a(()=>[e(q,{modelValue:o.exhibitor,"onUpdate:modelValue":t[8]||(t[8]=r=>o.exhibitor=r),placeholder:"请选择"},{default:a(()=>[(w(!0),B(D,null,X(Y(U),r=>(w(),le(C,{key:r.id,label:r.name,value:r.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});export{nt as default};
