import{d as U,s as k,o as I,c as x,w as t,P as B,S as o,Q as r}from"./index-Cyl9fO3v.js";import{E as F}from"./el-dialog-BamVuasQ.js";/* empty css                   *//* empty css                     */import{E as w}from"./el-progress-CdrlM1lH.js";import"./el-button-knvw9q7V.js";/* empty css                 */import"./el-input-DZeUFWdx.js";import{i as D}from"./index-Bia3K2vR.js";import{u as N}from"./index-BNd8y_Sr.js";/* empty css                   */import{E as i}from"./request-BDPzozis.js";import{E as R}from"./index-BFLFmJKL.js";import{E as z,a as A}from"./index-BeYjfuBF.js";import{E as M,a as P}from"./index-C9-xEIeG.js";import{E as S}from"./index-DjdJ1_FL.js";const q={class:"dialog-footer"},ae=U({__name:"ApplyInvoice",emits:["callback"],setup(G,{expose:p,emit:c}){const e=k({show:!1,form:{paymentId:"",title:"",socialCode:"",contact:"",phone:"",email:"",type:"",status:"",invoiceCode:"",img:""}}),_=()=>{D.apply(e.form).then(m=>{m.code===0?(i.success("申请成功"),e.show=!1,E("callback")):i.error(m.msg)})},V=m=>{e.show=!0,e.form.paymentId=m.id,e.form.title=m.title,e.form.socialCode=m.socialCode,e.form.contact=m.contact,e.form.phone=m.phone,e.form.email=m.email,e.form.type=m.type,e.form.status=m.status,e.form.invoiceCode=m.invoiceCode,e.form.img=m.img},b=m=>m.size/1024/1024>2?(i.error("最大 2MB!"),!1):!0,y=m=>{let l=new FormData;return l.append("upload",m.file),new Promise((u,d)=>{N(l).then(f=>{f.code===0?u(f.data):d(f)})})},E=c;return p({setApplay:V}),(m,l)=>{const u=R,d=z,f=M,s=P,n=S,g=w,v=A,C=F;return I(),x(C,{modelValue:e.show,"onUpdate:modelValue":l[9]||(l[9]=a=>e.show=a),title:"申请发票",width:"500",draggable:""},{footer:t(()=>[B("div",q,[o(n,{onClick:l[8]||(l[8]=a=>e.show=!1)},{default:t(()=>[r("取消")]),_:1}),o(n,{type:"primary",onClick:_},{default:t(()=>[r("确定")]),_:1})])]),default:t(()=>[o(v,{ref:"willFormRef",model:e.form,"label-width":"auto"},{default:t(()=>[o(d,{label:"发票抬头"},{default:t(()=>[o(u,{modelValue:e.form.title,"onUpdate:modelValue":l[0]||(l[0]=a=>e.form.title=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"社会信用代码"},{default:t(()=>[o(u,{modelValue:e.form.socialCode,"onUpdate:modelValue":l[1]||(l[1]=a=>e.form.socialCode=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"联系人"},{default:t(()=>[o(u,{modelValue:e.form.contact,"onUpdate:modelValue":l[2]||(l[2]=a=>e.form.contact=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"手机号"},{default:t(()=>[o(u,{modelValue:e.form.phone,"onUpdate:modelValue":l[3]||(l[3]=a=>e.form.phone=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"邮箱"},{default:t(()=>[o(u,{modelValue:e.form.email,"onUpdate:modelValue":l[4]||(l[4]=a=>e.form.email=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"发票类型"},{default:t(()=>[o(s,{modelValue:e.form.type,"onUpdate:modelValue":l[5]||(l[5]=a=>e.form.type=a)},{default:t(()=>[o(f,{value:1},{default:t(()=>[r("电子专票")]),_:1}),o(f,{value:2},{default:t(()=>[r("电子普票")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"开票状态"},{default:t(()=>[o(s,{modelValue:e.form.status,"onUpdate:modelValue":l[6]||(l[6]=a=>e.form.status=a)},{default:t(()=>[o(f,{value:0},{default:t(()=>[r("待开票")]),_:1}),o(f,{value:1},{default:t(()=>[r("已开票")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"发票号"},{default:t(()=>[o(u,{modelValue:e.form.invoiceCode,"onUpdate:modelValue":l[7]||(l[7]=a=>e.form.invoiceCode=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"发票附件",prop:"img"},{default:t(()=>[o(g,{"on-success":(a,L,Q)=>{e.form.img=a.url},"before-upload":b,"http-request":y},{default:t(()=>[o(n,{link:"",type:"primary",size:"small"},{default:t(()=>[r("上传附件")]),_:1})]),_:1},8,["on-success"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{ae as _};
